start_netflix:
  alias: Start Netflix (Living Room)
  sequence:
  - service: media_player.select_source
    target:
      entity_id: media_player.living_room_tv
    data:
      source: com.netflix.ninja
  mode: single
  icon: mdi:netflix
stop_netflix:
  alias: Stop Netflix (Living Room)
  sequence:
  - service: media_player.select_source
    target:
      entity_id: media_player.living_room_tv
    data:
      source: '!com.netflix.ninja'
  mode: single
  icon: mdi:netflix
give_me_darkness:
  alias: Give Me Darkness
  sequence:
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.give_me_darkness
  - service: light.turn_on
    data: {}
    target:
      area_id:
      - dining_room
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'off'
      sequence:
      - service: light.turn_off
        target:
          area_id:
          - kallen_bedroom
          - master_bedroom
          - living_room
          - emma_bedroom
          - downstairs_bathroom
        data: {}
    - conditions:
      - condition: state
        entity_id: input_boolean.guest_mode
        state: 'on'
      sequence:
      - service: light.turn_off
        target:
          area_id:
          - kallen_bedroom
          - master_bedroom
          - emma_bedroom
          - downstairs_bathroom
        data: {}
        alias: Leave living room light on
    alias: Turn off lights, leave living room light on if guest mode is on
  - service: input_select.select_option
    target:
      entity_id:
      - input_select.upstairs_hallway_scenes
      - input_select.mud_room_scenes
      - input_select.upstairs_bathroom_scenes
    data:
      option: Nightlight
    alias: Set nightlights
  - service: switch.turn_on
    target:
      entity_id:
      - switch.adaptive_lighting_sleep_mode_dining_room
    data: {}
  - if:
    - condition: state
      entity_id: person.christina_stork
      state: home
    then:
    - service: input_select.select_option
      data:
        option: Night Mode
      target:
        entity_id: input_select.tina_desk_scenes
  - if:
    - condition: template
      value_template: "{% if is_state('person.tony_stork','home') and is_state('person.christina_stork','home')
        %}\n  true\n{% else %}\n  false\n{% endif %}"
      alias: Both adults are home
    then:
    - service: script.activate_alexa_actionable_notification
      data_template:
        text: Would you like me to arm the security system?
        event_id: actionable_notification_night_security_arm
        alexa_device: '{{ states(''sensor.last_alexa'') }}'
      alias: Ask to arm security
    alias: Ask to arm security if both adults are home
  mode: single
  icon: mdi:weather-night
start_youtube:
  alias: Start Youtube (Living Room)
  sequence:
  - service: media_player.select_source
    target:
      entity_id: media_player.living_room_tv
    data:
      source: com.google.android.youtube.tv
  mode: single
  icon: mdi:youtube
stop_youtube:
  alias: Stop Youtube (Living Room)
  sequence:
  - service: media_player.select_source
    target:
      entity_id: media_player.living_room_tv
    data:
      source: '!com.google.android.youtube.tv'
  mode: single
  icon: mdi:youtube
start_twitch:
  alias: Start Twitch (Living Room)
  sequence:
  - service: media_player.select_source
    target:
      entity_id: media_player.living_room_tv
    data:
      source: tv.twitch.android.app
  mode: single
  icon: mdi:twitch
stop_twitch:
  alias: Stop Twitch (Living Room)
  sequence:
  - service: media_player.select_source
    data:
      source: '!tv.twitch.android.app'
    target:
      entity_id: media_player.living_room_tv
  mode: single
  icon: mdi:twitch
start_spotify:
  alias: Start Spotify (Living Room)
  sequence:
  - service: media_player.select_source
    target:
      entity_id: media_player.living_room_tv
    data:
      source: com.spotify.tv.android
  mode: single
  icon: mdi:spotify
stop_spotify:
  alias: Stop Spotify (Living Room)
  sequence:
  - service: media_player.select_source
    target:
      entity_id: media_player.living_room_tv
    data:
      source: '!com.spotify.tv.android'
  mode: single
  icon: mdi:spotify
alexa_tts_test:
  alias: Alexa TTS Test
  sequence:
  - service: notify.alexa_media
    data:
      data:
        method: all
        type: announce
      target: Living Room Echo Dot
      message: I farted
  mode: single
  icon: mdi:test-tube
kallen_timer_cancel:
  sequence:
  - service: timer.cancel
    target:
      entity_id: timer.kallen_timer
  mode: single
  alias: Kallen Timer - Cancel
  icon: mdi:cancel
global_off:
  alias: Global Off
  sequence:
  - service: light.turn_off
    data: {}
    target:
      entity_id: all
  - service: fan.turn_off
    data: {}
    target:
      entity_id: all
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.tina_desk_lights
  mode: single
  icon: mdi:earth-off
global_on:
  alias: Global On
  sequence:
  - service: light.turn_on
    data: {}
    target:
      entity_id: all
  mode: single
  icon: mdi:earth
max_brightness:
  sequence:
  - service: input_boolean.turn_on
    target:
      entity_id: input_boolean.tina_desk_lights
  - service: switch.turn_off
    target:
      entity_id:
      - switch.adaptive_lighting_basement_studio
      - switch.adaptive_lighting_kallen_bedroom
      - switch.adaptive_lighting_living_room
      - switch.adaptive_lighting_master_bedroom
      - switch.adaptive_lighting_mud_room
      - switch.adaptive_lighting_emma_bedroom
      - switch.adaptive_lighting_upstairs_hallway
      - switch.adaptive_lighting_dining_room
      - switch.adaptive_lighting_upstairs_bathroom
      - switch.adaptive_lighting_downstairs_bathroom
      - switch.adaptive_lighting_tina_lamp
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.shower_mode
  - service: automation.turn_off
    data: {}
    target:
      entity_id: automation.living_room_night_lighting
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.front_porch_light_on
  - service: light.turn_on
    data:
      kelvin: 5500
      brightness_pct: 100
    target:
      entity_id: all
  mode: single
  alias: Max Brightness
  icon: mdi:brightness-7
going_upstairs:
  alias: Going Upstairs
  sequence:
  - service: input_select.select_option
    data:
      option: Adaptive
    target:
      entity_id:
      - input_select.basement_studio_scenes
      - input_select.tina_lamp_scenes
      - input_select.mud_room_scenes
      - input_select.upstairs_hallway_scenes
      - input_select.living_room_scenes
  - service: input_boolean.turn_on
    entity_id: input_boolean.night_mode
  - service: media_player.turn_off
    target:
      entity_id: media_player.basement_tv
  - service: script.kallen_desktop_shutdown
  - service: script.asus_laptop_shutdown
  - service: script.activate_alexa_actionable_notification
    data_template:
      text: Would you like me to shut down your computer?
      event_id: actionable_notification_shutdown_computer
      alexa_device: media_player.basement_echo_dot
  - wait_for_trigger:
    - platform: state
      entity_id:
      - binary_sensor.upstairs_bathroom_motion
      to: 'on'
    timeout: 00:05:00
  - service: input_select.select_option
    data:
      option: Side Nightlight
    target:
      entity_id: input_select.master_bedroom_scenes
  mode: single
  icon: hue:room-stairs
basement_on:
  alias: Basement On
  sequence:
  - service: script.activate_alexa_actionable_notification
    data_template:
      text: Would you like me to turn on the computer for Collin?
      event_id: actionable_notification_kallen_computer_on
      alexa_device: '{{ states(''sensor.last_alexa'') }}'
  - service: light.turn_on
    data: {}
    target:
      area_id: basement_studio
  - service: script.tony_desktop_wake
    data: {}
  - service: media_player.turn_on
    data: {}
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: hue:room-stairs
start_youtube_basement:
  alias: Start Youtube (Basement)
  sequence:
  - service: media_player.select_source
    data:
      source: com.google.android.youtube.tv
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: mdi:youtube
stop_youtube_basement:
  alias: Stop Youtube (Basement)
  sequence:
  - service: media_player.select_source
    data:
      source: '!com.google.android.youtube.tv'
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: mdi:youtube
start_netflix_basement:
  alias: Start Netflix (Basement)
  sequence:
  - service: media_player.select_source
    data:
      source: com.netflix.ninja
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: mdi:netflix
stop_netflix_basement:
  alias: Stop Netflix (Basement)
  sequence:
  - service: media_player.select_source
    data:
      source: '!com.netflix.ninja'
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: mdi:netflix
start_twitch_basement:
  alias: Start Twitch (Basement)
  sequence:
  - service: media_player.select_source
    data:
      source: tv.twitch.android.app
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: mdi:twitch
stop_twitch_basement:
  alias: Stop Twitch (Basement)
  sequence:
  - service: media_player.select_source
    data:
      source: '!tv.twitch.android.app'
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: mdi:twitch
start_spotify_basement:
  alias: Start Spotify (Basement)
  sequence:
  - service: media_player.select_source
    data:
      source: com.spotify.tv.android
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: mdi:spotify
stop_spotify_basement:
  alias: Stop Spotify (Basement)
  sequence:
  - service: media_player.select_source
    data:
      source: '!com.spotify.tv.android'
    target:
      entity_id: media_player.basement_tv
  mode: single
  icon: mdi:spotify
max_brightness_cleanup:
  alias: Max Brightness Cleanup
  sequence:
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id:
      - input_boolean.shower_mode
      - input_boolean.tina_desk_lights
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.front_porch_light_on
  - service: automation.turn_on
    data: {}
    target:
      entity_id: automation.living_room_night_lighting
  - service: switch.turn_on
    target:
      entity_id:
      - switch.adaptive_lighting_basement_studio
      - switch.adaptive_lighting_kallen_bedroom
      - switch.adaptive_lighting_living_room
      - switch.adaptive_lighting_master_bedroom
      - switch.adaptive_lighting_mud_room
      - switch.adaptive_lighting_emma_bedroom
      - switch.adaptive_lighting_upstairs_hallway
      - switch.adaptive_lighting_dining_room
      - switch.adaptive_lighting_upstairs_bathroom
      - switch.adaptive_lighting_downstairs_bathroom
      - switch.adaptive_lighting_tina_lamp
    data: {}
  - service: input_text.set_value
    data: {}
    target:
      entity_id:
      - input_text.basement_studio_selected_scene
      - input_text.downstairs_bathroom_selected_scene
      - input_text.kallen_bedroom_selected_scene
      - input_text.living_room_selected_scene
      - input_text.master_bedroom_selected_scene
      - input_text.mud_room_selected_scene
      - input_text.emma_bedroom_selected_scene
      - input_text.tina_lamp_selected_scene
      - input_text.upstairs_hallway_selected_scene
  mode: single
  icon: mdi:broom
freeze_cleanup:
  alias: Freeze Cleanup
  sequence:
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id:
      - input_boolean.early_night_mode
      - input_boolean.night_mode
      - input_boolean.shower_mode
  - service: switch.turn_off
    data: {}
    target:
      entity_id:
      - switch.presence_simulation
      - switch.basement_echo_dot_do_not_disturb_switch
      - switch.living_room_echo_dot_do_not_disturb_switch
      - switch.master_bedroom_echo_dot_do_not_disturb_switch
  - if:
    - condition: time
      after: input_datetime.master_bedroom_wakeup
      before: input_datetime.master_bedroom_cooling
    then:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.master_bedroom_cooling_on
    - service: button.press
      data: {}
      target:
        entity_id: button.master_bedroom_day_mode
    else:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.master_bedroom_cooling_on
    - service: button.press
      data: {}
      target:
        entity_id: button.master_bedroom_night_mode
  - if:
    - condition: state
      entity_id: sensor.twitch_ironnerd24
      state: online
    then:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.studio_quiet
    else:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.studio_quiet
  - if:
    - condition: state
      entity_id: calendar.family_tinawork
      state: 'on'
    - condition: time
      before: input_datetime.tina_workday_end
      after: input_datetime.tina_workday_start
    then:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.work_today
    else:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.work_today
  - if:
    - condition: state
      entity_id: calendar.kallen_school_days
      state: 'on'
    - condition: time
      before: input_datetime.school_day_end
      after: input_datetime.school_day_start
    then:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id:
        - input_boolean.school_today
        - input_boolean.school_today_extended
        - input_boolean.kallen_school
    else:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id:
        - input_boolean.school_today
        - input_boolean.school_today_extended
        - input_boolean.kallen_school
  - if:
    - condition: time
      before: input_datetime.audible_notification_on
      after: input_datetime.audible_notification_off
    then:
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.audible_notifications
    else:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.audible_notifications
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.adaptive_lighting_basement_studio
      - switch.adaptive_lighting_dining_room
      - switch.adaptive_lighting_downstairs_bathroom
      - switch.adaptive_lighting_front_porch
      - switch.adaptive_lighting_kallen_bedroom
      - switch.adaptive_lighting_living_room
      - switch.adaptive_lighting_master_bedroom
      - switch.adaptive_lighting_mud_room
      - switch.adaptive_lighting_tina_lamp
      - switch.adaptive_lighting_emma_bedroom
      - switch.adaptive_lighting_upstairs_bathroom
      - switch.adaptive_lighting_upstairs_hallway
  - service: input_text.set_value
    data:
      value: Adaptive
    target:
      entity_id:
      - input_text.basement_studio_selected_scene
      - input_text.downstairs_bathroom_selected_scene
      - input_text.front_porch_selected_scene
      - input_text.kallen_bedroom_selected_scene
      - input_text.living_room_selected_scene
      - input_text.master_bedroom_selected_scene
      - input_text.mud_room_selected_scene
      - input_text.emma_bedroom_selected_scene
      - input_text.tina_lamp_selected_scene
      - input_text.upstairs_bathroom_selected_scene
      - input_text.upstairs_hallway_selected_scene
  - service: input_text.set_value
    data:
      value: Full
    target:
      entity_id: input_text.dining_room_lamp_selected_scene
  - service: media_player.volume_set
    data:
      volume_level: 0.6
    target:
      entity_id:
      - media_player.basement_echo_dot
      - media_player.living_room_echo_dot
  - service: media_player.volume_set
    data:
      volume_level: 0.5
    target:
      entity_id: media_player.master_bedroom_echo_dot
  - service: button.press
    data: {}
    target:
      entity_id: button.cleanup
  mode: single
  icon: mdi:truck-snowflake
kallen_two_hour_delay:
  alias: Kallen Two Hour Delay
  sequence:
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.kallen_two_hour_delay
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.kallen_band_practice
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: script.kallen_scheduling_morning
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: script.house_scheduling_morning
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: script.master_bedroom_scheduling_morning
    data: {}
  mode: single
  icon: mdi:bus-clock
kallen_school_cancelled:
  alias: Kallen School Cancelled
  sequence:
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.kallen_school_cancelled
  - service: input_boolean.turn_off
    data: {}
    target:
      entity_id:
      - input_boolean.kallen_two_hour_delay
      - input_boolean.school_today
      - input_boolean.school_early_release
      - input_boolean.school_today_extended
      - input_boolean.kallen_school
      - input_boolean.kallen_band_practice
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: script.kallen_scheduling_morning
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: script.house_scheduling_morning
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - service: script.master_bedroom_scheduling_morning
    data: {}
  mode: single
  icon: mdi:calendar-remove
