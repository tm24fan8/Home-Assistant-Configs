[
    {
        "id": "4a8821853d4dd1ad",
        "type": "tab",
        "label": "Reading Timer",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e44b1e7a8ef7ae1d",
        "type": "tab",
        "label": "Time-based automations",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3abb5ae57afb4761",
        "type": "tab",
        "label": "Presence",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "eff21041cc941fef",
        "type": "tab",
        "label": "Lighting - First Floor",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5e238cbbe6d612c9",
        "type": "tab",
        "label": "Lighting - Second Floor",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "47f17992fab9b4f5",
        "type": "tab",
        "label": "Lighting - Basement",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b0286fae9f2ce547",
        "type": "tab",
        "label": "Media Scenes - Living Room",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "72f99805df043603",
        "type": "tab",
        "label": "Climate",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5c4ac37140a54ac9",
        "type": "tab",
        "label": "Alexa",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "75e98103856848a6",
        "type": "tab",
        "label": "Google Home",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "bb961e59e2ef86c9",
        "type": "tab",
        "label": "Apple",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ee67610b4a0578d2",
        "type": "tab",
        "label": "General Audio",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ebd5561c4f077718",
        "type": "tab",
        "label": "Weather",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "789ba711dc04fad2",
        "type": "tab",
        "label": "Twitch",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ffa6a885ac41a5ed",
        "type": "tab",
        "label": "Server Stuff",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d35726cd69e1aeff",
        "type": "tab",
        "label": "Misc Services",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3e4ba157b540d183",
        "type": "tab",
        "label": "Global Variable Settings",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d3dcbe534743b01d",
        "type": "tab",
        "label": "Discord",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d49b385d8b582b20",
        "type": "tab",
        "label": "Test",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "a42343e035e3313c",
        "type": "subflow",
        "name": "Alexa Location",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "1102574d15bdad4c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 620,
                "y": 80,
                "wires": [
                    {
                        "id": "afead614fabc01bb",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "node-red-contrib-alexa-remote2-applestrudel/alexa-remote-icon.png"
    },
    {
        "id": "4107976aa434eb03",
        "type": "subflow",
        "name": "Weather Conversions",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "388878f6056fa3e4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 500,
                "y": 80,
                "wires": [
                    {
                        "id": "80ce4b42b82e3c78",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "font-awesome/fa-cloud"
    },
    {
        "id": "6a62fbf7b4e86589",
        "type": "subflow",
        "name": "Text Notifications - All iOS",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 120,
                "y": 140,
                "wires": [
                    {
                        "id": "c2fbd42b35152df7"
                    },
                    {
                        "id": "5cdbb1186b8c5137"
                    },
                    {
                        "id": "5670c96aacfc9475"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "font-awesome/fa-mobile-phone"
    },
    {
        "id": "041613a2b6a0f41f",
        "type": "subflow",
        "name": "TV Notifications",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 140,
                "wires": [
                    {
                        "id": "ac2a90cbc3a881cc"
                    },
                    {
                        "id": "fa19b82b8077159f"
                    },
                    {
                        "id": "d46d599e70e07c4d"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "font-awesome/fa-tv"
    },
    {
        "id": "6429099c4571dd6b",
        "type": "subflow",
        "name": "Speech Engine",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 160,
                "wires": [
                    {
                        "id": "7fa8765ef1373ee0"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1220,
                "y": 220,
                "wires": [
                    {
                        "id": "98bf66889d4287db",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "font-awesome/fa-comment"
    },
    {
        "id": "a062d9e6d44506dc",
        "type": "subflow",
        "name": "Hue Dynamic Scene Handler",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "cee2f20718ddb03a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 720,
                "y": 40,
                "wires": [
                    {
                        "id": "011c7df420cc7f1a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "node-red-contrib-huemagic/hue-group.svg"
    },
    {
        "id": "582b8363c9f33bf8",
        "type": "subflow",
        "name": "Scene Dropdown Cleanup",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "f1c11209a9226be9"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "node-red/mouse.png"
    },
    {
        "id": "7cc13ada.b6712c",
        "type": "subflow",
        "name": "timerange",
        "info": "Lets through or blocks a payload\nbased on a time range. This can\neither be configured through the\nenviroment variables in the node ui\nor as described below with a message\nthat has an override topic.\nIf in range the msg will be passed\nto the first output and otherwise\nto the second.\nThe start and stop time needs\nto be defined in an hh:mm format.\nThere is also a week array. The week\nstarts on monday so 4 for example is\nThursday. Payload will only be passed\non days that are in the array.\nOut of time range payloads will\nbe redirected to the second output.\nThe schedule can be overriden by injecting\na message with the topic of \"override\"\nthat contains a ```msg.payload``` object with the\nkeys of \"start\",\"stop\",\"days\" like\nthis:\n```\n{\n    \"start\": \"10:00\",\n    \"stop\": \"14:00\",\n    \"days\": [\n        1,\n        2,\n        3,\n        4,\n        5,\n        6,\n        7\n    ]\n}\n```\nStart and stop need to be strings in the hh:mm\nformat and days an array of numbers as\ndescribed above.\nThe override can be deleted by injecting a\nmsg.payload string \"reset\".",
        "category": "",
        "in": [
            {
                "x": 100,
                "y": 100,
                "wires": [
                    {
                        "id": "da7f7d3f.da5af"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 620,
                "y": 60,
                "wires": [
                    {
                        "id": "694ce0e1.4bee58",
                        "port": 0
                    }
                ]
            },
            {
                "x": 630,
                "y": 140,
                "wires": [
                    {
                        "id": "694ce0e1.4bee58",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "start",
                "type": "str",
                "value": "00:00",
                "ui": {
                    "icon": "font-awesome/fa-arrow-right",
                    "label": {
                        "en-US": "from hh:mm"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            },
            {
                "name": "stop",
                "type": "str",
                "value": "00:00",
                "ui": {
                    "icon": "font-awesome/fa-circle",
                    "label": {
                        "en-US": "until hh:mm"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "str"
                        ]
                    }
                }
            },
            {
                "name": "days",
                "type": "json",
                "value": "[1,2,3,4,5,6,7]",
                "ui": {
                    "icon": "font-awesome/fa-calendar",
                    "label": {
                        "en-US": "days"
                    },
                    "type": "input",
                    "opts": {
                        "types": [
                            "json"
                        ]
                    }
                }
            }
        ],
        "color": "#C7E9C0",
        "inputLabels": [
            "payload input"
        ],
        "outputLabels": [
            "in time range",
            "out of time range"
        ],
        "icon": "node-red/switch.svg",
        "status": {
            "x": 480,
            "y": 200,
            "wires": [
                {
                    "id": "1bc56c04.ca0a3c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "a4ee891237e460a2",
        "type": "subflow",
        "name": "Main Scenes Handler",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 360,
                "wires": [
                    {
                        "id": "6362db9ef6632b4f"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "node-red-contrib-huemagic/hue-scene.svg",
        "status": {
            "x": 1560,
            "y": 500,
            "wires": [
                {
                    "id": "6ae79d1701e78840",
                    "port": 0
                },
                {
                    "id": "defe84d113029e8e",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "74d3a55b70dc2d6c",
        "type": "subflow",
        "name": "Basement Scenes Handler",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 300,
                "wires": [
                    {
                        "id": "622b8178adf9d4a8"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "node-red-contrib-huemagic/hue-scene.svg",
        "status": {
            "x": 1340,
            "y": 440,
            "wires": [
                {
                    "id": "5c8b0b6fa5c68af6",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "6528a66fc0f094dd",
        "type": "subflow",
        "name": "Text Notifications - Parents iOS",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 120,
                "wires": [
                    {
                        "id": "f36962af7291fc31"
                    },
                    {
                        "id": "9dca09d493da935e"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "font-awesome/fa-mobile-phone"
    },
    {
        "id": "05a2d9f89e72481f",
        "type": "subflow",
        "name": "Alexa Location New",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "6088f5b9f13e0e36"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 640,
                "y": 80,
                "wires": [
                    {
                        "id": "8e803251d3e3c3ae",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "icon": "node-red-contrib-alexa-remote2-applestrudel/alexa-remote-icon.png"
    },
    {
        "id": "89414cdf0a36bdfa",
        "type": "subflow",
        "name": "Positive Presence",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 140,
                "y": 80,
                "wires": [
                    {
                        "id": "abc735032941287e"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 640,
                "y": 80,
                "wires": [
                    {
                        "id": "e6e4103fc8bbd697",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#87A980",
        "icon": "font-awesome/fa-location-arrow"
    },
    {
        "id": "d6e06448d9bd1c2e",
        "type": "subflow",
        "name": "Subflow 1",
        "info": "",
        "in": [],
        "out": []
    },
    {
        "id": "3aa2aec226246753",
        "type": "subflow",
        "name": "Lifx Testing",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 100,
                "wires": [
                    {
                        "id": "8b4af77e07c66df9"
                    },
                    {
                        "id": "54f4bebfc9414dbd"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "eccca853a916b662",
        "type": "group",
        "z": "5e238cbbe6d612c9",
        "name": "Upstairs Bathroom Motion Lights",
        "style": {
            "label": true
        },
        "nodes": [
            "a1ee07ab20229b45",
            "7e89e4d34a758087",
            "be2ef3afc92034ec",
            "23c3c8fe409e3f94",
            "74c0ced4ac160364",
            "47fcb13395bcf3f0",
            "ea8536fc853a8af4",
            "edc283ca40d3c7ef",
            "d2df58b074b9ba08",
            "e19f97e448023ade",
            "38d9a4979f22e19f",
            "d0cf87bd9c3ba0b1",
            "83686fab02a3d825",
            "853abef16fadc824",
            "bfcb013bbf11611c",
            "785049971f40b7b2",
            "2ad7be43ccdbdeaf",
            "2e299ac73c696afc",
            "5d18c5d00181b011",
            "ea02f8930aa2c7aa",
            "8859759915625e2f",
            "3941b4a5b3493461",
            "0b122b02cfb10c25",
            "d1ae15dff680b3b1",
            "39b90ceaed170ac8",
            "31b8c8291d19ffc6",
            "572168639448c73d",
            "e70840b82c2bd54b",
            "2dc5f9d3e00f4ddc",
            "e90e0b2a6d30d855",
            "34e2055344eea8fe",
            "55e84ccb73ae9b74",
            "3a25dfcae623ee00",
            "fc4bcd1c117fa849",
            "3fa2a7a15d94c156",
            "017de174925e8c75"
        ],
        "x": 94,
        "y": 319,
        "w": 1992,
        "h": 602
    },
    {
        "id": "39a7ac02f2727f1d",
        "type": "group",
        "z": "72f99805df043603",
        "name": "Kallen Bedroom",
        "style": {
            "label": true
        },
        "nodes": [
            "d5784e5baa80a105",
            "9e1418c3e9595312",
            "3166f71fdf62748a",
            "4792e2d88f7d533f",
            "92c0fceb3205cad9",
            "6e10b32a122e8a2c",
            "99e74844b8fd9d1a",
            "da1a1f23bf9429c5",
            "6418c17768ed363d",
            "2f3666d288d77ad1",
            "ed138e629ed0809f",
            "73b51e79d20c7982",
            "265b54394cc42f53",
            "d132875202e85038",
            "a6f4af0aaabcc2c1",
            "eb0e4c095dbe898e",
            "fce2383754c91a31",
            "cc1af8532e3dc820",
            "39d187b7e17d80ab",
            "49eadd57e9728914",
            "1ad455bccec8ab46"
        ],
        "x": 14,
        "y": 699
    },
    {
        "id": "e065b1ed4938b477",
        "type": "group",
        "z": "72f99805df043603",
        "name": "Master Bedroom",
        "style": {
            "label": true
        },
        "nodes": [
            "8e399b2a287a0905",
            "314752dbc6fd170d",
            "d7261338e6b907f1",
            "49ad25e2bcd710b0",
            "fa2b43f4eec9f89a",
            "6fb7131d5534350c",
            "0deeaa74dd6c25c5",
            "fd0a309681a536de",
            "40dc1e930b887eb7",
            "bf1b0d6542ef6b38",
            "512b9dd5177ebeec",
            "f36181bb272eabe8",
            "7d9666e1ce61f8df",
            "24c3166123d5dad0",
            "40f52ef656550cf6",
            "b14bcbf98b7e9f91",
            "e473da127624f191",
            "ed6649edf0128951",
            "20f407c978d14863",
            "36c671c1520680e7",
            "efe1917ebdcef673",
            "c0408b03c3cf8f23",
            "444acaf315688ac9",
            "9949527a728eaf42",
            "0652e441425c3875",
            "a11946e3ceb59514",
            "2915ba19778e3fee",
            "dc440dfc78c41b8a",
            "99f6abc4d215980a",
            "1aa901d26ce8ac46",
            "7659d7b193fc7fb5",
            "21001f5409130f44",
            "bc592ba259667f9d",
            "63c1bc35f7c35360",
            "1f7ac875e593d434",
            "7674985a03ff3355",
            "9179e99207e9f8f3",
            "404c42d6fea46839",
            "929b5cd6a4d7dc30",
            "bd5119ed04776902",
            "a1ca104dbc102bfc",
            "ab9ff37610258694",
            "7a7f626dce181b23",
            "cefb338fa0c6931e",
            "f541ad53e32f703b",
            "66e85878d60c7d65",
            "bcba065aa5ecb2be",
            "f797103d28ab6d1c",
            "10d9b30654ef759c",
            "0a783dc1cb68b4bf",
            "9af6e13ddc0391f1",
            "11ed2afea8133e8f",
            "ae35b5c6578777a0",
            "be70ec3d9b852b89",
            "81901cd811f2c733",
            "6c06c2eec1583c66",
            "0c680585239e7f60",
            "e2581a5f3f4888df",
            "c6537f1924370c8c",
            "c324cf8a87c3b388",
            "6e89b3464496e0e8",
            "a1315d3be8da5c2f",
            "f6e9317205ba7c78",
            "90afa6409f3fcac3",
            "fa78faf38adfa49d",
            "1dfb0bcc98f1457b",
            "096369136e9e607f",
            "783cfb381b70afc5"
        ],
        "x": 14,
        "y": 59
    },
    {
        "id": "5c50443a84910fb7",
        "type": "group",
        "z": "3e4ba157b540d183",
        "name": "Tina Schedule Management",
        "style": {
            "label": true
        },
        "nodes": [
            "4d724735025b0ed8",
            "6ec62f6cf4fcf994",
            "ca8ea9d126cc13ae",
            "71bee01e93d372c4",
            "2d16941f87588a72",
            "31ce8ad28dd41226",
            "20271b0662a4d5df",
            "69886cf636bf4f70",
            "16bf625c802d7910",
            "39f78e9aa56bc51e",
            "a32c37ccf0102258",
            "d5c6b45df763e57e",
            "6f011420f6bb15a7"
        ],
        "x": 34,
        "y": 159
    },
    {
        "id": "19b0e082db0643ac",
        "type": "junction",
        "z": "eff21041cc941fef",
        "x": 300,
        "y": 40,
        "wires": [
            [
                "d790134891fedfcc"
            ]
        ]
    },
    {
        "id": "fba69dfc80829db7",
        "type": "junction",
        "z": "5e238cbbe6d612c9",
        "x": 320,
        "y": 40,
        "wires": [
            [
                "a17d58585048335d"
            ]
        ]
    },
    {
        "id": "e90e0b2a6d30d855",
        "type": "junction",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "x": 1240,
        "y": 500,
        "wires": [
            [
                "be2ef3afc92034ec",
                "34e2055344eea8fe"
            ]
        ]
    },
    {
        "id": "34e2055344eea8fe",
        "type": "junction",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "x": 1500,
        "y": 500,
        "wires": [
            [
                "2dc5f9d3e00f4ddc"
            ]
        ]
    },
    {
        "id": "f491cbd9eb0a3a22",
        "type": "junction",
        "z": "e44b1e7a8ef7ae1d",
        "x": 840,
        "y": 120,
        "wires": [
            [
                "663856ad61059510"
            ]
        ]
    },
    {
        "id": "0968727f2138ac62",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 500,
        "y": 1100,
        "wires": [
            [
                "cc8f6ab710549be2"
            ]
        ]
    },
    {
        "id": "31cb558d6ee383c4",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 440,
        "y": 40,
        "wires": [
            [
                "cac7cc3111526a67"
            ]
        ]
    },
    {
        "id": "0b79d297a8596c37",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 460,
        "y": 100,
        "wires": [
            [
                "ab4c69753bfc36f5"
            ]
        ]
    },
    {
        "id": "13d5c047c41f60ba",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 440,
        "y": 220,
        "wires": [
            [
                "db54e97573a07fc4"
            ]
        ]
    },
    {
        "id": "40817f8c9eeae5fe",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 460,
        "y": 280,
        "wires": [
            [
                "77f2aae15fa1250d"
            ]
        ]
    },
    {
        "id": "b8995a85f5d34268",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 440,
        "y": 400,
        "wires": [
            [
                "be5bdfc3c12b05da"
            ]
        ]
    },
    {
        "id": "85bd556a614f0455",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 460,
        "y": 460,
        "wires": [
            [
                "728ab818393de52d"
            ]
        ]
    },
    {
        "id": "c95d487f9fbe14ce",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 440,
        "y": 580,
        "wires": [
            [
                "0b860dc2f7db3ba0"
            ]
        ]
    },
    {
        "id": "318bee4424125dd5",
        "type": "junction",
        "z": "b0286fae9f2ce547",
        "x": 460,
        "y": 640,
        "wires": [
            [
                "51d86d6064f084d2"
            ]
        ]
    },
    {
        "id": "0dd0e5b7bace6c62",
        "type": "junction",
        "z": "6429099c4571dd6b",
        "x": 1140,
        "y": 140,
        "wires": [
            [
                "98bf66889d4287db"
            ]
        ]
    },
    {
        "id": "9e87348d.9c1c48",
        "type": "server",
        "name": "Home Assistant",
        "version": 4,
        "addon": true,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "",
        "connectionDelay": false,
        "cacheJson": false,
        "heartbeat": false,
        "heartbeatInterval": "",
        "areaSelector": "friendlyName",
        "deviceSelector": "friendlyName",
        "entitySelector": "friendlyName",
        "statusSeparator": "at: ",
        "statusYear": "hidden",
        "statusMonth": "short",
        "statusDay": "numeric",
        "statusHourCycle": "h23",
        "statusTimeFormat": "h:m"
    },
    {
        "id": "fd29421fc00140a8",
        "type": "mqtt-broker",
        "name": "",
        "broker": "192.168.1.26",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "5",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "137fe3f66779bb13",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Start YouTube in Living Room",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Start YouTube in Living Room"
            },
            {
                "property": "icon",
                "value": "mdi:youtube"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "eaeb8fcb37fa8585",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Stop YouTube in Living Room",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Stop YouTube in Living Room"
            },
            {
                "property": "icon",
                "value": "mdi:stop"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "c8312629c112d43a",
        "type": "alexa-home-conf",
        "username": "tm24fan8"
    },
    {
        "id": "be975ce229701797",
        "type": "alexa-remote-account",
        "name": "",
        "authMethod": "proxy",
        "proxyOwnIp": "192.168.1.26",
        "proxyPort": "3456",
        "cookieFile": "/config/node-red/alexa_auth",
        "refreshInterval": "3",
        "alexaServiceHost": "pitangui.amazon.com",
        "amazonPage": "amazon.com",
        "acceptLanguage": "en-US",
        "onKeywordInLanguage": "on",
        "userAgent": "",
        "useWsMqtt": "on",
        "autoInit": "on"
    },
    {
        "id": "266a447bcb22dad6",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Start Twitch in Living Room",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Start Twitch in Living Room"
            },
            {
                "property": "icon",
                "value": "mdi:twitch"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "73718265ac9a1389",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Stop Twitch in Living Room",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Stop Twitch in Living Room"
            },
            {
                "property": "icon",
                "value": "mdi:stop"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "5d20015e8a70767a",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Start Plex in Living Room",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Start Plex in Living Room"
            },
            {
                "property": "icon",
                "value": "mdi:plex"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "c1da63449b303e84",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Stop Plex in Living Room",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Stop Plex in Living Room"
            },
            {
                "property": "icon",
                "value": "mdi:stop"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "eb813ad296813ab2",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Start Netflix in Living Room",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Start Netflix in Living Room"
            },
            {
                "property": "icon",
                "value": "mdi:netflix"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "2a115fc593b081ac",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Stop Netflix in Living Room",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Stop Netflix in Living Room"
            },
            {
                "property": "icon",
                "value": "mdi:stop"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "f14ef3df2209e9a7",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Send Alexa Message",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Send Alexa Message"
            },
            {
                "property": "icon",
                "value": "mdi:bullhorn"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "1c6757ac2fa1a199",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Reset Alexa Message",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Reset Alexa Message"
            },
            {
                "property": "icon",
                "value": "mdi:backspace-reverse"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "ad5b1d9f1ea8fea1",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Good Morning",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Good Morning"
            },
            {
                "property": "icon",
                "value": "mdi:weather-sunset-up"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "a8da4d03a2922c42",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Weather Briefing",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Weather Briefing"
            },
            {
                "property": "icon",
                "value": "mdi:weather-cloudy"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "30f1658baee9378e",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Goodnight",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Goodnight"
            },
            {
                "property": "icon",
                "value": "mdi:weather-night"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "04976a7418728aa3",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Restart AppDaemon",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Restart AppDaemon"
            },
            {
                "property": "icon",
                "value": "mdi:restart"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "457914a2c9dc72c1",
        "type": "google-home-conf",
        "username": "tm24fan8"
    },
    {
        "id": "fd929ec3bfbeef1a",
        "type": "discord-token",
        "name": "Nerd Overlord"
    },
    {
        "id": "8860321096392e94",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Weather Briefing Google",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Weather Briefing Google"
            },
            {
                "property": "icon",
                "value": "mdi:weather-cloudy"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "359a4a5e8f156ab5",
        "type": "hue-bridge",
        "name": "House",
        "bridge": "192.168.1.20",
        "key": "JKYIb8bI-owElOdf1eaZYfG022BC8JktFiijKy1G",
        "worker": "10",
        "autoupdates": true,
        "disableupdates": false
    },
    {
        "id": "998d8d67ec377dd3",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Daily Briefing",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Daily Briefing"
            },
            {
                "property": "icon",
                "value": "mdi:weather-sunset-up"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "9c84afc610ced7b6",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Daily Briefing Google",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Daily Briefing Google"
            },
            {
                "property": "icon",
                "value": "mdi:weather-sunset-up"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "738e7f8f2ac71049",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Sunset Lights Trigger",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Sunset Lights Trigger"
            },
            {
                "property": "icon",
                "value": "mdi:lightbulb-alert"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "be9ed28696adcdb0",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Master Bedroom Night Mode",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Master Bedroom Night Mode"
            },
            {
                "property": "icon",
                "value": "mdi:lightbulb-night"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "59cb8692ed7accd1",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Master Bedroom Day Mode",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Master Bedroom Day Mode"
            },
            {
                "property": "icon",
                "value": "mdi:sun"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "9c63750f16f845ea",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Master Bedroom Bedtime Mode",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Master Bedroom Bedtime Mode"
            },
            {
                "property": "icon",
                "value": "mdi:bed"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "f19eac517a138c66",
        "type": "add-todoist-api-token",
        "name": "Main"
    },
    {
        "id": "675dd216a61c575b",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Send Report",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Send Report"
            },
            {
                "property": "icon",
                "value": "mdi:bug"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "7df85e301aad3a3d",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Reset Report",
        "version": 2,
        "haConfig": [
            {
                "property": "name",
                "value": "Reset Report"
            },
            {
                "property": "icon",
                "value": "mdi:bug"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "fbc65f8185932b5f",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Kallen Timer Start",
        "version": 4,
        "haConfig": [
            {
                "property": "name",
                "value": "Kallen Timer Start"
            },
            {
                "property": "icon",
                "value": "mdi:play"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "a11aaf0288452997",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Cleanup",
        "version": 4,
        "haConfig": [
            {
                "property": "name",
                "value": "Cleanup"
            },
            {
                "property": "icon",
                "value": "mdi:broom"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "d3f8c4466cc1deeb",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Master Bedroom Fan Only",
        "version": 4,
        "haConfig": [
            {
                "property": "name",
                "value": "Master Bedroom Fan Only"
            },
            {
                "property": "icon",
                "value": "mdi:fan"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "d9da4bd707013bc5",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Kallen School Status",
        "version": 4,
        "haConfig": [
            {
                "property": "name",
                "value": "Kallen School Status"
            },
            {
                "property": "icon",
                "value": "mdi:bus"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "2c222901ee192ba1",
        "type": "ha-entity-config",
        "server": "9e87348d.9c1c48",
        "name": "Kallen School Status Google",
        "version": 4,
        "haConfig": [
            {
                "property": "name",
                "value": "Kallen School Status Google"
            },
            {
                "property": "icon",
                "value": "mdi:bus"
            },
            {
                "property": "device_class",
                "value": ""
            }
        ],
        "entityType": "button"
    },
    {
        "id": "60eb53fb94cd64e4",
        "type": "lifx-config",
        "token": "c120128708971c253cfdb4c0fcaeac0b392b068b4f02764f1161765591dc3eb0"
    },
    {
        "id": "05e66e9e1092e6ea",
        "type": "api-current-state",
        "z": "a42343e035e3313c",
        "name": "Where?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.alexa_audio",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "where",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 340,
        "y": 80,
        "wires": [
            [
                "afead614fabc01bb"
            ]
        ]
    },
    {
        "id": "afead614fabc01bb",
        "type": "function",
        "z": "a42343e035e3313c",
        "name": "",
        "func": "if (msg.where === \"Basement Echo Dot\") {\n    msg.where = \"G090XG0894470SK6\"\n} else if (msg.where === \"Living Room Echo Dot\") {\n    msg.where = \"G6G1EV08101206J4\"\n} else if (msg.where === \"Master Bedroom Echo Dot\") {\n    msg.where = \"G6G0XG1212820GD9\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "1102574d15bdad4c",
        "type": "delay",
        "z": "a42343e035e3313c",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 180,
        "y": 80,
        "wires": [
            [
                "05e66e9e1092e6ea"
            ]
        ]
    },
    {
        "id": "388878f6056fa3e4",
        "type": "function",
        "z": "4107976aa434eb03",
        "name": "Conversions",
        "func": "msg.data.main.temp = ((msg.data.main.temp - 273.15) * 1.8) + 32\nmsg.data.main.feels_like = ((msg.data.main.feels_like - 273.15) * 1.8) + 32\nmsg.data.main.temp_min = ((msg.data.main.temp_min - 273.15) * 1.8) + 32\nmsg.data.main.temp_max = ((msg.data.main.temp_max - 273.15) * 1.8) + 32\nmsg.data.main.pressure = msg.data.main.pressure * 0.029529983071445\nmsg.data.wind.speed = msg.data.wind.speed * 2.237\nmsg.data.wind.gust = msg.data.wind.gust * 2.237\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 80,
        "wires": [
            [
                "80ce4b42b82e3c78"
            ]
        ]
    },
    {
        "id": "80ce4b42b82e3c78",
        "type": "function",
        "z": "4107976aa434eb03",
        "name": "Rounding",
        "func": "var temp = msg.data.main.temp\nvar feels_like = msg.data.main.feels_like\nvar temp_min = msg.data.main.temp_min\nvar temp_max = msg.data.main.temp_max\nvar pressure = msg.data.main.pressure\nvar windspeed = msg.data.wind.speed\nvar windgust = msg.data.wind.gust\n\nmsg.data.main.temp = +temp.toFixed(1)\nmsg.data.main.feels_like = +feels_like.toFixed(1)\nmsg.data.main.temp_min = +temp_min.toFixed(1)\nmsg.data.main.temp_max = +temp_max.toFixed(1)\nmsg.data.main.pressure = +pressure.toFixed(2)\nmsg.data.wind.speed = +windspeed.toFixed(2)\nmsg.data.wind.gust = +windgust.toFixed(2)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "5cdbb1186b8c5137",
        "type": "api-call-service",
        "z": "6a62fbf7b4e86589",
        "name": "Notify Tony",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_tony",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 270,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "c2fbd42b35152df7",
        "type": "api-call-service",
        "z": "6a62fbf7b4e86589",
        "name": "Notify Tina",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_tina",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 270,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "5670c96aacfc9475",
        "type": "api-call-service",
        "z": "6a62fbf7b4e86589",
        "name": "Notify Kallen",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_kallen",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 270,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "ac2a90cbc3a881cc",
        "type": "api-call-service",
        "z": "041613a2b6a0f41f",
        "name": "Notify Basement TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "basement_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload,\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"indigo\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 220,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "fa19b82b8077159f",
        "type": "api-call-service",
        "z": "041613a2b6a0f41f",
        "name": "Notify Living Room TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "living_room_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload,\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"indigo\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 220,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "d46d599e70e07c4d",
        "type": "api-call-service",
        "z": "041613a2b6a0f41f",
        "name": "Notify Master Bedroom TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "master_bedroom_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload,\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"indigo\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 240,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "7fa8765ef1373ee0",
        "type": "function",
        "z": "6429099c4571dd6b",
        "name": "Name Conversion",
        "func": "if (msg.topic === \"Living Room\") {\n    msg.topic = \"living_room\"\n} else if (msg.topic === \"Living Room Echo Dot\") {\n    msg.topic = \"living_room\"\n} else if (msg.topic === \"Basement\") {\n    msg.topic = \"basement\"\n} else if (msg.topic === \"Basement Echo Dot\") {\n    msg.topic = \"basement\"\n} else if (msg.topic === \"Kallen Bedroom\") {\n    msg.topic = \"kallen_bedroom\"\n} else if (msg.topic === \"Kallen Bedroom Speaker\") {\n    msg.topic = \"kallen_bedroom\"\n} else if (msg.topic === \"Master Bedroom\") {\n    msg.topic = \"master_bedroom\"\n} else if (msg.topic === \"Master Bedroom Echo Dot\") {\n    msg.topic = \"master_bedroom\"\n} else if (msg.topic === \"Common Areas\") {\n    msg.topic = \"common\"\n} else if (msg.topic === \"Everywhere\") {\n    msg.topic = \"everywhere\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 160,
        "wires": [
            [
                "0dd8c543fc452334"
            ]
        ]
    },
    {
        "id": "98bf66889d4287db",
        "type": "api-call-service",
        "z": "6429099c4571dd6b",
        "name": "Speech Engine",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "speech_engine",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"who\": msg.topic,\t    \"message\": msg.payload,\t    \"voice\": msg.voice\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1080,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "0dd8c543fc452334",
        "type": "function",
        "z": "6429099c4571dd6b",
        "name": "Voice",
        "func": "if (msg.voice) {\n    msg.voice = msg.voice\n} else {\n    msg.voice = global.get('jarvis_voice')\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 160,
        "wires": [
            [
                "c8bf676e64a58c64"
            ]
        ]
    },
    {
        "id": "c8bf676e64a58c64",
        "type": "api-current-state",
        "z": "6429099c4571dd6b",
        "name": "Is stream live?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.stream_online",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "streamlive",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 540,
        "y": 160,
        "wires": [
            [
                "42a0978dfdc73f5d"
            ],
            [
                "98bf66889d4287db"
            ]
        ]
    },
    {
        "id": "82403ec40dbe9330",
        "type": "change",
        "z": "6429099c4571dd6b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "living_room",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 990,
        "y": 20,
        "wires": [
            [
                "0dd0e5b7bace6c62"
            ]
        ]
    },
    {
        "id": "42a0978dfdc73f5d",
        "type": "switch",
        "z": "6429099c4571dd6b",
        "name": "Dest Switch",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "common",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "basement",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "everywhere",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 770,
        "y": 140,
        "wires": [
            [
                "82403ec40dbe9330"
            ],
            [
                "a793ddc6663c5b63"
            ],
            [
                "055cd6fbc76af001"
            ],
            [
                "98bf66889d4287db"
            ]
        ]
    },
    {
        "id": "a793ddc6663c5b63",
        "type": "change",
        "z": "6429099c4571dd6b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "living_room",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "I cannot play notifications in the basement while the stream is live",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 80,
        "wires": [
            [
                "0dd0e5b7bace6c62"
            ]
        ]
    },
    {
        "id": "055cd6fbc76af001",
        "type": "change",
        "z": "6429099c4571dd6b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "alexa_no_basement",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 990,
        "y": 140,
        "wires": [
            [
                "0dd0e5b7bace6c62"
            ]
        ]
    },
    {
        "id": "cee2f20718ddb03a",
        "type": "function",
        "z": "a062d9e6d44506dc",
        "name": "Format",
        "func": "const tpc = msg.topic\nconst pld = msg.payload\nvar dest = tpc.replaceAll(\"_\",\" \")\nvar scene = pld.replaceAll(\"_\",\" \")\n\nmsg.topic = dest\nmsg.payload = scene\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 40,
        "wires": [
            [
                "78a60e2da212f6aa"
            ]
        ]
    },
    {
        "id": "78a60e2da212f6aa",
        "type": "api-call-service",
        "z": "a062d9e6d44506dc",
        "name": "Hue Activate Scene",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "hue",
        "service": "hue_activate_scene",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"group_name\": msg.topic,\t    \"scene_name\": msg.payload,\t    \"dynamic\": \"true\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 370,
        "y": 40,
        "wires": [
            [
                "011c7df420cc7f1a"
            ]
        ]
    },
    {
        "id": "011c7df420cc7f1a",
        "type": "function",
        "z": "a062d9e6d44506dc",
        "name": "Notification",
        "func": "const tpc = msg.topic\nvar dest = tpc.replaceAll(\" \",\"_\")\n\nscene = msg.payload\nmsg.dest = dest\n\nmsg.topic = \"Lights Changed\"\nmsg.payload = ('Lights changed to a new scene: ' + scene)\n\nif (msg.payload === 'Lights changed to a new scene: Reset') {\n    return null;\n} else {\n    return msg;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "0515d266dc983793",
        "type": "api-call-service",
        "z": "582b8363c9f33bf8",
        "name": "Record Scene",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_text",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_text.{{topic}}_selected_scene"
        ],
        "data": "{\t    \"value\": msg.payload\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 340,
        "y": 40,
        "wires": [
            [
                "2fc6ea08f8f366b6"
            ]
        ]
    },
    {
        "id": "2fc6ea08f8f366b6",
        "type": "api-call-service",
        "z": "582b8363c9f33bf8",
        "name": "Reset Dropdown",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_first",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.{{topic}}_scenes"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 550,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "f1c11209a9226be9",
        "type": "function",
        "z": "582b8363c9f33bf8",
        "name": "",
        "func": "const pld = msg.payload\nvar scene = pld.replaceAll(\"_\",\" \")\n\nmsg.payload = scene\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 40,
        "wires": [
            [
                "0515d266dc983793"
            ]
        ]
    },
    {
        "id": "694ce0e1.4bee58",
        "type": "function",
        "z": "7cc13ada.b6712c",
        "name": "is in range?",
        "func": "const schedule = flow.get(\"schedule\");\nlet start = env.get(\"start\");\nlet stop = env.get(\"stop\");\nlet days = env.get(\"days\");\nif(schedule !== undefined){\n    start = schedule.start;\n    stop = schedule.stop;\n    days = schedule.days;\n}\nconst time = new Date();\nlet day = time.getDay();\nif(day === 0) day = 7;\nlet hour = String(time.getHours());\nlet minute = String(time.getMinutes());\nif(hour.length == 1) hour = \"0\" + hour;\nif(minute.length == 1) minute = \"0\" + minute;\nconst hmtime = hour + \":\" + minute;\nif(days.includes(day)){\n    if(start == stop){\n        return [msg, null];\n    } else if(start > stop){\n        if(hmtime >= start || hmtime < stop){\n            return [msg, null];\n        } else {\n            return [null, msg];\n        }\n    } else if(hmtime >= start && hmtime < stop){\n        return [msg, null];\n    } else {\n        return [null, msg];\n    }\n} else {\n    return null;\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 100,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "94dc9c00.0f576",
        "type": "inject",
        "z": "7cc13ada.b6712c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 200,
        "wires": [
            [
                "1bc56c04.ca0a3c"
            ]
        ]
    },
    {
        "id": "1bc56c04.ca0a3c",
        "type": "function",
        "z": "7cc13ada.b6712c",
        "name": "display rule",
        "func": "const schedule = flow.get(\"schedule\");\nif(typeof schedule == \"object\"){\n    const start = schedule.start;\n    const stop = schedule.stop;\n    const days = String(schedule.days).replace(/1/g,\"Mo\").replace(/2/g,\"Tu\").replace(/3/g,\"We\").replace(/4/g,\"Th\").replace(/5/g,\"Fr\").replace(/6/g,\"Sa\").replace(/7/g,\"Su\");\n    msg.payload = \"override: \" + start + \"-\" + stop + \"/\" + days;\n} else {\n    const start = env.get(\"start\");\n    const stop = env.get(\"stop\");\n    const days = String(env.get(\"days\")).replace(/1/g,\"Mo\").replace(/2/g,\"Tu\").replace(/3/g,\"We\").replace(/4/g,\"Th\").replace(/5/g,\"Fr\").replace(/6/g,\"Sa\").replace(/7/g,\"Su\");\n    const override = false;\n    msg.payload = start + \"-\" + stop + \"/\" + days;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "da7f7d3f.da5af",
        "type": "function",
        "z": "7cc13ada.b6712c",
        "name": "check for override",
        "func": "if(msg.topic == \"override\"){\n    flow.set(\"schedule\",msg.payload);\n    return [null, msg];\n} else if (msg.payload == \"reset\"){\n    let reset;\n    flow.set(\"schedule\",reset);\n    return [null, msg];\n} else {\n    return [msg, null];\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 100,
        "wires": [
            [
                "694ce0e1.4bee58"
            ],
            [
                "1bc56c04.ca0a3c"
            ]
        ]
    },
    {
        "id": "942a915b6599fb27",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Set Scene",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "scene",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "scene.{{topic}}_{{payload}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1230,
        "y": 440,
        "wires": [
            [
                "6ae79d1701e78840"
            ]
        ]
    },
    {
        "id": "a89c7e8905a07998",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Reset",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.{{topic}}_scenes"
        ],
        "data": "{\t    \"option\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 550,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "8c4d4fe614a52d4f",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Apply Adaptive Lighting",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "adaptive_lighting",
        "service": "apply",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1530,
        "y": 280,
        "wires": [
            [
                "22250920efccf4d1"
            ]
        ]
    },
    {
        "id": "a4926fb1dba17563",
        "type": "switch",
        "z": "a4ee891237e460a2",
        "name": "Nightlight?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Nightlight",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 440,
        "wires": [
            [
                "c19b4dccc5d6a9af"
            ],
            [
                "f07ca0de800cbc8f"
            ]
        ]
    },
    {
        "id": "c19b4dccc5d6a9af",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Nightlight On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_sleep_mode_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 990,
        "y": 420,
        "wires": [
            [
                "942a915b6599fb27"
            ]
        ]
    },
    {
        "id": "f07ca0de800cbc8f",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Nightlight Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_sleep_mode_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 990,
        "y": 480,
        "wires": [
            [
                "942a915b6599fb27"
            ]
        ]
    },
    {
        "id": "3a4f567b17b2214e",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Nightlight Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_sleep_mode_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 930,
        "y": 280,
        "wires": [
            [
                "f41c0229b9fdcea4"
            ]
        ]
    },
    {
        "id": "f41c0229b9fdcea4",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Turn Lights On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.{{topic}}_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1120,
        "y": 280,
        "wires": [
            [
                "970f719de254a1e7"
            ]
        ]
    },
    {
        "id": "970f719de254a1e7",
        "type": "delay",
        "z": "a4ee891237e460a2",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1310,
        "y": 280,
        "wires": [
            [
                "8c4d4fe614a52d4f"
            ]
        ]
    },
    {
        "id": "97400c5ff0842570",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Adaptive Lighting On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 600,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "1c03c55909a9b552",
        "type": "switch",
        "z": "a4ee891237e460a2",
        "name": "",
        "property": "dest",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "living_room",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "master_bedroom",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1550,
        "y": 440,
        "wires": [
            [
                "60924f02885cc3c8"
            ],
            [
                "ccb129e61b136746"
            ]
        ]
    },
    {
        "id": "6ae79d1701e78840",
        "type": "function",
        "z": "a4ee891237e460a2",
        "name": "Format",
        "func": "const str = msg.payload\nvar scene = str.replaceAll(\"_\",\" \")\n\nmsg.dest = msg.topic\n\nmsg.topic = \"Lights Changed\"\nmsg.payload = ('Lights changed to a new scene: ' + scene)\n\nif (msg.payload === 'Lights changed to a new scene: Reset') {\n    return null;\n} else {\n    return msg;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 440,
        "wires": [
            [
                "1c03c55909a9b552"
            ]
        ]
    },
    {
        "id": "dc0972a3964e6513",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Adaptive Lighting Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 600,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "22250920efccf4d1",
        "type": "link out",
        "z": "a4ee891237e460a2",
        "name": "Adaptive Lighting Flow",
        "mode": "link",
        "links": [
            "a092a70d91589196"
        ],
        "x": 1695,
        "y": 280,
        "wires": []
    },
    {
        "id": "a092a70d91589196",
        "type": "link in",
        "z": "a4ee891237e460a2",
        "name": "Scene Formatting",
        "links": [
            "22250920efccf4d1"
        ],
        "x": 1265,
        "y": 380,
        "wires": [
            [
                "6ae79d1701e78840"
            ]
        ]
    },
    {
        "id": "defe84d113029e8e",
        "type": "subflow:a062d9e6d44506dc",
        "z": "a4ee891237e460a2",
        "name": "",
        "x": 1280,
        "y": 340,
        "wires": [
            [
                "1c03c55909a9b552"
            ]
        ]
    },
    {
        "id": "04f7db2902e58e41",
        "type": "api-current-state",
        "z": "a4ee891237e460a2",
        "name": "Dynamic Scenes",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.{{topic}}_dynamic_scenes",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1010,
        "y": 340,
        "wires": [
            [
                "defe84d113029e8e"
            ],
            [
                "942a915b6599fb27"
            ]
        ]
    },
    {
        "id": "b14287e013bba748",
        "type": "switch",
        "z": "a4ee891237e460a2",
        "name": "Dynamic Rooms",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "living_room",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 580,
        "y": 440,
        "wires": [
            [
                "04f7db2902e58e41"
            ],
            [
                "a4926fb1dba17563"
            ]
        ]
    },
    {
        "id": "bd8c5a7b9e7b24b2",
        "type": "switch",
        "z": "a4ee891237e460a2",
        "name": "Dynamic Rooms",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "living_room",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 580,
        "y": 280,
        "wires": [
            [
                "72c0b7fda242bb67"
            ],
            [
                "3a4f567b17b2214e"
            ]
        ]
    },
    {
        "id": "72c0b7fda242bb67",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Dynamic Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.{{topic}}_dynamic_scenes"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 750,
        "y": 220,
        "wires": [
            [
                "3a4f567b17b2214e"
            ]
        ]
    },
    {
        "id": "a81fd188d89faa25",
        "type": "subflow:582b8363c9f33bf8",
        "z": "a4ee891237e460a2",
        "name": "",
        "x": 570,
        "y": 620,
        "wires": []
    },
    {
        "id": "de5a484b79c5d0e4",
        "type": "subflow:582b8363c9f33bf8",
        "z": "a4ee891237e460a2",
        "name": "",
        "x": 570,
        "y": 80,
        "wires": []
    },
    {
        "id": "23dafb85ab2671c9",
        "type": "switch",
        "z": "a4ee891237e460a2",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Adaptive",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Reset",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Select",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 370,
        "y": 360,
        "wires": [
            [
                "bd8c5a7b9e7b24b2",
                "de5a484b79c5d0e4",
                "97400c5ff0842570"
            ],
            [
                "a89c7e8905a07998"
            ],
            [],
            [
                "b14287e013bba748",
                "a81fd188d89faa25",
                "dc0972a3964e6513"
            ]
        ]
    },
    {
        "id": "60924f02885cc3c8",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Notify Living Room TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "living_room_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload,\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"red\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1760,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "ccb129e61b136746",
        "type": "api-call-service",
        "z": "a4ee891237e460a2",
        "name": "Notify Master Bedroom TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "master_bedroom_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload,\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"red\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1780,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "6362db9ef6632b4f",
        "type": "function",
        "z": "a4ee891237e460a2",
        "name": "Remove Spaces",
        "func": "var str = msg.payload\nmsg.payload = str.replaceAll(\" \",\"_\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 360,
        "wires": [
            [
                "23dafb85ab2671c9"
            ]
        ]
    },
    {
        "id": "1bb8f2070d805c99",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Set Scene",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "scene",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "scene.{{topic}}_{{payload}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1010,
        "y": 380,
        "wires": [
            [
                "5c8b0b6fa5c68af6"
            ]
        ]
    },
    {
        "id": "edcb381597f48298",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Apply Adaptive Lighting",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "adaptive_lighting",
        "service": "apply",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1190,
        "y": 200,
        "wires": [
            [
                "cdfe1cc1b7a2e80e"
            ]
        ]
    },
    {
        "id": "e6a15d04a48511a7",
        "type": "switch",
        "z": "74d3a55b70dc2d6c",
        "name": "Nightlight?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Nightlight",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 380,
        "wires": [
            [
                "2181bd265057807f"
            ],
            [
                "43dc3207a4e8d477"
            ]
        ]
    },
    {
        "id": "2181bd265057807f",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Nightlight On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_sleep_mode_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 360,
        "wires": [
            [
                "1bb8f2070d805c99"
            ]
        ]
    },
    {
        "id": "43dc3207a4e8d477",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Nightlight Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_sleep_mode_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 420,
        "wires": [
            [
                "1bb8f2070d805c99"
            ]
        ]
    },
    {
        "id": "39f295bc8480147a",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Turn Lights On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.{{topic}}_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 780,
        "y": 200,
        "wires": [
            [
                "bd31f35628ebb5d0"
            ]
        ]
    },
    {
        "id": "bd31f35628ebb5d0",
        "type": "delay",
        "z": "74d3a55b70dc2d6c",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 970,
        "y": 200,
        "wires": [
            [
                "edcb381597f48298"
            ]
        ]
    },
    {
        "id": "5c8b0b6fa5c68af6",
        "type": "function",
        "z": "74d3a55b70dc2d6c",
        "name": "Format",
        "func": "const str = msg.payload\nvar scene = str.replaceAll(\"_\",\" \")\n\nmsg.dest = msg.topic\n\nmsg.topic = \"Lights Changed\"\nmsg.payload = ('Lights changed to a new scene: ' + scene)\n\nif (msg.payload === 'Lights changed to a new scene: Reset') {\n    return null;\n} else {\n    return msg;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 380,
        "wires": [
            [
                "15484a2c724cc88d"
            ]
        ]
    },
    {
        "id": "16d9d3387751c4d4",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Adapt Brightness Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_adapt_brightness_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 620,
        "y": 480,
        "wires": [
            [
                "422b394996ac094e"
            ]
        ]
    },
    {
        "id": "49ec3fb036ff367f",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Adapt Brightness On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_adapt_brightness_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 620,
        "y": 100,
        "wires": [
            [
                "811cc7c782907fce"
            ]
        ]
    },
    {
        "id": "422b394996ac094e",
        "type": "switch",
        "z": "74d3a55b70dc2d6c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Purple",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Pink",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 830,
        "y": 480,
        "wires": [
            [
                "7a7ad5e937adcea4"
            ],
            [
                "7a7ad5e937adcea4"
            ]
        ]
    },
    {
        "id": "811cc7c782907fce",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Adaptive Lighting On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 860,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "7a7ad5e937adcea4",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Adaptive Lighting Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1040,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "cdfe1cc1b7a2e80e",
        "type": "link out",
        "z": "74d3a55b70dc2d6c",
        "name": "Adaptive Lighting Flow",
        "mode": "link",
        "links": [],
        "x": 1365,
        "y": 200,
        "wires": []
    },
    {
        "id": "318c3055f2d96a7c",
        "type": "link in",
        "z": "74d3a55b70dc2d6c",
        "name": "Scene Formatting",
        "links": [],
        "x": 1045,
        "y": 320,
        "wires": [
            [
                "5c8b0b6fa5c68af6"
            ]
        ]
    },
    {
        "id": "6a5da3eff6ace96d",
        "type": "subflow:582b8363c9f33bf8",
        "z": "74d3a55b70dc2d6c",
        "name": "",
        "x": 590,
        "y": 560,
        "wires": []
    },
    {
        "id": "464d7284c477d2f3",
        "type": "subflow:582b8363c9f33bf8",
        "z": "74d3a55b70dc2d6c",
        "name": "",
        "x": 590,
        "y": 20,
        "wires": []
    },
    {
        "id": "4fb67560e7a11361",
        "type": "switch",
        "z": "74d3a55b70dc2d6c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Adaptive",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Select",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 390,
        "y": 300,
        "wires": [
            [
                "464d7284c477d2f3",
                "49ec3fb036ff367f",
                "6d40624de5c75c9d"
            ],
            [],
            [
                "6a5da3eff6ace96d",
                "16d9d3387751c4d4",
                "e6a15d04a48511a7"
            ]
        ]
    },
    {
        "id": "15484a2c724cc88d",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Notify Basement TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "basement_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload,\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"red\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1420,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "622b8178adf9d4a8",
        "type": "function",
        "z": "74d3a55b70dc2d6c",
        "name": "Remove Spaces",
        "func": "var str = msg.payload\nmsg.payload = str.replaceAll(\" \",\"_\")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 220,
        "y": 300,
        "wires": [
            [
                "4fb67560e7a11361"
            ]
        ]
    },
    {
        "id": "6d40624de5c75c9d",
        "type": "api-call-service",
        "z": "74d3a55b70dc2d6c",
        "name": "Nightlight Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_sleep_mode_{{topic}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 590,
        "y": 200,
        "wires": [
            [
                "39f295bc8480147a"
            ]
        ]
    },
    {
        "id": "f36962af7291fc31",
        "type": "api-call-service",
        "z": "6528a66fc0f094dd",
        "name": "Notify Tony",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_tony",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 190,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "9dca09d493da935e",
        "type": "api-call-service",
        "z": "6528a66fc0f094dd",
        "name": "Notify Tina",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_tina",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": msg.topic,\t    \"message\": msg.payload\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 190,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "6088f5b9f13e0e36",
        "type": "delay",
        "z": "05a2d9f89e72481f",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 200,
        "y": 80,
        "wires": [
            [
                "406ed95a336485b0"
            ]
        ]
    },
    {
        "id": "406ed95a336485b0",
        "type": "api-current-state",
        "z": "05a2d9f89e72481f",
        "name": "Who?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.alexa_audio",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "who",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 350,
        "y": 80,
        "wires": [
            [
                "8e803251d3e3c3ae"
            ]
        ]
    },
    {
        "id": "8e803251d3e3c3ae",
        "type": "function",
        "z": "05a2d9f89e72481f",
        "name": "",
        "func": "if (msg.who === \"Basement Echo Dot\") {\n    msg.who = \"basement\"\n} else if (msg.who === \"Living Room Echo Dot\") {\n    msg.who = \"living_room\"\n} else if (msg.who === \"Master Bedroom Echo Dot\") {\n    msg.who = \"master_bedroom\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "abc735032941287e",
        "type": "api-current-state",
        "z": "89414cdf0a36bdfa",
        "name": "Tony",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "unknown",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "person.tony_stork",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "tony",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 250,
        "y": 80,
        "wires": [
            [
                "edcfc389431ebe15"
            ],
            []
        ]
    },
    {
        "id": "edcfc389431ebe15",
        "type": "api-current-state",
        "z": "89414cdf0a36bdfa",
        "name": "Tina",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "unknown",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "person.christina_stork",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "tina",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "e6e4103fc8bbd697"
            ],
            []
        ]
    },
    {
        "id": "e6e4103fc8bbd697",
        "type": "api-current-state",
        "z": "89414cdf0a36bdfa",
        "name": "Family",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "unknown",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "group.family",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "family",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 530,
        "y": 80,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "54f4bebfc9414dbd",
        "type": "lifx-list-scenes",
        "z": "3aa2aec226246753",
        "name": "",
        "api": "60eb53fb94cd64e4",
        "x": 210,
        "y": 140,
        "wires": [
            [
                "96da394eceab9244"
            ]
        ]
    },
    {
        "id": "8b4af77e07c66df9",
        "type": "lifx-list-lights",
        "z": "3aa2aec226246753",
        "name": "",
        "api": "60eb53fb94cd64e4",
        "selector": "",
        "x": 200,
        "y": 80,
        "wires": [
            [
                "817c0a6afb11477b"
            ]
        ]
    },
    {
        "id": "817c0a6afb11477b",
        "type": "debug",
        "z": "3aa2aec226246753",
        "name": "lights",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 370,
        "y": 80,
        "wires": []
    },
    {
        "id": "96da394eceab9244",
        "type": "debug",
        "z": "3aa2aec226246753",
        "name": "scenes",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 380,
        "y": 140,
        "wires": []
    },
    {
        "id": "cc8645ebae721601",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get duration",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_number.kallen_activity_duration",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "duration",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1010,
        "y": 160,
        "wires": [
            [
                "b2d071ca42e4a3c6",
                "b8ca8a1a2655570b"
            ]
        ]
    },
    {
        "id": "b2d071ca42e4a3c6",
        "type": "function",
        "z": "4a8821853d4dd1ad",
        "name": "Convert to seconds",
        "func": "msg.duration = msg.duration * 60\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 160,
        "wires": [
            [
                "7fc67fc156c0f4be"
            ]
        ]
    },
    {
        "id": "7fc67fc156c0f4be",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "Start Timer",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.kallen_timer"
        ],
        "data": "{    \"duration\": {{duration}}}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1410,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "f24aeb9c34914db9",
        "type": "server-state-changed",
        "z": "4a8821853d4dd1ad",
        "name": "Pause Switch",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_boolean.kallen_timer_pause",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 250,
        "y": 320,
        "wires": [
            [
                "afeb1d238a623c3d"
            ],
            [
                "34dcb204b421710d"
            ]
        ]
    },
    {
        "id": "afeb1d238a623c3d",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "timer",
        "service": "pause",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.kallen_timer"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 450,
        "y": 280,
        "wires": [
            [
                "b0f2bb3aef2890a1"
            ]
        ]
    },
    {
        "id": "34dcb204b421710d",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.kallen_timer"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 440,
        "y": 360,
        "wires": [
            [
                "e69ad4771494c458",
                "392d8c474c89b9f0"
            ]
        ]
    },
    {
        "id": "602437ba010cc43d",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Room",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activity_room",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "activity timer completed, good job!",
                "valueType": "str"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 790,
        "y": 520,
        "wires": [
            [
                "0a441953c41a18ae"
            ]
        ]
    },
    {
        "id": "1dc210f02bbc891d",
        "type": "switch",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "timer.kallen_timer",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 520,
        "wires": [
            [
                "fe1ba086baf93ec0",
                "646450ddef26f6f6"
            ]
        ]
    },
    {
        "id": "014d305040d2a8bd",
        "type": "server-events",
        "z": "4a8821853d4dd1ad",
        "name": "Timer Finished",
        "server": "9e87348d.9c1c48",
        "version": 1,
        "event_type": "timer.finished",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").entity_id",
                "valueType": "jsonata"
            }
        ],
        "x": 260,
        "y": 520,
        "wires": [
            [
                "1dc210f02bbc891d"
            ]
        ]
    },
    {
        "id": "923538ef97772f0c",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "Notification",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_kallen",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"message\": msg.payload,\t   \"title\": msg.topic\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1190,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "a3e3dc438a7b95fc",
        "type": "change",
        "z": "4a8821853d4dd1ad",
        "name": "Finished Message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "You are done with activity for today!",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "activity Timer Complete",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 580,
        "wires": [
            [
                "08a22fa71fce5e91"
            ]
        ]
    },
    {
        "id": "797d3e7cc53d773f",
        "type": "ha-button",
        "z": "4a8821853d4dd1ad",
        "name": "Start Button",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "fbc65f8185932b5f",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 110,
        "y": 160,
        "wires": [
            [
                "cb399b9e54bcf0f0"
            ]
        ]
    },
    {
        "id": "fe1ba086baf93ec0",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "Reset Slider",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_number",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_number.kallen_activity_duration"
        ],
        "data": "{\t    \"value\":30\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 790,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "cb399b9e54bcf0f0",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Room",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activity_room",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "room",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 290,
        "y": 160,
        "wires": [
            [
                "715c94772f02e398"
            ]
        ]
    },
    {
        "id": "4d4e55cea59da9ad",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "Basement Lights Scene",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.basement_studio_scenes"
        ],
        "data": "{\t    \"option\":\"Kallen Reading\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1370,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "600f4c2dcc3e0c51",
        "type": "switch",
        "z": "4a8821853d4dd1ad",
        "name": "Routing",
        "property": "room",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Basement",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Kallen Bedroom",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 840,
        "y": 160,
        "wires": [
            [
                "cc8645ebae721601",
                "c43df123937fd07d"
            ],
            [
                "cc8645ebae721601",
                "c43df123937fd07d"
            ],
            [
                "cc8645ebae721601"
            ]
        ]
    },
    {
        "id": "50056b099a24a824",
        "type": "subflow:6429099c4571dd6b",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "x": 1160,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "9727faf3509b96f8",
        "type": "todoist-task-complete",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "token": "f19eac517a138c66",
        "x": 1100,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "d8e2d16e313b938a",
        "type": "change",
        "z": "4a8821853d4dd1ad",
        "name": "Task ID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"id\":\"5631572291\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 640,
        "wires": [
            [
                "9727faf3509b96f8"
            ]
        ]
    },
    {
        "id": "e69ad4771494c458",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Room",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activity_room",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 610,
        "y": 360,
        "wires": [
            [
                "fdf9b6820eb7289a"
            ]
        ]
    },
    {
        "id": "fdf9b6820eb7289a",
        "type": "switch",
        "z": "4a8821853d4dd1ad",
        "name": "Routing",
        "property": "room",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Kallen Bedroom",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 780,
        "y": 360,
        "wires": [
            [
                "24abb932c4cd0b1f"
            ],
            []
        ]
    },
    {
        "id": "5c44fd504453ae63",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "Turn on K's bedroom lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [
            "kallen_bedroom"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1380,
        "y": 320,
        "wires": [
            [
                "dd0be4a0dd77e1db"
            ]
        ]
    },
    {
        "id": "908543f7b78f7beb",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "Turn on K's bedroom lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [
            "kallen_bedroom"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1380,
        "y": 100,
        "wires": [
            [
                "d6728df5d1fdf67e"
            ]
        ]
    },
    {
        "id": "dd0be4a0dd77e1db",
        "type": "delay",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1600,
        "y": 320,
        "wires": [
            [
                "6b086807971b2618"
            ]
        ]
    },
    {
        "id": "d6728df5d1fdf67e",
        "type": "delay",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1600,
        "y": 100,
        "wires": [
            [
                "ae7073e78053da5d"
            ]
        ]
    },
    {
        "id": "ae7073e78053da5d",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "Set to Adaptive",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.kallen_bedroom_scenes"
        ],
        "data": "{\t    \"option\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1780,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "6b086807971b2618",
        "type": "api-call-service",
        "z": "4a8821853d4dd1ad",
        "name": "Set to Adaptive",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.kallen_bedroom_scenes"
        ],
        "data": "{\t    \"option\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1780,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "6736626753b33834",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Check lights",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.kallen_bedroom_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "lights",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1150,
        "y": 360,
        "wires": [
            [
                "5c44fd504453ae63"
            ],
            []
        ],
        "outputLabels": [
            "off",
            "on"
        ]
    },
    {
        "id": "715c94772f02e398",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Activity",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activities",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "activity",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 470,
        "y": 160,
        "wires": [
            [
                "6a84cfeac66e9b29"
            ]
        ]
    },
    {
        "id": "646450ddef26f6f6",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Activity",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activities",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "activity",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 590,
        "y": 520,
        "wires": [
            [
                "602437ba010cc43d",
                "a3e3dc438a7b95fc",
                "b0c92a72557d0ac6"
            ]
        ]
    },
    {
        "id": "b0c92a72557d0ac6",
        "type": "switch",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "property": "activity",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Reading",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Writing",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 660,
        "wires": [
            [
                "d8e2d16e313b938a"
            ],
            [
                "408795055634e897"
            ]
        ]
    },
    {
        "id": "408795055634e897",
        "type": "change",
        "z": "4a8821853d4dd1ad",
        "name": "Task ID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"id\":\"5631620966\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 700,
        "wires": [
            [
                "9727faf3509b96f8"
            ]
        ]
    },
    {
        "id": "0a441953c41a18ae",
        "type": "change",
        "z": "4a8821853d4dd1ad",
        "name": "Formatting",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "activity",
                "fromt": "str",
                "to": "activity",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "voice",
                "pt": "msg",
                "to": "Emma",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 520,
        "wires": [
            [
                "50056b099a24a824"
            ]
        ]
    },
    {
        "id": "08a22fa71fce5e91",
        "type": "change",
        "z": "4a8821853d4dd1ad",
        "name": "Set Activity",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "activity",
                "fromt": "str",
                "to": "activity",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "topic",
                "pt": "msg",
                "from": "activity",
                "fromt": "str",
                "to": "activity",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 580,
        "wires": [
            [
                "923538ef97772f0c"
            ]
        ]
    },
    {
        "id": "736d7433005436b3",
        "type": "change",
        "z": "4a8821853d4dd1ad",
        "name": "Formatting",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "activity timer has been started in room for duration minutes",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "room",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "activity",
                "fromt": "str",
                "to": "activity",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "room",
                "fromt": "str",
                "to": "room",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "duration",
                "fromt": "str",
                "to": "duration",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "voice",
                "pt": "msg",
                "to": "Emma",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 220,
        "wires": [
            [
                "0aa29248b560c45d"
            ]
        ]
    },
    {
        "id": "0aa29248b560c45d",
        "type": "subflow:6429099c4571dd6b",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "x": 1540,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "b8ca8a1a2655570b",
        "type": "function",
        "z": "4a8821853d4dd1ad",
        "name": "Rounding",
        "func": "var readout = msg.duration\n\nmsg.duration = +readout.toFixed(0)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 220,
        "wires": [
            [
                "736d7433005436b3"
            ]
        ]
    },
    {
        "id": "6a84cfeac66e9b29",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Control Lights?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.kallen_timer_control_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "lights",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 660,
        "y": 160,
        "wires": [
            [
                "600f4c2dcc3e0c51"
            ],
            [
                "600f4c2dcc3e0c51"
            ]
        ],
        "outputLabels": [
            "on",
            "off"
        ]
    },
    {
        "id": "c43df123937fd07d",
        "type": "switch",
        "z": "4a8821853d4dd1ad",
        "name": "Lights?",
        "property": "lights",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1000,
        "y": 80,
        "wires": [
            [
                "fc26a2c43e3a3faa"
            ],
            []
        ]
    },
    {
        "id": "fc26a2c43e3a3faa",
        "type": "switch",
        "z": "4a8821853d4dd1ad",
        "name": "Routing",
        "property": "room",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Basement",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Kallen Bedroom",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1160,
        "y": 80,
        "wires": [
            [
                "4d4e55cea59da9ad"
            ],
            [
                "908543f7b78f7beb"
            ]
        ]
    },
    {
        "id": "24abb932c4cd0b1f",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Control Lights?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.kallen_timer_control_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "lights",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 960,
        "y": 360,
        "wires": [
            [
                "6736626753b33834"
            ],
            []
        ],
        "outputLabels": [
            "on",
            "off"
        ]
    },
    {
        "id": "b0f2bb3aef2890a1",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Room",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activity_room",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "room",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 630,
        "y": 280,
        "wires": [
            [
                "70888fea017c3e69"
            ]
        ]
    },
    {
        "id": "70888fea017c3e69",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Activity",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activities",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "activity",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 810,
        "y": 280,
        "wires": [
            [
                "c0521b53f7efeb17"
            ]
        ]
    },
    {
        "id": "c0521b53f7efeb17",
        "type": "change",
        "z": "4a8821853d4dd1ad",
        "name": "Formatting",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "activity timer has been paused in room",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "room",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "activity",
                "fromt": "str",
                "to": "activity",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "room",
                "fromt": "str",
                "to": "room",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "voice",
                "pt": "msg",
                "to": "Emma",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 990,
        "y": 280,
        "wires": [
            [
                "95d5ac486b4f9ee0"
            ]
        ]
    },
    {
        "id": "95d5ac486b4f9ee0",
        "type": "subflow:6429099c4571dd6b",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "x": 1180,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "392d8c474c89b9f0",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Room",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activity_room",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "room",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 610,
        "y": 420,
        "wires": [
            [
                "3ba243a44893f620"
            ]
        ]
    },
    {
        "id": "3ba243a44893f620",
        "type": "api-current-state",
        "z": "4a8821853d4dd1ad",
        "name": "Get Activity",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.kallen_activities",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "activity",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 790,
        "y": 420,
        "wires": [
            [
                "49767cbfa622a734"
            ]
        ]
    },
    {
        "id": "49767cbfa622a734",
        "type": "change",
        "z": "4a8821853d4dd1ad",
        "name": "Formatting",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "activity timer has been resumed in room",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "room",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "activity",
                "fromt": "str",
                "to": "activity",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "room",
                "fromt": "str",
                "to": "room",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "voice",
                "pt": "msg",
                "to": "Emma",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 420,
        "wires": [
            [
                "04113ab4977bf725"
            ]
        ]
    },
    {
        "id": "04113ab4977bf725",
        "type": "subflow:6429099c4571dd6b",
        "z": "4a8821853d4dd1ad",
        "name": "",
        "x": 1160,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "fd4bbf481e16e6ea",
        "type": "sunrise",
        "z": "e44b1e7a8ef7ae1d",
        "name": "",
        "lat": "41.286720",
        "lon": "-84.362106",
        "start": "sunriseEnd",
        "end": "sunsetStart",
        "soff": 0,
        "eoff": "-60",
        "x": 130,
        "y": 180,
        "wires": [
            [],
            [
                "6ee65c58bd763ecf"
            ]
        ]
    },
    {
        "id": "0371f41c342134a0",
        "type": "switch",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Day or night",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 510,
        "y": 180,
        "wires": [
            [
                "976f9624c919c07a",
                "7dc658bfbacde818"
            ],
            [
                "d394df04f71de37a",
                "4781b749d186cd7f"
            ]
        ]
    },
    {
        "id": "663856ad61059510",
        "type": "api-current-state",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Weather check",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "weather.iron_nerd_weather_station",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 940,
        "y": 140,
        "wires": [
            [
                "8808e39fba362206"
            ]
        ]
    },
    {
        "id": "e9aba9f5312297b7",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Turn lights on",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [
            "living_room",
            "mud_room"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2060,
        "y": 180,
        "wires": [
            [
                "7e26d76790c3690d",
                "4809adc3b17655bc"
            ]
        ]
    },
    {
        "id": "8808e39fba362206",
        "type": "switch",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Is it nice out?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sunny",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "clear-night",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1170,
        "y": 140,
        "wires": [
            [
                "f88f5b6e48e5a430"
            ],
            [
                "f88f5b6e48e5a430"
            ],
            [
                "8a5b225968323ce6"
            ]
        ]
    },
    {
        "id": "1e365f7e5ba78955",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Turn off night lighting",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [
            "front_porch",
            "upstairs_bathroom",
            "upstairs_hallway"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 960,
        "y": 240,
        "wires": [
            [
                "8556daf4bc9df581"
            ]
        ]
    },
    {
        "id": "8556daf4bc9df581",
        "type": "delay",
        "z": "e44b1e7a8ef7ae1d",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1160,
        "y": 240,
        "wires": [
            [
                "40a4142a0f72b94a",
                "5ee1e29d42eb0b88",
                "7b9e480fbcf14b44"
            ]
        ]
    },
    {
        "id": "40a4142a0f72b94a",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Sleep mode off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_sleep_mode_basement_studio",
            "switch.adaptive_lighting_sleep_mode_dining_room",
            "switch.adaptive_lighting_sleep_mode_downstairs_bathroom",
            "switch.adaptive_lighting_sleep_mode_kallen_bedroom",
            "switch.adaptive_lighting_sleep_mode_living_room",
            "switch.adaptive_lighting_sleep_mode_master_bedroom",
            "switch.adaptive_lighting_sleep_mode_mud_room",
            "switch.adaptive_lighting_sleep_mode_nursery",
            "switch.adaptive_lighting_sleep_mode_tina_lamp",
            "switch.adaptive_lighting_sleep_mode_upstairs_bathroom",
            "switch.adaptive_lighting_sleep_mode_upstairs_hallway"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1360,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "f88f5b6e48e5a430",
        "type": "delay",
        "z": "e44b1e7a8ef7ae1d",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1370,
        "y": 80,
        "wires": [
            [
                "4fcc6c68cec50467"
            ]
        ]
    },
    {
        "id": "990ab49071133125",
        "type": "change",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Clear Weather Message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Lights on after delay due to clear weather",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Sunset Lights ON",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1790,
        "y": 60,
        "wires": [
            [
                "e9aba9f5312297b7"
            ]
        ]
    },
    {
        "id": "60d401148ecff1ef",
        "type": "change",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Cloudy Weather Message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Lights on early due to cloudy weather",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Sunset Lights ON",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1790,
        "y": 180,
        "wires": [
            [
                "e9aba9f5312297b7"
            ]
        ]
    },
    {
        "id": "976f9624c919c07a",
        "type": "api-current-state",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Interior Toggle",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.sunset_lights_on",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 740,
        "y": 140,
        "wires": [
            [
                "663856ad61059510"
            ],
            [
                "907ad93232629cb5"
            ]
        ]
    },
    {
        "id": "d394df04f71de37a",
        "type": "api-current-state",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Interior Toggle",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.sunset_lights_on",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 740,
        "y": 240,
        "wires": [
            [
                "1e365f7e5ba78955"
            ],
            []
        ]
    },
    {
        "id": "4fcc6c68cec50467",
        "type": "api-current-state",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Is Family Home?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "group.family",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1550,
        "y": 80,
        "wires": [
            [
                "990ab49071133125"
            ],
            [
                "411c0ddd868c6e9d"
            ]
        ]
    },
    {
        "id": "8a5b225968323ce6",
        "type": "api-current-state",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Is Family Home?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "group.family",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1550,
        "y": 180,
        "wires": [
            [
                "60d401148ecff1ef"
            ],
            [
                "411c0ddd868c6e9d"
            ]
        ]
    },
    {
        "id": "411c0ddd868c6e9d",
        "type": "change",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Skipped Message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Lights not on due to nobody home, or toggle shutoff",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Sunset Lights SKIPPED",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2050,
        "y": 120,
        "wires": [
            [
                "7e26d76790c3690d",
                "4809adc3b17655bc"
            ]
        ]
    },
    {
        "id": "7e26d76790c3690d",
        "type": "subflow:6a62fbf7b4e86589",
        "z": "e44b1e7a8ef7ae1d",
        "name": "",
        "x": 2350,
        "y": 120,
        "wires": []
    },
    {
        "id": "4809adc3b17655bc",
        "type": "subflow:041613a2b6a0f41f",
        "z": "e44b1e7a8ef7ae1d",
        "name": "",
        "x": 2320,
        "y": 180,
        "wires": []
    },
    {
        "id": "5ee1e29d42eb0b88",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Adaptive Lighting On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_basement_studio",
            "switch.adaptive_lighting_dining_room",
            "switch.adaptive_lighting_downstairs_bathroom",
            "switch.adaptive_lighting_kallen_bedroom",
            "switch.adaptive_lighting_living_room",
            "switch.adaptive_lighting_master_bedroom",
            "switch.adaptive_lighting_mud_room",
            "switch.adaptive_lighting_nursery",
            "switch.adaptive_lighting_tina_lamp",
            "switch.adaptive_lighting_upstairs_bathroom",
            "switch.adaptive_lighting_upstairs_hallway"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1380,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "907ad93232629cb5",
        "type": "link out",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Night Interior Toggle Off",
        "mode": "link",
        "links": [
            "b37f91bf63e79996"
        ],
        "x": 875,
        "y": 200,
        "wires": []
    },
    {
        "id": "b37f91bf63e79996",
        "type": "link in",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Skip Formatting",
        "links": [
            "77c69154733e7366",
            "907ad93232629cb5"
        ],
        "x": 1805,
        "y": 120,
        "wires": [
            [
                "411c0ddd868c6e9d"
            ]
        ]
    },
    {
        "id": "4781b749d186cd7f",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Night Mode Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.night_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 300,
        "wires": [
            [
                "9335700303031f7c"
            ]
        ]
    },
    {
        "id": "9335700303031f7c",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Early Night Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.early_night_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 940,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "7b9e480fbcf14b44",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Reset Scene Text",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_text",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_text.basement_studio_selected_scene",
            "input_text.downstairs_bathroom_selected_scene",
            "input_text.kallen_bedroom_selected_scene",
            "input_text.living_room_selected_scene",
            "input_text.master_bedroom_selected_scene",
            "input_text.mud_room_selected_scene",
            "input_text.nursery_selected_scene",
            "input_text.tina_lamp_selected_scene",
            "input_text.upstairs_bathroom_selected_scene",
            "input_text.upstairs_hallway_selected_scene"
        ],
        "data": "{\t    \"value\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1370,
        "y": 360,
        "wires": [
            [
                "8471f96e468c13f7"
            ]
        ]
    },
    {
        "id": "7dc658bfbacde818",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Early Night Mode",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.early_night_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 750,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "8471f96e468c13f7",
        "type": "api-call-service",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Reset Scene Text",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_text",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_text.dining_room_lamp_selected_scene"
        ],
        "data": "{\t    \"value\":\"Full\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1590,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "bee1e4f9b480f6f6",
        "type": "ha-button",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Manual Trigger",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "738e7f8f2ac71049",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "0",
                "valueType": "num"
            }
        ],
        "x": 500,
        "y": 120,
        "wires": [
            [
                "7dc658bfbacde818",
                "f491cbd9eb0a3a22"
            ]
        ]
    },
    {
        "id": "dcf7a21a3844fbb0",
        "type": "inject",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Manual Off",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 520,
        "y": 240,
        "wires": [
            [
                "4781b749d186cd7f",
                "1e365f7e5ba78955"
            ]
        ]
    },
    {
        "id": "6ee65c58bd763ecf",
        "type": "api-current-state",
        "z": "e44b1e7a8ef7ae1d",
        "name": "Vacation Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.vacation_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "vacation",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 320,
        "y": 180,
        "wires": [
            [
                "0371f41c342134a0"
            ],
            []
        ],
        "outputLabels": [
            "Off",
            "On"
        ]
    },
    {
        "id": "134433d6e21dab5b",
        "type": "server-state-changed",
        "z": "3abb5ae57afb4761",
        "name": "Tony Presence",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.tony_home",
        "entityidfiltertype": "exact",
        "outputinitially": true,
        "state_type": "str",
        "haltifstate": "True",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 120,
        "wires": [
            [
                "77857e77d43a9d2e",
                "7169f007c32ccc46",
                "e6bdfba61c73d081",
                "26f15fc8d75a4020"
            ],
            [
                "379edcf9fe985ebe"
            ]
        ]
    },
    {
        "id": "77857e77d43a9d2e",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Enable Texts (Tony)",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.text_notify_tony"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 410,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "379edcf9fe985ebe",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Disable Texts (Tony)",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.text_notify_tony"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 420,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "49dbd6d6cba1b010",
        "type": "server-state-changed",
        "z": "3abb5ae57afb4761",
        "name": "Tina Presence",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.tina_home",
        "entityidfiltertype": "exact",
        "outputinitially": true,
        "state_type": "str",
        "haltifstate": "True",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 420,
        "wires": [
            [
                "a0c7649e26e66ddb",
                "35d7371023527600",
                "edaa6ff605ba6fa7",
                "abdb3c9694b18a39",
                "26f15fc8d75a4020"
            ],
            [
                "898659d514aa58fd"
            ]
        ]
    },
    {
        "id": "a0c7649e26e66ddb",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Enable Texts (Tina)",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.text_notify_tina"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 410,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "898659d514aa58fd",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Disable Texts (Tina)",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.text_notify_tina"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 410,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "cd4d8dd6b1d34f49",
        "type": "server-state-changed",
        "z": "3abb5ae57afb4761",
        "name": "Kallen Presence",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "person.kallen_stork",
        "entityidfiltertype": "exact",
        "outputinitially": true,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 680,
        "wires": [
            [
                "5193627a30d1b32d"
            ],
            [
                "fb1afc4c2078ca29"
            ]
        ]
    },
    {
        "id": "5193627a30d1b32d",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Enable Texts (Kallen)",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.text_notify_kallen"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 420,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "fb1afc4c2078ca29",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Disable Texts (Kallen)",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.text_notify_kallen"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 420,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "35d7371023527600",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Notify Tony",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_tony",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": \"New Arrival\",\t    \"message\": \"Christina has arrived at home!\",\t    \"data\": {\t        \"url\": \"/lovelace/mobile-devices\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 390,
        "y": 520,
        "wires": [
            [
                "bcdf2e5f1249631d"
            ]
        ]
    },
    {
        "id": "9ae7e308f889137d",
        "type": "wake on lan",
        "z": "3abb5ae57afb4761",
        "mac": "B4:2E:99:A8:CF:88",
        "host": "192.168.1.255",
        "udpport": 9,
        "numpackets": 3,
        "interval": 100,
        "name": "Boot Tina's Computer",
        "x": 1120,
        "y": 340,
        "wires": []
    },
    {
        "id": "edaa6ff605ba6fa7",
        "type": "change",
        "z": "3abb5ae57afb4761",
        "name": "Formatting",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Christina has arrived at home!",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "New Arrival!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 460,
        "wires": [
            [
                "8c14794c1a67f8c8"
            ]
        ]
    },
    {
        "id": "8c14794c1a67f8c8",
        "type": "subflow:041613a2b6a0f41f",
        "z": "3abb5ae57afb4761",
        "name": "",
        "x": 600,
        "y": 460,
        "wires": []
    },
    {
        "id": "e6bdfba61c73d081",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Notify Tina",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_tina",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": \"New Arrival\",\t    \"message\": \"Tony has arrived at home!\",\t    \"data\": {\t        \"url\": \"/lovelace/mobile-devices\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 390,
        "y": 220,
        "wires": [
            [
                "41aa4436b55474b2"
            ]
        ]
    },
    {
        "id": "7169f007c32ccc46",
        "type": "change",
        "z": "3abb5ae57afb4761",
        "name": "Formatting",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Tony has arrived at home!",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "New Arrival!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 160,
        "wires": [
            [
                "cfe98915cc1dba48"
            ]
        ]
    },
    {
        "id": "cfe98915cc1dba48",
        "type": "subflow:041613a2b6a0f41f",
        "z": "3abb5ae57afb4761",
        "name": "",
        "x": 600,
        "y": 160,
        "wires": []
    },
    {
        "id": "41aa4436b55474b2",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Notify Kallen",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_kallen",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": \"New Arrival\",\t    \"message\": \"Tony has arrived at home!\",\t    \"data\": {\t        \"url\": \"/lovelace/mobile-devices\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 590,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "bcdf2e5f1249631d",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Notify Kallen",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_kallen",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": \"New Arrival\",\t    \"message\": \"Christina has arrived at home!\",\t    \"data\": {\t        \"url\": \"/lovelace/mobile-devices\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 590,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "abdb3c9694b18a39",
        "type": "function",
        "z": "3abb5ae57afb4761",
        "name": "Get Variable - Tinawork",
        "func": "var tinawork = global.get('tinawork')\n\nif (tinawork === \"on\") {\n    msg.payload = \"on\"\n} else if (tinawork === \"off\") {\n    msg.payload = \"off\"\n} else {\n    msg.payload = \"unknown\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 340,
        "wires": [
            [
                "7ff36affdeacadba"
            ]
        ]
    },
    {
        "id": "7ff36affdeacadba",
        "type": "switch",
        "z": "3abb5ae57afb4761",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "unknown",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 650,
        "y": 340,
        "wires": [
            [
                "f167c4463ecaaf5c"
            ],
            [],
            [
                "7992545819db1a42"
            ]
        ]
    },
    {
        "id": "7992545819db1a42",
        "type": "api-call-service",
        "z": "3abb5ae57afb4761",
        "name": "Notify Tony",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "text_notify_tony",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": \"Hey Dummy\",\t    \"message\": \"Your presence flow is a failure and you should be ashamed.\",\t    \"data\": {\t        \"url\": \"/lovelace/mobile-devices\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 870,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "f167c4463ecaaf5c",
        "type": "subflow:7cc13ada.b6712c",
        "z": "3abb5ae57afb4761",
        "name": "",
        "env": [
            {
                "name": "start",
                "value": "15:00",
                "type": "str"
            },
            {
                "name": "stop",
                "value": "17:00",
                "type": "str"
            }
        ],
        "x": 860,
        "y": 340,
        "wires": [
            [
                "fb6be0753e2dbaed",
                "9ae7e308f889137d"
            ],
            []
        ]
    },
    {
        "id": "fb6be0753e2dbaed",
        "type": "debug",
        "z": "3abb5ae57afb4761",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 260,
        "wires": []
    },
    {
        "id": "76f6b8bed6de3f97",
        "type": "link in",
        "z": "3abb5ae57afb4761",
        "name": "Schedule Settings - Receive",
        "links": [
            "fbf61a9e5ca3db94",
            "39f78e9aa56bc51e"
        ],
        "x": 685,
        "y": 280,
        "wires": [
            [
                "f167c4463ecaaf5c"
            ]
        ]
    },
    {
        "id": "26f15fc8d75a4020",
        "type": "link out",
        "z": "3abb5ae57afb4761",
        "name": "Presence Detection Output",
        "mode": "link",
        "links": [
            "f34816b23181f21e"
        ],
        "x": 195,
        "y": 300,
        "wires": []
    },
    {
        "id": "6a1cecedd6ef4b44",
        "type": "link in",
        "z": "3abb5ae57afb4761",
        "name": "Cleanup - Presence",
        "links": [
            "619d1474239faf58"
        ],
        "x": 195,
        "y": 40,
        "wires": [
            [
                "bf504c30194524b9",
                "ec497068c3a61d02",
                "43048b96595e3e97"
            ]
        ]
    },
    {
        "id": "bf504c30194524b9",
        "type": "api-current-state",
        "z": "3abb5ae57afb4761",
        "name": "Tony Presence?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "True",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.tony_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 180,
        "y": 180,
        "wires": [
            [
                "77857e77d43a9d2e"
            ],
            [
                "379edcf9fe985ebe"
            ]
        ]
    },
    {
        "id": "ec497068c3a61d02",
        "type": "api-current-state",
        "z": "3abb5ae57afb4761",
        "name": "Tina Presence?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "True",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.tina_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 180,
        "y": 480,
        "wires": [
            [
                "a0c7649e26e66ddb"
            ],
            [
                "898659d514aa58fd"
            ]
        ]
    },
    {
        "id": "43048b96595e3e97",
        "type": "api-current-state",
        "z": "3abb5ae57afb4761",
        "name": "Kallen Presence?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.kallen_stork",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 190,
        "y": 740,
        "wires": [
            [
                "5193627a30d1b32d"
            ],
            [
                "fb1afc4c2078ca29"
            ]
        ]
    },
    {
        "id": "d95d9964546768a5",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Downstairs Bathroom Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.downstairs_bathroom_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "downstairs_bathroom",
                "valueType": "str"
            }
        ],
        "x": 140,
        "y": 40,
        "wires": [
            [
                "19b0e082db0643ac"
            ]
        ]
    },
    {
        "id": "bdab41af28f2c7cd",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Living Room Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.living_room_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "living_room",
                "valueType": "str"
            }
        ],
        "x": 110,
        "y": 100,
        "wires": [
            [
                "19b0e082db0643ac"
            ]
        ]
    },
    {
        "id": "7c224927d50a5f97",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Mud Room Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.mud_room_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "mud_room",
                "valueType": "str"
            }
        ],
        "x": 110,
        "y": 160,
        "wires": [
            [
                "19b0e082db0643ac"
            ]
        ]
    },
    {
        "id": "f066d04f1ecfa17a",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Front Porch Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.front_porch_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "front_porch",
                "valueType": "str"
            }
        ],
        "x": 110,
        "y": 280,
        "wires": [
            [
                "19b0e082db0643ac"
            ]
        ]
    },
    {
        "id": "e689231430e9c829",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Tina Lamp Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.tina_lamp_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "tina_lamp",
                "valueType": "str"
            }
        ],
        "x": 110,
        "y": 220,
        "wires": [
            [
                "19b0e082db0643ac"
            ]
        ]
    },
    {
        "id": "1f9d72079343bf75",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Light turned on",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "light.downstairs_bathroom_lights",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 420,
        "wires": [
            [
                "dfac5d681cf62083"
            ],
            []
        ]
    },
    {
        "id": "6755b1d81f7356ad",
        "type": "change",
        "z": "eff21041cc941fef",
        "name": "Stop Timer",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "stop",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 480,
        "wires": [
            [
                "dfac5d681cf62083"
            ]
        ]
    },
    {
        "id": "dfac5d681cf62083",
        "type": "stoptimer",
        "z": "eff21041cc941fef",
        "duration": "30",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "",
        "x": 500,
        "y": 420,
        "wires": [
            [
                "5123a607588fa737"
            ],
            []
        ]
    },
    {
        "id": "5123a607588fa737",
        "type": "api-call-service",
        "z": "eff21041cc941fef",
        "name": "Turn off light",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.downstairs_bathroom_lights"
        ],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 690,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "893e87b0e366077b",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Light turned off",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "light.downstairs_bathroom_lights",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 480,
        "wires": [
            [
                "6755b1d81f7356ad"
            ],
            []
        ]
    },
    {
        "id": "604ebdb19002182c",
        "type": "comment",
        "z": "eff21041cc941fef",
        "name": "Downstairs Bathroom",
        "info": "",
        "x": 300,
        "y": 420,
        "wires": []
    },
    {
        "id": "d790134891fedfcc",
        "type": "subflow:a4ee891237e460a2",
        "z": "eff21041cc941fef",
        "name": "Main Scenes Handler",
        "x": 580,
        "y": 40,
        "wires": []
    },
    {
        "id": "b4751d926780b644",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Dining Room Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.dining_room_lamp_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "dining_room_lamp",
                "valueType": "str"
            }
        ],
        "x": 120,
        "y": 340,
        "wires": [
            [
                "19b0e082db0643ac"
            ]
        ]
    },
    {
        "id": "05547a934bbcab4d",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Motion Detected",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.front_doorbell_motion_mqtt",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 600,
        "wires": [
            [
                "edef3ad58f6e9bbd"
            ],
            []
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "091390f43bfeddf5",
        "type": "api-call-service",
        "z": "eff21041cc941fef",
        "name": "Turn on light",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.front_porch_light"
        ],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 730,
        "y": 600,
        "wires": [
            [
                "26bda03370a86d83"
            ]
        ]
    },
    {
        "id": "26bda03370a86d83",
        "type": "stoptimer",
        "z": "eff21041cc941fef",
        "duration": "10",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "Wait 10 Minutes",
        "x": 920,
        "y": 600,
        "wires": [
            [
                "f65b2eccda530bcd"
            ],
            []
        ]
    },
    {
        "id": "f65b2eccda530bcd",
        "type": "api-current-state",
        "z": "eff21041cc941fef",
        "name": "Motion Detected?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.upstairs_bathroom_motion",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 170,
        "y": 740,
        "wires": [
            [
                "1bf27a631436c914"
            ],
            [
                "51237623ed73ba98"
            ]
        ]
    },
    {
        "id": "1bf27a631436c914",
        "type": "stoptimer",
        "z": "eff21041cc941fef",
        "duration": "30",
        "units": "Second",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "Wait 30 Seconds",
        "x": 550,
        "y": 680,
        "wires": [
            [
                "f65b2eccda530bcd"
            ],
            []
        ]
    },
    {
        "id": "7a7229eb69c9b1a3",
        "type": "api-call-service",
        "z": "eff21041cc941fef",
        "name": "Turn off light",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.front_porch_light"
        ],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 610,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "edef3ad58f6e9bbd",
        "type": "api-current-state",
        "z": "eff21041cc941fef",
        "name": "Early Night Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.early_night_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 310,
        "y": 600,
        "wires": [
            [
                "780ad4c1a1d5204b"
            ],
            []
        ]
    },
    {
        "id": "780ad4c1a1d5204b",
        "type": "api-current-state",
        "z": "eff21041cc941fef",
        "name": "Front Porch Toggle",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.front_porch_light_on",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 530,
        "y": 600,
        "wires": [
            [
                "091390f43bfeddf5"
            ],
            []
        ]
    },
    {
        "id": "51237623ed73ba98",
        "type": "api-current-state",
        "z": "eff21041cc941fef",
        "name": "Front Porch Toggle",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.front_porch_light_on",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 390,
        "y": 740,
        "wires": [
            [
                "7a7229eb69c9b1a3"
            ],
            []
        ]
    },
    {
        "id": "47aa56df01f697fc",
        "type": "server-state-changed",
        "z": "eff21041cc941fef",
        "name": "Door Open",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.front_door",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 80,
        "y": 660,
        "wires": [
            [
                "edef3ad58f6e9bbd"
            ],
            []
        ],
        "outputLabels": [
            "Open",
            "Closed"
        ]
    },
    {
        "id": "f34816b23181f21e",
        "type": "link in",
        "z": "eff21041cc941fef",
        "name": "Porch Light Input",
        "links": [
            "26f15fc8d75a4020"
        ],
        "x": 165,
        "y": 540,
        "wires": [
            [
                "edef3ad58f6e9bbd"
            ]
        ]
    },
    {
        "id": "879ee8903841b8f0",
        "type": "server-state-changed",
        "z": "5e238cbbe6d612c9",
        "name": "Upstairs Hallway Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.upstairs_hallway_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "upstairs_hallway",
                "valueType": "str"
            }
        ],
        "x": 150,
        "y": 280,
        "wires": [
            [
                "fba69dfc80829db7"
            ]
        ]
    },
    {
        "id": "bc2426cfcd5afbe8",
        "type": "server-state-changed",
        "z": "5e238cbbe6d612c9",
        "name": "Upstairs Bathroom Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.upstairs_bathroom_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "upstairs_bathroom",
                "valueType": "str"
            }
        ],
        "x": 150,
        "y": 40,
        "wires": [
            [
                "fba69dfc80829db7"
            ]
        ]
    },
    {
        "id": "a5498446c1edffa9",
        "type": "server-state-changed",
        "z": "5e238cbbe6d612c9",
        "name": "Kallen Bedroom Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.kallen_bedroom_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "kallen_bedroom",
                "valueType": "str"
            }
        ],
        "x": 140,
        "y": 100,
        "wires": [
            [
                "fba69dfc80829db7"
            ]
        ]
    },
    {
        "id": "f28e7fd88f75041e",
        "type": "server-state-changed",
        "z": "5e238cbbe6d612c9",
        "name": "Nursery Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.nursery_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "nursery",
                "valueType": "str"
            }
        ],
        "x": 120,
        "y": 160,
        "wires": [
            [
                "fba69dfc80829db7"
            ]
        ]
    },
    {
        "id": "e1123236ee16fdaf",
        "type": "server-state-changed",
        "z": "5e238cbbe6d612c9",
        "name": "Master Bedroom Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.master_bedroom_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "master_bedroom",
                "valueType": "str"
            }
        ],
        "x": 150,
        "y": 220,
        "wires": [
            [
                "fba69dfc80829db7"
            ]
        ]
    },
    {
        "id": "a1ee07ab20229b45",
        "type": "server-state-changed",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Motion Detected",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.upstairs_bathroom_motion",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 240,
        "y": 400,
        "wires": [
            [
                "ea8536fc853a8af4"
            ],
            []
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "7e89e4d34a758087",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Turn on light",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.upstairs_bathroom_lights"
        ],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1150,
        "y": 440,
        "wires": [
            [
                "be2ef3afc92034ec"
            ]
        ]
    },
    {
        "id": "be2ef3afc92034ec",
        "type": "stoptimer",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "duration": "5",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "Wait 5 Minutes",
        "x": 1360,
        "y": 420,
        "wires": [
            [
                "23c3c8fe409e3f94"
            ],
            []
        ]
    },
    {
        "id": "23c3c8fe409e3f94",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Motion Detected?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.upstairs_bathroom_motion",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 330,
        "y": 640,
        "wires": [
            [
                "47fcb13395bcf3f0"
            ],
            [
                "785049971f40b7b2"
            ]
        ]
    },
    {
        "id": "74c0ced4ac160364",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Turn off light",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.upstairs_bathroom_lights"
        ],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1050,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "47fcb13395bcf3f0",
        "type": "stoptimer",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "duration": "30",
        "units": "Second",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "Wait 30 Seconds",
        "x": 330,
        "y": 580,
        "wires": [
            [
                "23c3c8fe409e3f94"
            ],
            []
        ]
    },
    {
        "id": "a17d58585048335d",
        "type": "subflow:a4ee891237e460a2",
        "z": "5e238cbbe6d612c9",
        "name": "",
        "x": 520,
        "y": 40,
        "wires": []
    },
    {
        "id": "ea8536fc853a8af4",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Shower Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.shower_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 460,
        "y": 400,
        "wires": [
            [
                "edc283ca40d3c7ef"
            ],
            []
        ],
        "outputLabels": [
            "Off",
            "On"
        ]
    },
    {
        "id": "edc283ca40d3c7ef",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Early Night",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.early_night_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 690,
        "y": 400,
        "wires": [
            [
                "3fa2a7a15d94c156"
            ],
            [
                "7e89e4d34a758087"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "d2df58b074b9ba08",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Set Adaptive",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.upstairs_bathroom_scenes"
        ],
        "data": "{\t    \"option\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1150,
        "y": 360,
        "wires": [
            [
                "be2ef3afc92034ec"
            ]
        ]
    },
    {
        "id": "e19f97e448023ade",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Early Night",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.early_night_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 830,
        "y": 620,
        "wires": [
            [
                "38d9a4979f22e19f"
            ],
            [
                "74c0ced4ac160364"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "38d9a4979f22e19f",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Late Night",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.night_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1070,
        "y": 600,
        "wires": [
            [
                "d0cf87bd9c3ba0b1"
            ],
            [
                "83686fab02a3d825"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "d0cf87bd9c3ba0b1",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Set Single Nightlight",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.upstairs_bathroom_scenes"
        ],
        "data": "{\t    \"option\":\"Single Nightlight\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1300,
        "y": 540,
        "wires": [
            [
                "e70840b82c2bd54b"
            ]
        ]
    },
    {
        "id": "83686fab02a3d825",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Set Nightlight",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.upstairs_bathroom_scenes"
        ],
        "data": "{\t    \"option\":\"Nightlight\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1290,
        "y": 600,
        "wires": [
            [
                "e70840b82c2bd54b"
            ]
        ]
    },
    {
        "id": "853abef16fadc824",
        "type": "server-state-changed",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Shower Mode",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_boolean.shower_mode",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 210,
        "y": 820,
        "wires": [
            [
                "bfcb013bbf11611c",
                "2ad7be43ccdbdeaf",
                "31b8c8291d19ffc6"
            ],
            [
                "2e299ac73c696afc",
                "31b8c8291d19ffc6"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "bfcb013bbf11611c",
        "type": "change",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Payload \"stop\"",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "stop",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 500,
        "wires": [
            [
                "47fcb13395bcf3f0",
                "e90e0b2a6d30d855"
            ]
        ]
    },
    {
        "id": "785049971f40b7b2",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Shower Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.shower_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 580,
        "y": 640,
        "wires": [
            [
                "e19f97e448023ade"
            ],
            []
        ],
        "outputLabels": [
            "Off",
            "On"
        ]
    },
    {
        "id": "2ad7be43ccdbdeaf",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Set to Bright",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.upstairs_bathroom_scenes"
        ],
        "data": "{\t    \"option\":\"Bright\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 470,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "2e299ac73c696afc",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Early Night",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.early_night_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 490,
        "y": 860,
        "wires": [
            [
                "d1ae15dff680b3b1"
            ],
            [
                "ea02f8930aa2c7aa"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "5d18c5d00181b011",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Set Nightlight",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.upstairs_bathroom_scenes"
        ],
        "data": "{\t    \"option\":\"Nightlight\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1310,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "ea02f8930aa2c7aa",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Turn Off Lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.upstairs_bathroom_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 700,
        "y": 880,
        "wires": [
            [
                "8859759915625e2f"
            ]
        ]
    },
    {
        "id": "8859759915625e2f",
        "type": "delay",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 880,
        "y": 880,
        "wires": [
            [
                "3941b4a5b3493461"
            ]
        ]
    },
    {
        "id": "3941b4a5b3493461",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Adaptive On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.adaptive_lighting_upstairs_bathroom"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1050,
        "y": 880,
        "wires": [
            [
                "0b122b02cfb10c25"
            ]
        ]
    },
    {
        "id": "0b122b02cfb10c25",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Set Scene Text",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_text",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_text.upstairs_bathroom_selected_scene"
        ],
        "data": "{\t    \"value\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1240,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "d1ae15dff680b3b1",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Night Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.night_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "nightmode",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 710,
        "y": 820,
        "wires": [
            [
                "3a25dfcae623ee00"
            ],
            [
                "3a25dfcae623ee00"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "39b90ceaed170ac8",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Set Single Nightlight",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.upstairs_bathroom_scenes"
        ],
        "data": "{\t    \"option\":\"Single Nightlight\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1340,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "31b8c8291d19ffc6",
        "type": "link out",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Shower Mode Out",
        "mode": "link",
        "links": [
            "7a7f626dce181b23"
        ],
        "x": 425,
        "y": 720,
        "wires": []
    },
    {
        "id": "572168639448c73d",
        "type": "api-call-service",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Turn off lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [
            "upstairs_bathroom"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1980,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "e70840b82c2bd54b",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Kallen Overnight",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.kallen_overnight",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1550,
        "y": 660,
        "wires": [
            [
                "2dc5f9d3e00f4ddc"
            ],
            []
        ]
    },
    {
        "id": "2dc5f9d3e00f4ddc",
        "type": "stoptimer",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "duration": "2",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "Wait 2 Minutes",
        "x": 1780,
        "y": 660,
        "wires": [
            [
                "572168639448c73d"
            ],
            []
        ]
    },
    {
        "id": "55e84ccb73ae9b74",
        "type": "link in",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Goodnight - Lighting",
        "links": [
            "60ce44747cf3e507"
        ],
        "x": 135,
        "y": 460,
        "wires": [
            [
                "bfcb013bbf11611c"
            ]
        ]
    },
    {
        "id": "3a25dfcae623ee00",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Kallen Overnight",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.kallen_overnight",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 950,
        "y": 820,
        "wires": [
            [
                "ea02f8930aa2c7aa"
            ],
            [
                "fc4bcd1c117fa849"
            ]
        ]
    },
    {
        "id": "fc4bcd1c117fa849",
        "type": "switch",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "",
        "property": "nightmode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1150,
        "y": 820,
        "wires": [
            [
                "39b90ceaed170ac8"
            ],
            [
                "5d18c5d00181b011"
            ]
        ]
    },
    {
        "id": "3fa2a7a15d94c156",
        "type": "api-current-state",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Check Kallen Overnight",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.kallen_overnight",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 930,
        "y": 360,
        "wires": [
            [
                "7e89e4d34a758087"
            ],
            [
                "d2df58b074b9ba08"
            ]
        ]
    },
    {
        "id": "017de174925e8c75",
        "type": "server-state-changed",
        "z": "5e238cbbe6d612c9",
        "g": "eccca853a916b662",
        "name": "Motion Detected",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.upstairs_bathroom_motion",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "stop",
                "valueType": "str"
            }
        ],
        "x": 1300,
        "y": 680,
        "wires": [
            [
                "e70840b82c2bd54b"
            ],
            []
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "07049ae77b6751c6",
        "type": "server-state-changed",
        "z": "47f17992fab9b4f5",
        "name": "Basement Studio Scenes",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.basement_studio_scenes",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "basement_studio",
                "valueType": "str"
            }
        ],
        "x": 130,
        "y": 40,
        "wires": [
            [
                "b334c603ae26bd9b"
            ]
        ]
    },
    {
        "id": "5e31d6aacad206b8",
        "type": "server-state-changed",
        "z": "47f17992fab9b4f5",
        "name": "Light turned on",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "light.furnace_room_overhead",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 100,
        "wires": [
            [
                "dd3608c864d7007b"
            ],
            []
        ]
    },
    {
        "id": "18599ab162ab225b",
        "type": "change",
        "z": "47f17992fab9b4f5",
        "name": "Stop Timer",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "stop",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 160,
        "wires": [
            [
                "dd3608c864d7007b"
            ]
        ]
    },
    {
        "id": "dd3608c864d7007b",
        "type": "stoptimer",
        "z": "47f17992fab9b4f5",
        "duration": "60",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "",
        "x": 500,
        "y": 100,
        "wires": [
            [
                "e79ecc6c79946cc4"
            ],
            []
        ]
    },
    {
        "id": "e79ecc6c79946cc4",
        "type": "api-call-service",
        "z": "47f17992fab9b4f5",
        "name": "Turn off light",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.furnace_room_overhead"
        ],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 690,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "ab01d3d95c7ea717",
        "type": "server-state-changed",
        "z": "47f17992fab9b4f5",
        "name": "Light turned off",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "light.furnace_room_overhead",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 160,
        "wires": [
            [
                "18599ab162ab225b"
            ],
            []
        ]
    },
    {
        "id": "8fa363e9e0c1b165",
        "type": "comment",
        "z": "47f17992fab9b4f5",
        "name": "Furnace Room",
        "info": "",
        "x": 300,
        "y": 100,
        "wires": []
    },
    {
        "id": "b334c603ae26bd9b",
        "type": "subflow:74d3a55b70dc2d6c",
        "z": "47f17992fab9b4f5",
        "name": "",
        "x": 410,
        "y": 40,
        "wires": []
    },
    {
        "id": "97a441f1ac510844",
        "type": "inject",
        "z": "47f17992fab9b4f5",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 220,
        "wires": [
            [
                "ec543bc9adac3d08"
            ]
        ]
    },
    {
        "id": "d45ac7361e128558",
        "type": "lifx-pulse-effect",
        "z": "47f17992fab9b4f5",
        "name": "",
        "api": "60eb53fb94cd64e4",
        "selector": "group:Basement Studio",
        "color": "red",
        "from_color": "",
        "period": "0.5",
        "cycles": "5",
        "persist": "false",
        "power_on": "true",
        "x": 550,
        "y": 280,
        "wires": []
    },
    {
        "id": "fbe3667814a51f6f",
        "type": "server-state-changed",
        "z": "47f17992fab9b4f5",
        "name": "Front Door Opens",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.front_door",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 280,
        "wires": [
            [
                "ec543bc9adac3d08"
            ],
            []
        ]
    },
    {
        "id": "ec543bc9adac3d08",
        "type": "api-current-state",
        "z": "47f17992fab9b4f5",
        "name": "Basement Lights On?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.basement_studio_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 340,
        "y": 280,
        "wires": [
            [
                "d45ac7361e128558",
                "3563f62312975002",
                "d32a407e1c701563"
            ],
            []
        ]
    },
    {
        "id": "cb4d95e0ee4e1f05",
        "type": "api-call-service",
        "z": "47f17992fab9b4f5",
        "name": "Reset Adaptive",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.basement_studio_scenes"
        ],
        "data": "{\t    \"option\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 720,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "3563f62312975002",
        "type": "delay",
        "z": "47f17992fab9b4f5",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 540,
        "y": 220,
        "wires": [
            [
                "cb4d95e0ee4e1f05"
            ]
        ]
    },
    {
        "id": "d4019d35bf5a5f98",
        "type": "inject",
        "z": "47f17992fab9b4f5",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 400,
        "wires": [
            [
                "e91c3392b59ff9d1"
            ]
        ]
    },
    {
        "id": "29b9f573370571cf",
        "type": "lifx-pulse-effect",
        "z": "47f17992fab9b4f5",
        "name": "",
        "api": "60eb53fb94cd64e4",
        "selector": "group:Basement Studio",
        "color": "green",
        "from_color": "",
        "period": "0.25",
        "cycles": "8",
        "persist": "false",
        "power_on": "true",
        "x": 550,
        "y": 460,
        "wires": []
    },
    {
        "id": "25e12d8e4a0a7f11",
        "type": "server-state-changed",
        "z": "47f17992fab9b4f5",
        "name": "Doorbell Rings",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.front_doorbell_ding_mqtt",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 460,
        "wires": [
            [
                "e91c3392b59ff9d1"
            ],
            []
        ]
    },
    {
        "id": "e91c3392b59ff9d1",
        "type": "api-current-state",
        "z": "47f17992fab9b4f5",
        "name": "Basement Lights On?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.basement_studio_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 340,
        "y": 460,
        "wires": [
            [
                "29b9f573370571cf",
                "753ad45c3685897b",
                "58b54517ed812db3"
            ],
            []
        ]
    },
    {
        "id": "5a19347b1a570e9c",
        "type": "api-call-service",
        "z": "47f17992fab9b4f5",
        "name": "Reset Adaptive",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.basement_studio_scenes"
        ],
        "data": "{\t    \"option\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 720,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "753ad45c3685897b",
        "type": "delay",
        "z": "47f17992fab9b4f5",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 540,
        "y": 400,
        "wires": [
            [
                "5a19347b1a570e9c"
            ]
        ]
    },
    {
        "id": "d32a407e1c701563",
        "type": "api-call-service",
        "z": "47f17992fab9b4f5",
        "name": "Hue Lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.basement_short_lamp",
            "light.basement_stairwell",
            "light.basement_tall_lamp"
        ],
        "data": "{\t    \"color_name\":\"red\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 550,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "58b54517ed812db3",
        "type": "api-call-service",
        "z": "47f17992fab9b4f5",
        "name": "Hue Lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.basement_short_lamp",
            "light.basement_stairwell",
            "light.basement_tall_lamp"
        ],
        "data": "{\t    \"color_name\":\"green\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 550,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "cd04bdb407311eb5",
        "type": "ha-button",
        "z": "b0286fae9f2ce547",
        "name": "Start YouTube in Living Room",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "137fe3f66779bb13",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 160,
        "y": 40,
        "wires": [
            [
                "31cb558d6ee383c4"
            ]
        ]
    },
    {
        "id": "7611921cadb91b1e",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Dim Lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.dining_room_lamp_scenes"
        ],
        "data": "{\t    \"option\":\"Nightlight\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 990,
        "y": 920,
        "wires": [
            [
                "8b53b9f4d5ba0bf0"
            ]
        ]
    },
    {
        "id": "cac7cc3111526a67",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Start Youtube",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "select_source",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_room_tv"
        ],
        "data": "{\t    \"source\":\"com.google.android.youtube.tv\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "7d8d5376e990d357",
        "type": "ha-button",
        "z": "b0286fae9f2ce547",
        "name": "Stop YouTube in Living Room",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "eaeb8fcb37fa8585",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 160,
        "y": 100,
        "wires": [
            [
                "0b79d297a8596c37"
            ]
        ]
    },
    {
        "id": "3a29cecbefa6cbe2",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Reset Lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.dining_room_lamp_scenes"
        ],
        "data": "{\t    \"option\":\"Full\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1070,
        "y": 1000,
        "wires": [
            [
                "2c9b9e4fbaa17b8a"
            ]
        ]
    },
    {
        "id": "ab4c69753bfc36f5",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Stop Youtube",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "select_source",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_room_tv"
        ],
        "data": "{\t    \"source\":\"!com.google.android.youtube.tv\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 730,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "b18c7a21fc449d35",
        "type": "alexa-home",
        "z": "b0286fae9f2ce547",
        "conf": "c8312629c112d43a",
        "device": "171565",
        "acknoledge": true,
        "name": "Living Room Youtube",
        "topic": "",
        "x": 140,
        "y": 160,
        "wires": [
            [
                "936091f71dc880b3"
            ]
        ]
    },
    {
        "id": "936091f71dc880b3",
        "type": "switch",
        "z": "b0286fae9f2ce547",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 160,
        "wires": [
            [
                "31cb558d6ee383c4"
            ],
            [
                "0b79d297a8596c37"
            ]
        ]
    },
    {
        "id": "59350a1f38e3e04a",
        "type": "ha-button",
        "z": "b0286fae9f2ce547",
        "name": "Start Twitch in Living Room",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "266a447bcb22dad6",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 150,
        "y": 220,
        "wires": [
            [
                "13d5c047c41f60ba"
            ]
        ]
    },
    {
        "id": "6c78852a9c604f64",
        "type": "ha-button",
        "z": "b0286fae9f2ce547",
        "name": "Stop Twitch in Living Room",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "73718265ac9a1389",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 150,
        "y": 280,
        "wires": [
            [
                "40817f8c9eeae5fe"
            ]
        ]
    },
    {
        "id": "abe997d5df095480",
        "type": "alexa-home",
        "z": "b0286fae9f2ce547",
        "conf": "c8312629c112d43a",
        "device": "171566",
        "acknoledge": true,
        "name": "Living Room Twitch",
        "topic": "",
        "x": 130,
        "y": 340,
        "wires": [
            [
                "a18b6c8c026995d6"
            ]
        ]
    },
    {
        "id": "a18b6c8c026995d6",
        "type": "switch",
        "z": "b0286fae9f2ce547",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 340,
        "wires": [
            [
                "13d5c047c41f60ba"
            ],
            [
                "40817f8c9eeae5fe"
            ]
        ]
    },
    {
        "id": "db54e97573a07fc4",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Start Twitch",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "select_source",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_room_tv"
        ],
        "data": "{\t    \"source\":\"tv.twitch.android.app\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 730,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "77f2aae15fa1250d",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Stop Twitch",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "select_source",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_room_tv"
        ],
        "data": "{\t    \"source\":\"!tv.twitch.android.app\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 730,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "9e36b04d6063c234",
        "type": "ha-button",
        "z": "b0286fae9f2ce547",
        "name": "Start Plex in Living Room",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "5d20015e8a70767a",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 150,
        "y": 400,
        "wires": [
            [
                "b8995a85f5d34268"
            ]
        ]
    },
    {
        "id": "7f82b9d6d835e09b",
        "type": "ha-button",
        "z": "b0286fae9f2ce547",
        "name": "Stop Plex in Living Room",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "c1da63449b303e84",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 150,
        "y": 460,
        "wires": [
            [
                "85bd556a614f0455"
            ]
        ]
    },
    {
        "id": "158b197a42fed757",
        "type": "alexa-home",
        "z": "b0286fae9f2ce547",
        "conf": "c8312629c112d43a",
        "device": "171567",
        "acknoledge": true,
        "name": "Living Room Plex",
        "topic": "",
        "x": 120,
        "y": 520,
        "wires": [
            [
                "e549712aaaceb285"
            ]
        ]
    },
    {
        "id": "e549712aaaceb285",
        "type": "switch",
        "z": "b0286fae9f2ce547",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 520,
        "wires": [
            [
                "b8995a85f5d34268"
            ],
            [
                "85bd556a614f0455"
            ]
        ]
    },
    {
        "id": "be5bdfc3c12b05da",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Start Plex",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "select_source",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_room_tv"
        ],
        "data": "{\t    \"source\":\"com.plexapp.android\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 720,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "728ab818393de52d",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Stop Plex",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "select_source",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_room_tv"
        ],
        "data": "{\t    \"source\":\"!com.plexapp.android\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 720,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "960884b0fd23e69b",
        "type": "ha-button",
        "z": "b0286fae9f2ce547",
        "name": "Start Netflix in Living Room",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "eb813ad296813ab2",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 150,
        "y": 580,
        "wires": [
            [
                "c95d487f9fbe14ce"
            ]
        ]
    },
    {
        "id": "61fdabfde220fbcc",
        "type": "ha-button",
        "z": "b0286fae9f2ce547",
        "name": "Stop Netflix in Living Room",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "2a115fc593b081ac",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 150,
        "y": 640,
        "wires": [
            [
                "318bee4424125dd5"
            ]
        ]
    },
    {
        "id": "42b706dd4afe3e42",
        "type": "alexa-home",
        "z": "b0286fae9f2ce547",
        "conf": "c8312629c112d43a",
        "device": "171568",
        "acknoledge": true,
        "name": "Living Room Netflix",
        "topic": "",
        "x": 130,
        "y": 700,
        "wires": [
            [
                "9a605b80513eba44"
            ]
        ]
    },
    {
        "id": "9a605b80513eba44",
        "type": "switch",
        "z": "b0286fae9f2ce547",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 700,
        "wires": [
            [
                "c95d487f9fbe14ce"
            ],
            [
                "318bee4424125dd5"
            ]
        ]
    },
    {
        "id": "0b860dc2f7db3ba0",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Start Netflix",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "select_source",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_room_tv"
        ],
        "data": "{\t    \"source\":\"com.netflix.ninja\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 730,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "51d86d6064f084d2",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Stop Netflix",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "select_source",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_room_tv"
        ],
        "data": "{\t    \"source\":\"!com.netflix.ninja\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 730,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "4a2031f363418db1",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Set Scene",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.living_room_scenes"
        ],
        "data": "{\t    \"option\":\"Tokyo\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1350,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "2c9b9e4fbaa17b8a",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Reset Scene",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.living_room_scenes"
        ],
        "data": "{\t    \"option\":\"Adaptive\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1250,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "984386fa0a6369d6",
        "type": "server-state-changed",
        "z": "b0286fae9f2ce547",
        "name": "Living Room TV Current App",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.living_room_tv_current_app",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "x": 160,
        "y": 840,
        "wires": [
            [
                "0beae13503166379"
            ]
        ]
    },
    {
        "id": "0beae13503166379",
        "type": "function",
        "z": "b0286fae9f2ce547",
        "name": "",
        "func": "if (msg.payload === \"YouTube\") {\n    msg.payload = \"start\"\n} else if (msg.payload === \"Netflix\") {\n    msg.payload = \"start\"\n} else if (msg.payload === \"Plex\") {\n    msg.payload = \"start\"\n} else if (msg.payload === \"Twitch\") {\n    msg.payload = \"start\"\n} else if (msg.payload === \"Hulu\") {\n    msg.payload = \"start\"\n} else {\n    msg.payload = \"stop\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 840,
        "wires": [
            [
                "bc363dcf2c3aaf3c"
            ]
        ]
    },
    {
        "id": "6c77ade442a47a30",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Entertainment Mode On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.living_room_entertainment_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "bc363dcf2c3aaf3c",
        "type": "switch",
        "z": "b0286fae9f2ce547",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "stop",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 530,
        "y": 840,
        "wires": [
            [
                "6c77ade442a47a30"
            ],
            [
                "6392f2f0586d988a"
            ]
        ]
    },
    {
        "id": "6392f2f0586d988a",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Entertainment Mode Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.living_room_entertainment_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "e505e9f24bf919dd",
        "type": "server-state-changed",
        "z": "b0286fae9f2ce547",
        "name": "Entertainment Mode State",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_boolean.living_room_entertainment_mode",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 960,
        "wires": [
            [
                "6019fc13d70a69c7"
            ],
            [
                "f505205962d4e214"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "c1c0d3ee514fa085",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Are Lights On?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.living_room_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 540,
        "y": 920,
        "wires": [
            [
                "1ddcce6ef3293779"
            ],
            []
        ]
    },
    {
        "id": "88580ff9416f69c7",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Are Lights On?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.living_room_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 540,
        "y": 1000,
        "wires": [
            [
                "3a29cecbefa6cbe2"
            ],
            []
        ]
    },
    {
        "id": "9efd5346a1ca1972",
        "type": "server-state-changed",
        "z": "b0286fae9f2ce547",
        "name": "Detect Pause",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "media_player.living_room_tv",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "paused",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "x": 110,
        "y": 1100,
        "wires": [
            [
                "0845a18537933359"
            ],
            [
                "966547ac9d93eee1",
                "63a9f9055e287a53"
            ]
        ],
        "outputLabels": [
            "paused",
            "playing"
        ]
    },
    {
        "id": "3596959961544947",
        "type": "switch",
        "z": "b0286fae9f2ce547",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "playing",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 1060,
        "wires": [
            [
                "9cbcdb825b0a60ad"
            ]
        ]
    },
    {
        "id": "9cbcdb825b0a60ad",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Check Toggle",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.living_room_entertainment_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 600,
        "y": 1060,
        "wires": [
            [
                "c9ca600850fc6a76"
            ],
            []
        ]
    },
    {
        "id": "40cab913b75a5507",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Check Toggle",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.living_room_entertainment_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 860,
        "y": 1140,
        "wires": [
            [
                "a57d15aac606dfb1"
            ],
            []
        ]
    },
    {
        "id": "c9ca600850fc6a76",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Are Lights On?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.living_room_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 800,
        "y": 1060,
        "wires": [
            [
                "1ddcce6ef3293779"
            ],
            []
        ]
    },
    {
        "id": "a57d15aac606dfb1",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Are Lights On?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.living_room_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1060,
        "y": 1140,
        "wires": [
            [
                "3a29cecbefa6cbe2"
            ],
            []
        ]
    },
    {
        "id": "8b53b9f4d5ba0bf0",
        "type": "api-call-service",
        "z": "b0286fae9f2ce547",
        "name": "Dynamic On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.living_room_dynamic_scenes"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1170,
        "y": 920,
        "wires": [
            [
                "4a2031f363418db1"
            ]
        ]
    },
    {
        "id": "1ddcce6ef3293779",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Prevent Duplicate",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "Tokyo",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "input_text.living_room_selected_scene",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 790,
        "y": 920,
        "wires": [
            [
                "7611921cadb91b1e"
            ],
            []
        ]
    },
    {
        "id": "cc8f6ab710549be2",
        "type": "stoptimer",
        "z": "b0286fae9f2ce547",
        "duration": "15",
        "units": "Second",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "",
        "x": 650,
        "y": 1140,
        "wires": [
            [
                "40cab913b75a5507"
            ],
            []
        ]
    },
    {
        "id": "24c5dfc33d4685c2",
        "type": "change",
        "z": "b0286fae9f2ce547",
        "name": "Stop Timer",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "stop",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 1140,
        "wires": [
            [
                "cc8f6ab710549be2"
            ]
        ]
    },
    {
        "id": "6019fc13d70a69c7",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Allowed?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.living_room_entertainment_control",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 360,
        "y": 920,
        "wires": [
            [
                "c1c0d3ee514fa085"
            ],
            []
        ]
    },
    {
        "id": "f505205962d4e214",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Allowed?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.living_room_entertainment_control",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 360,
        "y": 1000,
        "wires": [
            [
                "88580ff9416f69c7"
            ],
            []
        ]
    },
    {
        "id": "966547ac9d93eee1",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Allowed?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.living_room_entertainment_control",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "control",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 280,
        "y": 1060,
        "wires": [
            [
                "3596959961544947"
            ],
            []
        ]
    },
    {
        "id": "63a9f9055e287a53",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Allowed?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.living_room_entertainment_control",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "control",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 280,
        "y": 1140,
        "wires": [
            [
                "24c5dfc33d4685c2"
            ],
            []
        ]
    },
    {
        "id": "0845a18537933359",
        "type": "api-current-state",
        "z": "b0286fae9f2ce547",
        "name": "Allowed?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.living_room_entertainment_control",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "control",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 280,
        "y": 1100,
        "wires": [
            [
                "0968727f2138ac62"
            ],
            []
        ]
    },
    {
        "id": "8e399b2a287a0905",
        "type": "ha-time",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Master Bedroom Cooling",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityId": "input_datetime.master_bedroom_cooling",
        "property": "",
        "offset": "0",
        "offsetType": "num",
        "offsetUnits": "minutes",
        "randomOffset": false,
        "repeatDaily": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "mrbedroom-cooling",
                "valueType": "str"
            }
        ],
        "sunday": true,
        "monday": true,
        "tuesday": true,
        "wednesday": true,
        "thursday": true,
        "friday": true,
        "saturday": true,
        "debugenabled": false,
        "x": 170,
        "y": 260,
        "wires": [
            [
                "ed6649edf0128951"
            ]
        ]
    },
    {
        "id": "314752dbc6fd170d",
        "type": "ha-time",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Master Bedroom Fan",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityId": "input_datetime.master_bedroom_fan",
        "property": "",
        "offset": "0",
        "offsetType": "num",
        "offsetUnits": "minutes",
        "randomOffset": false,
        "repeatDaily": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "mrbedroom-fan",
                "valueType": "str"
            }
        ],
        "sunday": true,
        "monday": true,
        "tuesday": true,
        "wednesday": true,
        "thursday": true,
        "friday": true,
        "saturday": true,
        "debugenabled": false,
        "x": 160,
        "y": 320,
        "wires": [
            [
                "ed6649edf0128951"
            ]
        ]
    },
    {
        "id": "d7261338e6b907f1",
        "type": "ha-time",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Master Bedroom Wakeup",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityId": "input_datetime.master_bedroom_wakeup",
        "property": "",
        "offset": "0",
        "offsetType": "num",
        "offsetUnits": "minutes",
        "randomOffset": false,
        "repeatDaily": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "mrbedroom-wakeup",
                "valueType": "str"
            }
        ],
        "sunday": true,
        "monday": true,
        "tuesday": true,
        "wednesday": true,
        "thursday": true,
        "friday": true,
        "saturday": true,
        "debugenabled": false,
        "x": 170,
        "y": 380,
        "wires": [
            [
                "ed6649edf0128951"
            ]
        ]
    },
    {
        "id": "49ad25e2bcd710b0",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Tonight's Low Temp",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "49",
        "halt_if_type": "num",
        "halt_if_compare": "gt",
        "entity_id": "sensor.tonights_low_temp",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "lowtemp",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1490,
        "y": 240,
        "wires": [
            [
                "0deeaa74dd6c25c5"
            ],
            []
        ]
    },
    {
        "id": "fa2b43f4eec9f89a",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Vacation Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.vacation_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 540,
        "y": 360,
        "wires": [
            [
                "bd5119ed04776902"
            ],
            []
        ],
        "outputLabels": [
            "Off",
            "On"
        ]
    },
    {
        "id": "6fb7131d5534350c",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Tonight's Low Temp",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "40",
        "halt_if_type": "num",
        "halt_if_compare": "gt",
        "entity_id": "sensor.tonights_low_temp",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "lowtemp",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1090,
        "y": 360,
        "wires": [
            [
                "bf1b0d6542ef6b38"
            ],
            []
        ]
    },
    {
        "id": "0deeaa74dd6c25c5",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": ">55 / <55",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "55",
        "halt_if_type": "num",
        "halt_if_compare": "gt",
        "entity_id": "sensor.tonights_low_temp",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "lowtemp",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1680,
        "y": 240,
        "wires": [
            [
                "fd0a309681a536de"
            ],
            [
                "40dc1e930b887eb7"
            ]
        ]
    },
    {
        "id": "fd0a309681a536de",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set to Cool",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_hvac_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"hvac_mode\":\"cool\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1850,
        "y": 220,
        "wires": [
            [
                "20f407c978d14863"
            ]
        ]
    },
    {
        "id": "444acaf315688ac9",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set Temp",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"temperature\": msg.nighttemp\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2400,
        "y": 160,
        "wires": [
            [
                "7659d7b193fc7fb5"
            ]
        ]
    },
    {
        "id": "40dc1e930b887eb7",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set to Fan",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_hvac_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"hvac_mode\":\"fan_only\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1850,
        "y": 300,
        "wires": [
            [
                "36c671c1520680e7"
            ]
        ]
    },
    {
        "id": "c0408b03c3cf8f23",
        "type": "change",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Too cold outside, AC running fan only due to low of lowtemp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "AC Schedule Skipped",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "lowtemp",
                "fromt": "str",
                "to": "lowtemp",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2340,
        "y": 280,
        "wires": [
            [
                "0652e441425c3875"
            ]
        ]
    },
    {
        "id": "a06c762d2c1117ea",
        "type": "subflow:6528a66fc0f094dd",
        "z": "72f99805df043603",
        "name": "",
        "x": 250,
        "y": 20,
        "wires": []
    },
    {
        "id": "0652e441425c3875",
        "type": "link out",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "MB Cooling",
        "mode": "link",
        "links": [
            "aba7b09fe1ea30df"
        ],
        "x": 2475,
        "y": 280,
        "wires": []
    },
    {
        "id": "aba7b09fe1ea30df",
        "type": "link in",
        "z": "72f99805df043603",
        "name": "Climate Notifier",
        "links": [
            "0652e441425c3875",
            "f36181bb272eabe8",
            "b9e8acfb06e816f7"
        ],
        "x": 65,
        "y": 20,
        "wires": [
            [
                "a06c762d2c1117ea"
            ]
        ]
    },
    {
        "id": "9949527a728eaf42",
        "type": "change",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Master bedroom AC temp has been set to nighttemp as scheduled based on tonight's forecast low of lowtemp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "AC Schedule Activated",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "nighttemp",
                "fromt": "str",
                "to": "nighttemp",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "lowtemp",
                "fromt": "str",
                "to": "lowtemp",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2720,
        "y": 160,
        "wires": [
            [
                "0652e441425c3875"
            ]
        ]
    },
    {
        "id": "bf1b0d6542ef6b38",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Turn Fan On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.master_bedroom_fan_socket_1"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1290,
        "y": 360,
        "wires": [
            [
                "c324cf8a87c3b388"
            ]
        ]
    },
    {
        "id": "512b9dd5177ebeec",
        "type": "change",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Master bedroom fan has been activated, as scheduled based on tonight's forecast low of lowtemp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Fan Schedule Activated",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "lowtemp",
                "fromt": "str",
                "to": "lowtemp",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 360,
        "wires": [
            [
                "f36181bb272eabe8"
            ]
        ]
    },
    {
        "id": "f36181bb272eabe8",
        "type": "link out",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "MB Fan",
        "mode": "link",
        "links": [
            "aba7b09fe1ea30df"
        ],
        "x": 1755,
        "y": 360,
        "wires": []
    },
    {
        "id": "7d9666e1ce61f8df",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "High above 80",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "80",
        "halt_if_type": "num",
        "halt_if_compare": "gt",
        "entity_id": "sensor.todays_high_temp",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "hightemp",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1280,
        "y": 500,
        "wires": [
            [
                "24c3166123d5dad0"
            ],
            [
                "b14bcbf98b7e9f91"
            ]
        ]
    },
    {
        "id": "24c3166123d5dad0",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set to Cool",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_hvac_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"hvac_mode\":\"cool\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1470,
        "y": 480,
        "wires": [
            [
                "efe1917ebdcef673"
            ]
        ]
    },
    {
        "id": "40f52ef656550cf6",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set Temp",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"temperature\": msg.daytemp\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2020,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "b14bcbf98b7e9f91",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Turn off AC",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_hvac_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"hvac_mode\":\"off\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1470,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "e473da127624f191",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Turn off Fan",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.master_bedroom_echo_dot_do_not_disturb_switch",
            "switch.master_bedroom_fan_socket_1"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1270,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "ed6649edf0128951",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Enabled?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.master_bedroom_nighttime_protocol",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 380,
        "y": 360,
        "wires": [
            [
                "fa2b43f4eec9f89a"
            ],
            []
        ]
    },
    {
        "id": "20f407c978d14863",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Eco Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_preset_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"preset_mode\":\"none\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2020,
        "y": 200,
        "wires": [
            [
                "a11946e3ceb59514"
            ]
        ]
    },
    {
        "id": "36c671c1520680e7",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Eco Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_preset_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"preset_mode\":\"none\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2020,
        "y": 280,
        "wires": [
            [
                "c6537f1924370c8c"
            ]
        ]
    },
    {
        "id": "efe1917ebdcef673",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Eco On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_preset_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"preset_mode\":\"eco\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1640,
        "y": 460,
        "wires": [
            [
                "2915ba19778e3fee"
            ]
        ]
    },
    {
        "id": "d5784e5baa80a105",
        "type": "ha-time",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Kallen Bedtime",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityId": "input_datetime.kallen_bedtime",
        "property": "",
        "offset": "0",
        "offsetType": "num",
        "offsetUnits": "minutes",
        "randomOffset": false,
        "repeatDaily": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "kallen-night",
                "valueType": "str"
            }
        ],
        "sunday": true,
        "monday": true,
        "tuesday": true,
        "wednesday": true,
        "thursday": true,
        "friday": true,
        "saturday": true,
        "debugenabled": false,
        "x": 120,
        "y": 740,
        "wires": [
            [
                "39d187b7e17d80ab"
            ]
        ]
    },
    {
        "id": "9e1418c3e9595312",
        "type": "ha-time",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Kallen Wakeup",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityId": "input_datetime.kallen_wakeup_time",
        "property": "",
        "offset": "0",
        "offsetType": "num",
        "offsetUnits": "minutes",
        "randomOffset": false,
        "repeatDaily": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "kallen-morning",
                "valueType": "str"
            }
        ],
        "sunday": true,
        "monday": true,
        "tuesday": true,
        "wednesday": true,
        "thursday": true,
        "friday": true,
        "saturday": true,
        "debugenabled": false,
        "x": 120,
        "y": 820,
        "wires": [
            [
                "39d187b7e17d80ab"
            ]
        ]
    },
    {
        "id": "3166f71fdf62748a",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Kallen Overnight",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.kallen_overnight",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 550,
        "y": 780,
        "wires": [
            [
                "4792e2d88f7d533f"
            ],
            []
        ],
        "outputLabels": [
            "Off",
            "On"
        ]
    },
    {
        "id": "4792e2d88f7d533f",
        "type": "switch",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "kallen-morning",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "kallen-night",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 780,
        "wires": [
            [
                "d132875202e85038"
            ],
            [
                "92c0fceb3205cad9"
            ]
        ]
    },
    {
        "id": "92c0fceb3205cad9",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Temperature < 40",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "40",
        "halt_if_type": "num",
        "halt_if_compare": "lt",
        "entity_id": "sensor.pirateweather_temperature",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 350,
        "y": 880,
        "wires": [
            [
                "6e10b32a122e8a2c"
            ],
            [
                "2f3666d288d77ad1"
            ]
        ]
    },
    {
        "id": "6e10b32a122e8a2c",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Lights On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [
            "kallen_bedroom",
            "upstairs_bathroom",
            "upstairs_hallway"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 540,
        "y": 860,
        "wires": [
            [
                "99e74844b8fd9d1a",
                "cc1af8532e3dc820"
            ]
        ]
    },
    {
        "id": "99e74844b8fd9d1a",
        "type": "delay",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 700,
        "y": 840,
        "wires": [
            [
                "da1a1f23bf9429c5"
            ]
        ]
    },
    {
        "id": "da1a1f23bf9429c5",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Volume Set",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "volume_set",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kallen_bedroom_speaker"
        ],
        "data": "{\t    \"volume_level\": 0.3\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 870,
        "y": 840,
        "wires": [
            [
                "6418c17768ed363d"
            ]
        ]
    },
    {
        "id": "6418c17768ed363d",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "White Noise On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.white_noise_kallen_bedroom"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1060,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "2f3666d288d77ad1",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Lights On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [
            "kallen_bedroom",
            "upstairs_bathroom",
            "upstairs_hallway"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 540,
        "y": 960,
        "wires": [
            [
                "265b54394cc42f53"
            ]
        ]
    },
    {
        "id": "ed138e629ed0809f",
        "type": "delay",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 920,
        "y": 960,
        "wires": [
            [
                "73b51e79d20c7982"
            ]
        ]
    },
    {
        "id": "73b51e79d20c7982",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Volume Set",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "volume_set",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kallen_bedroom_speaker"
        ],
        "data": "{\t    \"volume_level\": 0.3\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1090,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "265b54394cc42f53",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Fan On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "fan",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "fan.kallen_fan_socket_1"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 700,
        "y": 960,
        "wires": [
            [
                "ed138e629ed0809f",
                "eb0e4c095dbe898e"
            ]
        ]
    },
    {
        "id": "d132875202e85038",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Fan Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "fan",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "fan.kallen_fan_socket_1"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 920,
        "y": 780,
        "wires": [
            [
                "a6f4af0aaabcc2c1"
            ]
        ]
    },
    {
        "id": "a6f4af0aaabcc2c1",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "White Noise Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.white_noise_kallen_bedroom"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1100,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "b4dbbf788c5a30d2",
        "type": "subflow:6429099c4571dd6b",
        "z": "72f99805df043603",
        "name": "",
        "x": 740,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "6f595f2a4713d76d",
        "type": "link in",
        "z": "72f99805df043603",
        "name": "Climate Speech Engine",
        "links": [
            "fce2383754c91a31"
        ],
        "x": 605,
        "y": 20,
        "wires": [
            [
                "b4dbbf788c5a30d2"
            ]
        ]
    },
    {
        "id": "eb0e4c095dbe898e",
        "type": "change",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Colin's fan is now on. Stay cool!",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "everywhere",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "voice",
                "pt": "msg",
                "to": "Emma",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 1020,
        "wires": [
            [
                "fce2383754c91a31"
            ]
        ]
    },
    {
        "id": "fce2383754c91a31",
        "type": "link out",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Kallen Bedtime Protocol",
        "mode": "link",
        "links": [
            "6f595f2a4713d76d"
        ],
        "x": 1075,
        "y": 1020,
        "wires": []
    },
    {
        "id": "cc1af8532e3dc820",
        "type": "change",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "No fan in Colin's room tonight, too cold outside! Brrrr!",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "everywhere",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "voice",
                "pt": "msg",
                "to": "Emma",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 900,
        "wires": [
            [
                "fce2383754c91a31"
            ]
        ]
    },
    {
        "id": "a11946e3ceb59514",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check Night Temp",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_number.master_bedroom_night_temp",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "nighttemp",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 2210,
        "y": 180,
        "wires": [
            [
                "444acaf315688ac9"
            ]
        ]
    },
    {
        "id": "2915ba19778e3fee",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check Day Temp",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_number.master_bedroom_daytime_temp",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "daytemp",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1830,
        "y": 440,
        "wires": [
            [
                "40f52ef656550cf6"
            ]
        ]
    },
    {
        "id": "dc440dfc78c41b8a",
        "type": "link in",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Good Morning - Climate",
        "links": [
            "5c9c73b7adb72896"
        ],
        "x": 415,
        "y": 320,
        "wires": [
            [
                "fa2b43f4eec9f89a"
            ]
        ]
    },
    {
        "id": "99f6abc4d215980a",
        "type": "switch",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "mrbedroom-cooling",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "mrbedroom-fan",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "mrbedroom-wakeup",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 890,
        "y": 360,
        "wires": [
            [
                "10d9b30654ef759c"
            ],
            [
                "6fb7131d5534350c"
            ],
            [
                "0a783dc1cb68b4bf"
            ]
        ]
    },
    {
        "id": "1aa901d26ce8ac46",
        "type": "ha-button",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "MB Night Mode",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "be9ed28696adcdb0",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "manual-night",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 740,
        "y": 180,
        "wires": [
            [
                "6fb7131d5534350c",
                "f6e9317205ba7c78"
            ]
        ]
    },
    {
        "id": "7659d7b193fc7fb5",
        "type": "switch",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "manual-night",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2550,
        "y": 160,
        "wires": [
            [
                "9949527a728eaf42"
            ]
        ]
    },
    {
        "id": "21001f5409130f44",
        "type": "ha-button",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "MB Day Mode",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "59cb8692ed7accd1",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "manual-day",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 1070,
        "y": 420,
        "wires": [
            [
                "90afa6409f3fcac3"
            ]
        ]
    },
    {
        "id": "9179e99207e9f8f3",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set Temp",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"temperature\": msg.bedtemp\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 980,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "7674985a03ff3355",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check Bedtime Temp",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_number.master_bedroom_bedtime_temp",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "bedtemp",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 760,
        "y": 100,
        "wires": [
            [
                "9179e99207e9f8f3"
            ]
        ]
    },
    {
        "id": "1f7ac875e593d434",
        "type": "ha-button",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "MB Bedtime Mode",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "9c63750f16f845ea",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "manual-bedtime",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 130,
        "y": 160,
        "wires": [
            [
                "6e89b3464496e0e8"
            ]
        ]
    },
    {
        "id": "63c1bc35f7c35360",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check A/C State",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "cool",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "climate.master_bedroom_aircon",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 540,
        "y": 100,
        "wires": [
            [
                "7674985a03ff3355"
            ],
            []
        ],
        "outputLabels": [
            "Cool",
            "Not Cool"
        ]
    },
    {
        "id": "bc592ba259667f9d",
        "type": "link in",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Goodnight - Climate",
        "links": [
            "028351e8c4e2faf5"
        ],
        "x": 195,
        "y": 100,
        "wires": [
            [
                "929b5cd6a4d7dc30"
            ]
        ]
    },
    {
        "id": "39d187b7e17d80ab",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Vacation Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.vacation_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 340,
        "y": 780,
        "wires": [
            [
                "3166f71fdf62748a"
            ],
            []
        ],
        "outputLabels": [
            "Off",
            "On"
        ]
    },
    {
        "id": "404c42d6fea46839",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set to Cool",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_hvac_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"hvac_mode\":\"cool\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 530,
        "y": 160,
        "wires": [
            [
                "7674985a03ff3355"
            ]
        ]
    },
    {
        "id": "929b5cd6a4d7dc30",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check A/C Installed",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.master_bedroom_aircon_installed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ac-installed",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 100,
        "wires": [
            [
                "63c1bc35f7c35360"
            ],
            []
        ]
    },
    {
        "id": "bd5119ed04776902",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check A/C Installed",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.master_bedroom_aircon_installed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ac-installed",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 730,
        "y": 360,
        "wires": [
            [
                "99f6abc4d215980a"
            ],
            [
                "99f6abc4d215980a"
            ]
        ],
        "outputLabels": [
            "on",
            "off"
        ]
    },
    {
        "id": "a1ca104dbc102bfc",
        "type": "switch",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Is A/C Installed?",
        "property": "ac-installed",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1080,
        "y": 240,
        "wires": [
            [
                "a1315d3be8da5c2f"
            ],
            []
        ],
        "outputLabels": [
            "Yes",
            "No"
        ]
    },
    {
        "id": "ab9ff37610258694",
        "type": "switch",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Is A/C Installed?",
        "property": "ac-installed",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1080,
        "y": 500,
        "wires": [
            [
                "7d9666e1ce61f8df",
                "e473da127624f191"
            ],
            [
                "e473da127624f191"
            ]
        ],
        "outputLabels": [
            "Yes",
            "No"
        ]
    },
    {
        "id": "49eadd57e9728914",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "Announce Bedtime",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "status_annc",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"who\":\"basement\",\t    \"call_time_for_bed\": 1\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 350,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "1ad455bccec8ab46",
        "type": "inject",
        "z": "72f99805df043603",
        "g": "39a7ac02f2727f1d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 940,
        "wires": [
            [
                "49eadd57e9728914"
            ]
        ]
    },
    {
        "id": "7a7f626dce181b23",
        "type": "link in",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Shower Mode - Climate",
        "links": [
            "31b8c8291d19ffc6"
        ],
        "x": 95,
        "y": 500,
        "wires": [
            [
                "fa78faf38adfa49d"
            ]
        ]
    },
    {
        "id": "cefb338fa0c6931e",
        "type": "switch",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 290,
        "y": 560,
        "wires": [
            [
                "f541ad53e32f703b"
            ],
            [
                "9af6e13ddc0391f1"
            ]
        ]
    },
    {
        "id": "f541ad53e32f703b",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set to Dry",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_hvac_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"hvac_mode\":\"dry\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 440,
        "y": 520,
        "wires": [
            [
                "66e85878d60c7d65"
            ]
        ]
    },
    {
        "id": "66e85878d60c7d65",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Eco Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_preset_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"preset_mode\":\"none\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 580,
        "y": 520,
        "wires": [
            [
                "f797103d28ab6d1c"
            ]
        ]
    },
    {
        "id": "f797103d28ab6d1c",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check Night Temp",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_number.master_bedroom_night_temp",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "nighttemp",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 750,
        "y": 520,
        "wires": [
            [
                "bcba065aa5ecb2be"
            ]
        ]
    },
    {
        "id": "bcba065aa5ecb2be",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set Temp",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_temperature",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"temperature\": msg.nighttemp\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 920,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "10d9b30654ef759c",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Turn on boolean",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.master_bedroom_cooling_on"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 880,
        "y": 240,
        "wires": [
            [
                "a1ca104dbc102bfc"
            ]
        ]
    },
    {
        "id": "0a783dc1cb68b4bf",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Turn off boolean",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.master_bedroom_cooling_on"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 880,
        "y": 460,
        "wires": [
            [
                "ab9ff37610258694"
            ]
        ]
    },
    {
        "id": "9af6e13ddc0391f1",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Cooling State",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.master_bedroom_cooling_on",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 460,
        "y": 600,
        "wires": [
            [
                "11ed2afea8133e8f"
            ],
            [
                "be70ec3d9b852b89"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "11ed2afea8133e8f",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set night mode",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "button",
        "service": "press",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "button.master_bedroom_night_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 660,
        "y": 580,
        "wires": [
            [
                "ae35b5c6578777a0"
            ]
        ]
    },
    {
        "id": "ae35b5c6578777a0",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set Fan to Auto",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_fan_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"fan_mode\":\"Auto\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 860,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "be70ec3d9b852b89",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set day mode",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "button",
        "service": "press",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "button.master_bedroom_day_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 660,
        "y": 640,
        "wires": [
            [
                "81901cd811f2c733"
            ]
        ]
    },
    {
        "id": "81901cd811f2c733",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set Fan to Auto",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_fan_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"fan_mode\":\"Auto\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 860,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "6c06c2eec1583c66",
        "type": "comment",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Shower Mode",
        "info": "",
        "x": 130,
        "y": 560,
        "wires": []
    },
    {
        "id": "0c680585239e7f60",
        "type": "comment",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Goodnight",
        "info": "",
        "x": 100,
        "y": 120,
        "wires": []
    },
    {
        "id": "e2581a5f3f4888df",
        "type": "comment",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Main Flow",
        "info": "",
        "x": 540,
        "y": 300,
        "wires": []
    },
    {
        "id": "c6537f1924370c8c",
        "type": "switch",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "manual-night",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2170,
        "y": 280,
        "wires": [
            [
                "c0408b03c3cf8f23"
            ]
        ]
    },
    {
        "id": "c324cf8a87c3b388",
        "type": "switch",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "manual-night",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1450,
        "y": 360,
        "wires": [
            [
                "512b9dd5177ebeec"
            ]
        ]
    },
    {
        "id": "6e89b3464496e0e8",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check A/C Installed",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.master_bedroom_aircon_installed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ac-installed",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 160,
        "wires": [
            [
                "404c42d6fea46839"
            ],
            []
        ]
    },
    {
        "id": "a1315d3be8da5c2f",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Shower Mode?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.shower_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "shower-mode",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1280,
        "y": 240,
        "wires": [
            [],
            [
                "49ad25e2bcd710b0"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "f6e9317205ba7c78",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check A/C Installed",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.master_bedroom_aircon_installed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ac-installed",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 950,
        "y": 180,
        "wires": [
            [
                "a1ca104dbc102bfc"
            ],
            [
                "a1ca104dbc102bfc"
            ]
        ],
        "outputLabels": [
            "on",
            "off"
        ]
    },
    {
        "id": "90afa6409f3fcac3",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check A/C Installed",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.master_bedroom_aircon_installed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ac-installed",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1270,
        "y": 420,
        "wires": [
            [
                "ab9ff37610258694"
            ],
            [
                "ab9ff37610258694"
            ]
        ],
        "outputLabels": [
            "on",
            "off"
        ]
    },
    {
        "id": "fa78faf38adfa49d",
        "type": "api-current-state",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Check A/C Installed",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.master_bedroom_aircon_installed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ac-installed",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 230,
        "y": 500,
        "wires": [
            [
                "cefb338fa0c6931e"
            ],
            []
        ],
        "outputLabels": [
            "on",
            "off"
        ]
    },
    {
        "id": "1dfb0bcc98f1457b",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Set to Fan",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_hvac_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"hvac_mode\":\"fan_only\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1430,
        "y": 640,
        "wires": [
            [
                "096369136e9e607f"
            ]
        ]
    },
    {
        "id": "096369136e9e607f",
        "type": "api-call-service",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Eco Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "climate",
        "service": "set_preset_mode",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.master_bedroom_aircon"
        ],
        "data": "{\t    \"preset_mode\":\"none\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1600,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "783cfb381b70afc5",
        "type": "ha-button",
        "z": "72f99805df043603",
        "g": "e065b1ed4938b477",
        "name": "Fan Only",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "d3f8c4466cc1deeb",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 1260,
        "y": 640,
        "wires": [
            [
                "1dfb0bcc98f1457b"
            ]
        ]
    },
    {
        "id": "105271e0816c6a52",
        "type": "ha-button",
        "z": "5c4ac37140a54ac9",
        "name": "Good Morning",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "ad5b1d9f1ea8fea1",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "mrbedroom-wakeup",
                "valueType": "str"
            }
        ],
        "x": 110,
        "y": 60,
        "wires": [
            [
                "c01d647c6091a47b",
                "2854170262757e84"
            ]
        ]
    },
    {
        "id": "c01d647c6091a47b",
        "type": "file in",
        "z": "5c4ac37140a54ac9",
        "name": "Read File",
        "filename": "/config/files/weather_briefing_full.txt",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 280,
        "y": 60,
        "wires": [
            [
                "e59180a1a6ae0a90"
            ]
        ]
    },
    {
        "id": "b83b6e027c21a133",
        "type": "alexa-remote-routine",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "account": "be975ce229701797",
        "routineNode": {
            "type": "node",
            "payload": {
                "type": "serial",
                "children": [
                    {
                        "type": "wait",
                        "payload": {
                            "time": {
                                "type": "num",
                                "value": "1"
                            }
                        }
                    },
                    {
                        "type": "prompt",
                        "payload": {
                            "type": {
                                "type": "str",
                                "value": "goodMorning"
                            },
                            "devices": {
                                "type": "msg",
                                "value": "where"
                            }
                        }
                    },
                    {
                        "type": "speak",
                        "payload": {
                            "type": "regular",
                            "text": {
                                "type": "msg",
                                "value": "payload"
                            },
                            "devices": {
                                "type": "msg",
                                "value": "where"
                            }
                        }
                    },
                    {
                        "type": "prompt",
                        "payload": {
                            "type": {
                                "type": "str",
                                "value": "traffic"
                            },
                            "devices": {
                                "type": "msg",
                                "value": "where"
                            }
                        }
                    },
                    {
                        "type": "prompt",
                        "payload": {
                            "type": {
                                "type": "str",
                                "value": "calendarToday"
                            },
                            "devices": {
                                "type": "msg",
                                "value": "where"
                            }
                        }
                    },
                    {
                        "type": "prompt",
                        "payload": {
                            "type": {
                                "type": "str",
                                "value": "calendarTomorrow"
                            },
                            "devices": {
                                "type": "msg",
                                "value": "where"
                            }
                        }
                    }
                ]
            }
        },
        "x": 660,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "2854170262757e84",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Turn off switches",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.basement_echo_dot_do_not_disturb_switch",
            "switch.living_room_echo_dot_do_not_disturb_switch",
            "switch.master_bedroom_echo_dot_do_not_disturb_switch"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 310,
        "y": 120,
        "wires": [
            [
                "5c9c73b7adb72896"
            ]
        ]
    },
    {
        "id": "6f84caa4bd59a747",
        "type": "ha-button",
        "z": "5c4ac37140a54ac9",
        "name": "Weather Briefing",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "a8da4d03a2922c42",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            }
        ],
        "x": 120,
        "y": 580,
        "wires": [
            [
                "fa09d8a69bcbfbb5"
            ]
        ]
    },
    {
        "id": "ba97906b7b81342c",
        "type": "ha-button",
        "z": "5c4ac37140a54ac9",
        "name": "Goodnight",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "30f1658baee9378e",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            }
        ],
        "x": 100,
        "y": 180,
        "wires": [
            [
                "f30486c8e11db0e4",
                "d9e39b8ebb86c941",
                "582a6e14b94a5a6d",
                "57772c8b792e014d",
                "028351e8c4e2faf5",
                "f935318d262547d5",
                "60ce44747cf3e507"
            ]
        ]
    },
    {
        "id": "f30486c8e11db0e4",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Sleep Mode",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.basement_echo_dot_do_not_disturb_switch",
            "switch.living_room_echo_dot_do_not_disturb_switch",
            "switch.master_bedroom_echo_dot_do_not_disturb_switch"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 310,
        "y": 180,
        "wires": [
            [
                "2916b53a91f17ca1"
            ]
        ]
    },
    {
        "id": "f84c9f54acbdafd0",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Lights Out",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [
            "basement_studio",
            "dining_room",
            "downstairs_bathroom",
            "furnace_room",
            "kallen_bedroom",
            "living_room",
            "master_bedroom",
            "mud_room",
            "nursery",
            "upstairs_hallway"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 690,
        "y": 220,
        "wires": [
            [
                "09c7a61f7a4c4d05"
            ]
        ]
    },
    {
        "id": "d9e39b8ebb86c941",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Kallen Desktop - Shutdown",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "kallen_desktop_shutdown",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 360,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "e59180a1a6ae0a90",
        "type": "subflow:a42343e035e3313c",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "x": 460,
        "y": 60,
        "wires": [
            [
                "b83b6e027c21a133"
            ]
        ]
    },
    {
        "id": "582a6e14b94a5a6d",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Basement Fan Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "fan",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "fan.basement_fan"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 330,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "e18616ffd95b1074",
        "type": "amazon-echo-hub",
        "z": "5c4ac37140a54ac9",
        "port": "80",
        "processinput": 0,
        "discovery": true,
        "x": 55,
        "y": 640,
        "wires": [
            [
                "932df233e423c6ed"
            ]
        ],
        "l": false
    },
    {
        "id": "932df233e423c6ed",
        "type": "amazon-echo-device",
        "z": "5c4ac37140a54ac9",
        "name": "Virtual Scenes Light",
        "topic": "virtual_scenes_light",
        "x": 220,
        "y": 640,
        "wires": [
            [
                "466b39f277505de4"
            ]
        ]
    },
    {
        "id": "f76504ca785dfba6",
        "type": "debug",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 640,
        "wires": []
    },
    {
        "id": "466b39f277505de4",
        "type": "function",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "func": "if (msg.percentage === 1) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 2) {\n    msg.topic = \"downstairs_bathroom\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 3) {\n    msg.topic = \"dining_room_lamp\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 4) {\n    msg.topic = \"mud_room\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 5) {\n    msg.topic = \"upstairs_hallway\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 6) {\n    msg.topic = \"upstairs_bathroom\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 7) {\n    msg.topic = \"master_bedroom\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 8) {\n    msg.topic = \"kallen_bedroom\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 9) {\n    msg.topic = \"nursery\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 10) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Reset\"\n} else if (msg.percentage === 11) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 12) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 13) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 14) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Energize\"\n} else if (msg.percentage === 15) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Concentrate\"\n} else if (msg.percentage === 16) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Savanna Sunset\"\n} else if (msg.percentage === 17) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Tropical Twilight\"\n} else if (msg.percentage === 18) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Tokyo\"\n} else if (msg.percentage === 19) {\n    msg.topic = \"living_room\",\n    msg.payload = \"Forest Adventure\"\n} else if (msg.percentage === 20) {\n    msg.topic = \"downstairs_bathroom\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 21) {\n    msg.topic = \"downstairs_bathroom\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 22) {\n    msg.topic = \"downstairs_bathroom\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 23) {\n    msg.topic = \"mud_room\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 24) {\n    msg.topic = \"mud_room\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 25) {\n    msg.topic = \"mud_room\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 26) {\n    msg.topic = \"upstairs_hallway\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 27) {\n    msg.topic = \"upstairs_hallway\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 28) {\n    msg.topic = \"upstairs_hallway\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 29) {\n    msg.topic = \"upstairs_bathroom\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 30) {\n    msg.topic = \"upstairs_bathroom\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 31) {\n    msg.topic = \"upstairs_bathroom\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 32) {\n    msg.topic = \"upstairs_bathroom\",\n    msg.payload = \"Single Nightlight\"\n} else if (msg.percentage === 33) {\n    msg.topic = \"master_bedroom\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 34) {\n    msg.topic = \"master_bedroom\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 35) {\n    msg.topic = \"master_bedroom\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 36) {\n    msg.topic = \"master_bedroom\",\n    msg.payload = \"Front Nightlight\"\n} else if (msg.percentage === 37) {\n    msg.topic = \"master_bedroom\",\n    msg.payload = \"Side Nightlight\"\n} else if (msg.percentage === 38) {\n    msg.topic = \"kallen_bedroom\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 39) {\n    msg.topic = \"kallen_bedroom\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 40) {\n    msg.topic = \"kallen_bedroom\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 41) {\n    msg.topic = \"nursery\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 42) {\n    msg.topic = \"nursery\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 43) {\n    msg.topic = \"nursery\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 44) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Energize\"\n} else if (msg.percentage === 45) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Concentrate\"\n} else if (msg.percentage === 46) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Bright\"\n} else if (msg.percentage === 47) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Dimmed\"\n} else if (msg.percentage === 48) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Nightlight\"\n} else if (msg.percentage === 49) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Relax\"\n} else if (msg.percentage === 50) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Purple\"\n} else if (msg.percentage === 51) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Pink\"\n} else if (msg.percentage === 52) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Kallen Reading\"\n} else if (msg.percentage === 53) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Baby Is Napping\"\n} else if (msg.percentage === 54) {\n    msg.topic = \"basement_studio\",\n    msg.payload = \"Stairwell\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 640,
        "wires": [
            [
                "442e52ed95a5fd73"
            ]
        ]
    },
    {
        "id": "442e52ed95a5fd73",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Set Scene",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.{{topic}}_scenes"
        ],
        "data": "{\t    \"option\": msg.payload\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 590,
        "y": 640,
        "wires": [
            [
                "f76504ca785dfba6"
            ]
        ]
    },
    {
        "id": "a58bc61a625f47af",
        "type": "ha-button",
        "z": "5c4ac37140a54ac9",
        "name": "Daily Briefing",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "998d8d67ec377dd3",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            }
        ],
        "x": 110,
        "y": 700,
        "wires": [
            [
                "1d121bd0f1f5d628"
            ]
        ]
    },
    {
        "id": "5eb7493d13b65a60",
        "type": "debug",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 700,
        "wires": []
    },
    {
        "id": "804c40c435c342fc",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Script",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "daily_briefing",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"who\": msg.who\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 510,
        "y": 700,
        "wires": [
            [
                "5eb7493d13b65a60"
            ]
        ]
    },
    {
        "id": "57772c8b792e014d",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Night Mode On",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.night_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 320,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "09c7a61f7a4c4d05",
        "type": "api-current-state",
        "z": "5c4ac37140a54ac9",
        "name": "Check Security",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.stratton_ave_alarm",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1060,
        "y": 180,
        "wires": [
            [
                "280e2a7895ca63fb"
            ],
            []
        ]
    },
    {
        "id": "280e2a7895ca63fb",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Arm Security",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "security_arm_home",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1250,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "28a99bbb21540cbc",
        "type": "debug",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 580,
        "wires": []
    },
    {
        "id": "3363b9392f425a55",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Script",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "weather_briefing",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"who\": msg.who\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 530,
        "y": 580,
        "wires": [
            [
                "28a99bbb21540cbc"
            ]
        ]
    },
    {
        "id": "fa09d8a69bcbfbb5",
        "type": "subflow:05a2d9f89e72481f",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "x": 340,
        "y": 580,
        "wires": [
            [
                "3363b9392f425a55"
            ]
        ]
    },
    {
        "id": "1d121bd0f1f5d628",
        "type": "subflow:05a2d9f89e72481f",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "x": 320,
        "y": 700,
        "wires": [
            [
                "804c40c435c342fc"
            ]
        ]
    },
    {
        "id": "5c9c73b7adb72896",
        "type": "link out",
        "z": "5c4ac37140a54ac9",
        "name": "Good Morning Output",
        "mode": "link",
        "links": [
            "dc440dfc78c41b8a"
        ],
        "x": 455,
        "y": 120,
        "wires": []
    },
    {
        "id": "028351e8c4e2faf5",
        "type": "link out",
        "z": "5c4ac37140a54ac9",
        "name": "Goodnight Output - Climate",
        "mode": "link",
        "links": [
            "bc592ba259667f9d"
        ],
        "x": 255,
        "y": 240,
        "wires": []
    },
    {
        "id": "fcd7dc43a7618a0a",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Bathroom Nightlight",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.upstairs_bathroom_scenes"
        ],
        "data": "{\t    \"option\":\"Single Nightlight\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 650,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "f935318d262547d5",
        "type": "api-current-state",
        "z": "5c4ac37140a54ac9",
        "name": "Kallen Overnight?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.kallen_overnight",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 330,
        "y": 500,
        "wires": [
            [
                "26454728352212e8"
            ],
            [
                "fcd7dc43a7618a0a"
            ]
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "26454728352212e8",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Bathroom Off",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.upstairs_bathroom_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 630,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "60ce44747cf3e507",
        "type": "link out",
        "z": "5c4ac37140a54ac9",
        "name": "Goodnight Output - Lighting",
        "mode": "link",
        "links": [
            "55e84ccb73ae9b74"
        ],
        "x": 255,
        "y": 280,
        "wires": []
    },
    {
        "id": "fe338e85c7419657",
        "type": "ha-button",
        "z": "5c4ac37140a54ac9",
        "name": "Kallen School Status",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "d9da4bd707013bc5",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            }
        ],
        "x": 130,
        "y": 760,
        "wires": [
            [
                "ed96b2ce33128205"
            ]
        ]
    },
    {
        "id": "ed96b2ce33128205",
        "type": "subflow:05a2d9f89e72481f",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "x": 360,
        "y": 760,
        "wires": [
            [
                "08eafe762d6146ee"
            ]
        ]
    },
    {
        "id": "08eafe762d6146ee",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Script",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "kallen_school_status",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"who\": msg.who\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 550,
        "y": 760,
        "wires": [
            [
                "e39da18ec3ecc852"
            ]
        ]
    },
    {
        "id": "e39da18ec3ecc852",
        "type": "debug",
        "z": "5c4ac37140a54ac9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 760,
        "wires": []
    },
    {
        "id": "2916b53a91f17ca1",
        "type": "api-current-state",
        "z": "5c4ac37140a54ac9",
        "name": "Guest Mode?",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.guest_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "guest",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 500,
        "y": 180,
        "wires": [
            [
                "8a473793e8acc9db"
            ],
            [
                "f84c9f54acbdafd0"
            ]
        ]
    },
    {
        "id": "8a473793e8acc9db",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Lights Out",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [
            "basement_studio",
            "dining_room",
            "downstairs_bathroom",
            "furnace_room",
            "kallen_bedroom",
            "living_room",
            "master_bedroom",
            "nursery"
        ],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 689,
        "y": 157,
        "wires": [
            [
                "2dba21a1c020e079"
            ]
        ]
    },
    {
        "id": "2dba21a1c020e079",
        "type": "api-call-service",
        "z": "5c4ac37140a54ac9",
        "name": "Nightlights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.mud_room_scenes",
            "input_select.upstairs_hallway_scenes"
        ],
        "data": "{\t    \"option\":\"Nightlight\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 870,
        "y": 160,
        "wires": [
            [
                "09c7a61f7a4c4d05"
            ]
        ]
    },
    {
        "id": "6a37c598ccfec0c7",
        "type": "google-home",
        "z": "75e98103856848a6",
        "conf": "457914a2c9dc72c1",
        "device": "20328",
        "acknowledge": true,
        "name": "",
        "topic": "tester of testiness",
        "x": 250,
        "y": 240,
        "wires": [
            [
                "ef99a4a89289098c"
            ]
        ]
    },
    {
        "id": "ef99a4a89289098c",
        "type": "debug",
        "z": "75e98103856848a6",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 470,
        "y": 240,
        "wires": []
    },
    {
        "id": "07a2f8b7e49040f8",
        "type": "file in",
        "z": "75e98103856848a6",
        "name": "Read File",
        "filename": "/config/files/weather_briefing_full.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 480,
        "y": 340,
        "wires": [
            [
                "0249c367ffa0a6a1"
            ]
        ]
    },
    {
        "id": "d8d284802d3ba380",
        "type": "ha-button",
        "z": "75e98103856848a6",
        "name": "Weather Briefing Google",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "8860321096392e94",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "Kallen Bedroom",
                "valueType": "str"
            }
        ],
        "x": 270,
        "y": 340,
        "wires": [
            [
                "07a2f8b7e49040f8"
            ]
        ]
    },
    {
        "id": "0249c367ffa0a6a1",
        "type": "subflow:6429099c4571dd6b",
        "z": "75e98103856848a6",
        "name": "",
        "x": 660,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "223a7234238933a7",
        "type": "ha-button",
        "z": "75e98103856848a6",
        "name": "Daily Briefing Google",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "9c84afc610ced7b6",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "Kallen Bedroom",
                "valueType": "str"
            }
        ],
        "x": 260,
        "y": 400,
        "wires": [
            [
                "eb4220bac4e72e88"
            ]
        ]
    },
    {
        "id": "eb4220bac4e72e88",
        "type": "api-call-service",
        "z": "75e98103856848a6",
        "name": "Speech Engine",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "speech_engine",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"who\":\"kallen_bedroom\",\t    \"message\":\"!include ../templates/speech/daily_briefing.yaml\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 480,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "6059344e8c26ac8c",
        "type": "ha-button",
        "z": "75e98103856848a6",
        "name": "Kallen School Status Google",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "2c222901ee192ba1",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "Kallen Bedroom",
                "valueType": "str"
            }
        ],
        "x": 280,
        "y": 460,
        "wires": [
            [
                "dc94d479f37be046"
            ]
        ]
    },
    {
        "id": "dc94d479f37be046",
        "type": "api-call-service",
        "z": "75e98103856848a6",
        "name": "Speech Engine",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "speech_engine",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"who\":\"kallen_bedroom\",\t    \"message\":\"!include ../templates/speech/kallen_school_status.yaml\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 520,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "14c6951746b58a38",
        "type": "server-events",
        "z": "bb961e59e2ef86c9",
        "name": "iOS Action Fired",
        "server": "9e87348d.9c1c48",
        "version": 1,
        "event_type": "ios.action_fired",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 220,
        "y": 360,
        "wires": [
            [
                "533921a587f031d4"
            ]
        ]
    },
    {
        "id": "533921a587f031d4",
        "type": "switch",
        "z": "bb961e59e2ef86c9",
        "name": "",
        "property": "payload.event.actionName",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "mb-climate",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Goodnight",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Give Me Darkness",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "lights",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 390,
        "y": 360,
        "wires": [
            [
                "65240dc52617459d"
            ],
            [
                "bc5f205fd5e7582e"
            ],
            [
                "1516f464e4d87c56"
            ],
            [
                "e21a948e9523bce7"
            ]
        ]
    },
    {
        "id": "65240dc52617459d",
        "type": "switch",
        "z": "bb961e59e2ef86c9",
        "name": "Climate",
        "property": "payload.event.actionName",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "manual-day",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "manual-night",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 580,
        "y": 260,
        "wires": [
            [
                "d3763c0194214956"
            ],
            [
                "638703bd017d6e5b"
            ]
        ]
    },
    {
        "id": "d3763c0194214956",
        "type": "api-call-service",
        "z": "bb961e59e2ef86c9",
        "name": "MB Climate Manual Day",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "button",
        "service": "press",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "button.master_bedroom_day_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 790,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "638703bd017d6e5b",
        "type": "api-call-service",
        "z": "bb961e59e2ef86c9",
        "name": "MB Climate Manual Night",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "button",
        "service": "press",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "button.master_bedroom_night_mode"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 790,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "bc5f205fd5e7582e",
        "type": "api-call-service",
        "z": "bb961e59e2ef86c9",
        "name": "Goodnight",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "button",
        "service": "press",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "button.goodnight"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 750,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "1516f464e4d87c56",
        "type": "api-call-service",
        "z": "bb961e59e2ef86c9",
        "name": "Give Me Darkness",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "script",
        "service": "give_me_darkness",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "e21a948e9523bce7",
        "type": "switch",
        "z": "bb961e59e2ef86c9",
        "name": "Lights",
        "property": "payload.event.actionName",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "floor",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 570,
        "y": 480,
        "wires": [
            [
                "6ec2fd7aaaf1fc98"
            ],
            [
                "89f6119d5702185b"
            ]
        ]
    },
    {
        "id": "6ec2fd7aaaf1fc98",
        "type": "switch",
        "z": "bb961e59e2ef86c9",
        "name": "Floors",
        "property": "payload.event.actionName",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "second",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "first",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 480,
        "wires": [
            [
                "c5e9589db7e0b0bf"
            ],
            [
                "50cf93faa2e3996c"
            ]
        ]
    },
    {
        "id": "c5e9589db7e0b0bf",
        "type": "api-call-service",
        "z": "bb961e59e2ef86c9",
        "name": "Second Floor",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.second_floor_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 950,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "50cf93faa2e3996c",
        "type": "api-call-service",
        "z": "bb961e59e2ef86c9",
        "name": "First Floor",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.first_floor_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 940,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "89f6119d5702185b",
        "type": "function",
        "z": "bb961e59e2ef86c9",
        "name": "Rooms",
        "func": "var room = msg.payload.event.actionName\n\nif (room === \"lights-basement-studio\") {\n    msg.room = \"light.basement_studio_lights\"\n} else if (room === \"lights-living-room\") {\n    msg.room = \"light.living_room_lights\"\n} else if (room === \"lights-dining-room-lamp\") {\n    msg.room = \"light.dining_room_lamp\"\n} else if (room === \"lights-tina-lamp\") {\n    msg.room = \"light.tina_lamp\"\n} else if (room === \"lights-mud-room\") {\n    msg.room = \"light.mud_room_overhead\"\n} else if (room === \"lights-upstairs-hallway\") {\n    msg.room = \"light.hallway_overhead\"\n} else if (room === \"lights-upstairs-bathroom\") {\n    msg.room = \"light.upstairs_bathroom_lights\"\n} else if (room === \"lights-master-bedroom\") {\n    msg.room = \"light.master_bedroom_lights\"\n} else if (room === \"lights-kallen-bedroom\") {\n    msg.room = \"light.kallen_bedroom_lights\"\n} else if (room === \"lights-nursery\") {\n    msg.room = \"light.nursery_light\"\n} else if (room === \"lights-front-porch\") {\n    msg.room = \"light.front_porch_light\"\n} else if (room === \"lights-furnace-room\") {\n    msg.room = \"light.furnace_room_overhead\"\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 580,
        "wires": [
            [
                "15ae48c0b6e70f36"
            ]
        ]
    },
    {
        "id": "15ae48c0b6e70f36",
        "type": "api-call-service",
        "z": "bb961e59e2ef86c9",
        "name": "Toggle Lights",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "{{room}}"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 950,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "a4c477269b22f766",
        "type": "ha-button",
        "z": "ee67610b4a0578d2",
        "name": "Send Button",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "f14ef3df2209e9a7",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            }
        ],
        "x": 110,
        "y": 40,
        "wires": [
            [
                "155b26ba197473e4"
            ]
        ]
    },
    {
        "id": "155b26ba197473e4",
        "type": "api-current-state",
        "z": "ee67610b4a0578d2",
        "name": "Message",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_text.tts_message",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 280,
        "y": 40,
        "wires": [
            [
                "3153371fe2de6f8e"
            ]
        ]
    },
    {
        "id": "3153371fe2de6f8e",
        "type": "api-current-state",
        "z": "ee67610b4a0578d2",
        "name": "Destination",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.tts_devices",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 450,
        "y": 40,
        "wires": [
            [
                "91c224b7d6f0d32e"
            ]
        ]
    },
    {
        "id": "9cafa6212280b2d5",
        "type": "ha-button",
        "z": "ee67610b4a0578d2",
        "name": "Reset Button",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "1c6757ac2fa1a199",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "Words go here and stuff",
                "valueType": "str"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "Living Room",
                "valueType": "str"
            },
            {
                "property": "voice",
                "propertyType": "msg",
                "value": "Brian",
                "valueType": "str"
            }
        ],
        "x": 110,
        "y": 100,
        "wires": [
            [
                "5095d45c90d5304f"
            ]
        ]
    },
    {
        "id": "5095d45c90d5304f",
        "type": "api-call-service",
        "z": "ee67610b4a0578d2",
        "name": "Reset Message",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_text",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_text.tts_message"
        ],
        "data": "{\t    \"value\": msg.payload\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 300,
        "y": 100,
        "wires": [
            [
                "3ae21589dd88c080"
            ]
        ]
    },
    {
        "id": "3ae21589dd88c080",
        "type": "api-call-service",
        "z": "ee67610b4a0578d2",
        "name": "Reset Devices List",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.tts_devices"
        ],
        "data": "{\t    \"option\": msg.topic\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 510,
        "y": 100,
        "wires": [
            [
                "b2bc83c9195efe0f"
            ]
        ]
    },
    {
        "id": "93b7bee28a7e896e",
        "type": "subflow:6429099c4571dd6b",
        "z": "ee67610b4a0578d2",
        "name": "",
        "x": 780,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "91c224b7d6f0d32e",
        "type": "api-current-state",
        "z": "ee67610b4a0578d2",
        "name": "Voice",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.announcement_voice",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "voice",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 610,
        "y": 40,
        "wires": [
            [
                "93b7bee28a7e896e"
            ]
        ]
    },
    {
        "id": "b2bc83c9195efe0f",
        "type": "api-call-service",
        "z": "ee67610b4a0578d2",
        "name": "Reset Voice",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.announcement_voice"
        ],
        "data": "{\t    \"option\": msg.voice\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 710,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "5d7c63526234945e",
        "type": "api-render-template",
        "z": "ebd5561c4f077718",
        "name": "",
        "server": "9e87348d.9c1c48",
        "version": 0,
        "template": "{{ states('sensor.current_conditions_detail') }} \n{{ states('sensor.tomorrow_forecast_detail') }} \n{{ states('sensor.clothing_forecast_detail') }}",
        "resultsLocation": "payload",
        "resultsLocationType": "msg",
        "templateLocation": "template",
        "templateLocationType": "msg",
        "x": 280,
        "y": 180,
        "wires": [
            [
                "4eda62ff7310026d"
            ]
        ]
    },
    {
        "id": "7aaddacf84721c78",
        "type": "inject",
        "z": "ebd5561c4f077718",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 180,
        "wires": [
            [
                "5d7c63526234945e"
            ]
        ]
    },
    {
        "id": "4eda62ff7310026d",
        "type": "function",
        "z": "ebd5561c4f077718",
        "name": "",
        "func": "str = msg.payload\nmsg.payload = str.replaceAll(\"possible.\",\"possible. \")\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 180,
        "wires": [
            [
                "6b5d3e550ad76528"
            ]
        ]
    },
    {
        "id": "6b5d3e550ad76528",
        "type": "file",
        "z": "ebd5561c4f077718",
        "name": "",
        "filename": "/config/files/weather_briefing_full.txt",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 680,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "1031080bdf3b95bf",
        "type": "server-state-changed",
        "z": "789ba711dc04fad2",
        "name": "Twitch Stream Status",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.twitch_ironnerd24",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "streaming",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 140,
        "y": 220,
        "wires": [
            [
                "aee33a6f3ea97d9d"
            ],
            [
                "0ea48caad418290a"
            ]
        ],
        "outputLabels": [
            "Live",
            "Offline"
        ]
    },
    {
        "id": "cacac13b4d0c7f07",
        "type": "api-call-service",
        "z": "789ba711dc04fad2",
        "name": "Notify Living Room TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "living_room_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": \"Stream Starting\",\t    \"message\": \"Tony has started a live stream in the studio!\",\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"red\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 780,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "574f6c6e7bd1b747",
        "type": "api-call-service",
        "z": "789ba711dc04fad2",
        "name": "Notify Master Bedroom TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "master_bedroom_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": \"Stream Starting\",\t    \"message\": \"Tony has started a live stream in the studio!\",\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"red\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 800,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "2c677d9d0250ba8c",
        "type": "api-call-service",
        "z": "789ba711dc04fad2",
        "name": "Notify Basement TV",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "basement_tv",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\": \"Stream Starting\",\t    \"message\": \"Tony has started a live stream in the studio!\",\t    \"data\": {\t        fontsize: \"large\",\t        duration: 3,\t        transparency: \"30%\",\t        color: \"red\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 780,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "dcf595a3aeb025a4",
        "type": "api-call-service",
        "z": "789ba711dc04fad2",
        "name": "Turn on boolean",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.stream_online"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 760,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "21deb99e77dfa74d",
        "type": "api-call-service",
        "z": "789ba711dc04fad2",
        "name": "Turn off boolean",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.stream_online"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 760,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "0ea48caad418290a",
        "type": "api-current-state",
        "z": "789ba711dc04fad2",
        "name": "Vacation Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.vacation_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "vacation",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 360,
        "y": 260,
        "wires": [
            [
                "8e858e7fb6a75a5b"
            ],
            []
        ],
        "outputLabels": [
            "Off",
            "On"
        ]
    },
    {
        "id": "aee33a6f3ea97d9d",
        "type": "api-current-state",
        "z": "789ba711dc04fad2",
        "name": "Vacation Mode",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.vacation_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "vacation",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 360,
        "y": 200,
        "wires": [
            [
                "5b46031b9a69e041"
            ],
            []
        ],
        "outputLabels": [
            "Off",
            "On"
        ]
    },
    {
        "id": "8e858e7fb6a75a5b",
        "type": "api-current-state",
        "z": "789ba711dc04fad2",
        "name": "People Present",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.people_present",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 560,
        "y": 260,
        "wires": [
            [
                "21deb99e77dfa74d"
            ],
            []
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "5b46031b9a69e041",
        "type": "api-current-state",
        "z": "789ba711dc04fad2",
        "name": "People Present",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.people_present",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 560,
        "y": 200,
        "wires": [
            [
                "dcf595a3aeb025a4",
                "2c677d9d0250ba8c",
                "574f6c6e7bd1b747",
                "cacac13b4d0c7f07"
            ],
            []
        ],
        "outputLabels": [
            "On",
            "Off"
        ]
    },
    {
        "id": "c2972c7728c99c43",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Conversions",
        "func": "msg.payload = (msg.payload / 1024000000)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 180,
        "wires": [
            [
                "bc09f451754ba126"
            ]
        ]
    },
    {
        "id": "bc09f451754ba126",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Rounding",
        "func": "var readout = msg.payload\n\nmsg.payload = +readout.toFixed(2)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 180,
        "wires": [
            [
                "6cf8f103906c1a49"
            ]
        ]
    },
    {
        "id": "fdefcd6a64aa9bca",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "CPU Temp",
        "topic": "glances/basement-server/sensors/Package_id_0/value",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 60,
        "wires": [
            [
                "1d09b6c6a3773d9a"
            ]
        ]
    },
    {
        "id": "1d09b6c6a3773d9a",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - CPU Temperature",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - CPU Temperature"
            },
            {
                "property": "device_class",
                "value": "temperature"
            },
            {
                "property": "icon",
                "value": "mdi:thermometer"
            },
            {
                "property": "unit_of_measurement",
                "value": "C"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 350,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "6cf8f103906c1a49",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - Memory Used",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - Memory Used"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:memory"
            },
            {
                "property": "unit_of_measurement",
                "value": "GB"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 700,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "da305ace22579c07",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "Memory Used",
        "topic": "glances/basement-server/mem/used",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 180,
        "wires": [
            [
                "c2972c7728c99c43"
            ]
        ]
    },
    {
        "id": "7ecdec08d9698a19",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "CPU Usage",
        "topic": "glances/basement-server/cpu/total",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 120,
        "wires": [
            [
                "9c9d7870a5204f13"
            ]
        ]
    },
    {
        "id": "9c9d7870a5204f13",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - CPU Usage",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - CPU Usage"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:speedometer"
            },
            {
                "property": "unit_of_measurement",
                "value": "%"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 350,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "1b5678e80095a461",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "Uptime",
        "topic": "glances/basement-server/uptime/seconds",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 90,
        "y": 300,
        "wires": [
            [
                "c88179f1facb8646"
            ]
        ]
    },
    {
        "id": "5248dc02bf48733e",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - Uptime",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - Uptime"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:timer-outline"
            },
            {
                "property": "unit_of_measurement",
                "value": "hours"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 640,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "c88179f1facb8646",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Conversions",
        "func": "msg.payload = (msg.payload / 60) / 60\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 300,
        "wires": [
            [
                "7af97720032b4609"
            ]
        ]
    },
    {
        "id": "7af97720032b4609",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Rounding",
        "func": "var readout = msg.payload\n\nmsg.payload = +readout.toFixed(2)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 300,
        "wires": [
            [
                "5248dc02bf48733e"
            ]
        ]
    },
    {
        "id": "08aadf619537949e",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "Memory Usage",
        "topic": "glances/basement-server/mem/percent",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 120,
        "y": 240,
        "wires": [
            [
                "d819e61c0895affe"
            ]
        ]
    },
    {
        "id": "d819e61c0895affe",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - Memory Usage",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - Memory Usage"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:memory"
            },
            {
                "property": "unit_of_measurement",
                "value": "%"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 380,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "a0adec284cd8162a",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "Free Space - /",
        "topic": "glances/basement-server/fs/_/free",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 360,
        "wires": [
            [
                "46e0046a27f4bc89"
            ]
        ]
    },
    {
        "id": "46e0046a27f4bc89",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Conversions",
        "func": "msg.payload = (msg.payload / 1024000000)\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 360,
        "wires": [
            [
                "a6038f6bd028bd2f"
            ]
        ]
    },
    {
        "id": "a6038f6bd028bd2f",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Rounding",
        "func": "var readout = msg.payload\n\nmsg.payload = +readout.toFixed(2)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 360,
        "wires": [
            [
                "8006b0b34776ec34"
            ]
        ]
    },
    {
        "id": "8006b0b34776ec34",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - Free Space Root",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - Free Space Root"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:harddisk"
            },
            {
                "property": "unit_of_measurement",
                "value": "GB"
            },
            {
                "property": "state_class",
                "value": ""
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 710,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "b109c8db1c2cd259",
        "type": "ha-button",
        "z": "ffa6a885ac41a5ed",
        "name": "Restart AppDaemon",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "04976a7418728aa3",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "date"
            }
        ],
        "x": 130,
        "y": 720,
        "wires": [
            [
                "75a50e8dac7af692"
            ]
        ]
    },
    {
        "id": "75a50e8dac7af692",
        "type": "api-call-service",
        "z": "ffa6a885ac41a5ed",
        "name": "",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "hassio",
        "service": "addon_restart",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"addon\":\"a0d7b954_appdaemon\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 360,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "d5c7d4f4714a6cd6",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "CPU Load - 1 min",
        "topic": "glances/basement-server/load/min1",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 420,
        "wires": [
            [
                "5fa5b04e2b1b3ae2"
            ]
        ]
    },
    {
        "id": "d1ac8b45d7baa4ed",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "CPU Load - 5 min",
        "topic": "glances/basement-server/load/min5",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 480,
        "wires": [
            [
                "6f429b0dcaa5c607"
            ]
        ]
    },
    {
        "id": "35847fc20196c4ce",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "CPU Load - 15 min",
        "topic": "glances/basement-server/load/min15",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 540,
        "wires": [
            [
                "9f53af3ad747cd62"
            ]
        ]
    },
    {
        "id": "5fa5b04e2b1b3ae2",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - CPU Average Loads 1 min",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - CPU Average Loads 1 min"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:speedometer"
            },
            {
                "property": "unit_of_measurement",
                "value": ""
            },
            {
                "property": "state_class",
                "value": "measurement"
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 440,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "6f429b0dcaa5c607",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - CPU Average Loads 5 min",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - CPU Average Loads 5 min"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:speedometer"
            },
            {
                "property": "unit_of_measurement",
                "value": ""
            },
            {
                "property": "state_class",
                "value": "measurement"
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 440,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "9f53af3ad747cd62",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Basement Server - CPU Average Loads 15 min",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - CPU Average Loads 15 min"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:speedometer"
            },
            {
                "property": "unit_of_measurement",
                "value": ""
            },
            {
                "property": "state_class",
                "value": "measurement"
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 440,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "c002b47a53a0e203",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "Network RX",
        "topic": "glances/basement-server/network/enp4s0/rx",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 600,
        "wires": [
            [
                "a46a88d4fb03cceb"
            ]
        ]
    },
    {
        "id": "0008fb5b70ae6aea",
        "type": "mqtt in",
        "z": "ffa6a885ac41a5ed",
        "name": "Network TX",
        "topic": "glances/basement-server/network/enp4s0/tx",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "fd29421fc00140a8",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 660,
        "wires": [
            [
                "67119024666b68bd"
            ]
        ]
    },
    {
        "id": "a46a88d4fb03cceb",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Conversions",
        "func": "msg.payload = msg.payload / 1000000\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 600,
        "wires": [
            [
                "8d26310ed06bb045"
            ]
        ]
    },
    {
        "id": "8d26310ed06bb045",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Rounding",
        "func": "var readout = msg.payload\n\nmsg.payload = +readout.toFixed(2)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 600,
        "wires": [
            [
                "80d831ad0265a01f"
            ]
        ]
    },
    {
        "id": "67119024666b68bd",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Conversions",
        "func": "msg.payload = msg.payload / 1000000\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 660,
        "wires": [
            [
                "e235145192886939"
            ]
        ]
    },
    {
        "id": "e235145192886939",
        "type": "function",
        "z": "ffa6a885ac41a5ed",
        "name": "Rounding",
        "func": "var readout = msg.payload\n\nmsg.payload = +readout.toFixed(2)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 660,
        "wires": [
            [
                "069a7ab44b04c9ef"
            ]
        ]
    },
    {
        "id": "80d831ad0265a01f",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Network RX",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - Network RX"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:download-network"
            },
            {
                "property": "unit_of_measurement",
                "value": "MB/s"
            },
            {
                "property": "state_class",
                "value": "measurement"
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 630,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "069a7ab44b04c9ef",
        "type": "ha-entity",
        "z": "ffa6a885ac41a5ed",
        "name": "Network TX",
        "server": "9e87348d.9c1c48",
        "version": 2,
        "debugenabled": false,
        "outputs": 1,
        "entityType": "sensor",
        "config": [
            {
                "property": "name",
                "value": "Basement Server - Network TX"
            },
            {
                "property": "device_class",
                "value": ""
            },
            {
                "property": "icon",
                "value": "mdi:upload-network"
            },
            {
                "property": "unit_of_measurement",
                "value": "MB/s"
            },
            {
                "property": "state_class",
                "value": "measurement"
            },
            {
                "property": "last_reset",
                "value": ""
            }
        ],
        "state": "payload",
        "stateType": "msg",
        "attributes": [],
        "resend": true,
        "outputLocation": "payload",
        "outputLocationType": "none",
        "inputOverride": "allow",
        "outputOnStateChange": false,
        "outputPayload": "",
        "outputPayloadType": "str",
        "x": 630,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "baae5d6f53900594",
        "type": "ha-button",
        "z": "ffa6a885ac41a5ed",
        "name": "Cleanup",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "a11aaf0288452997",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "cleanup",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "x": 100,
        "y": 780,
        "wires": [
            [
                "619d1474239faf58"
            ]
        ]
    },
    {
        "id": "619d1474239faf58",
        "type": "link out",
        "z": "ffa6a885ac41a5ed",
        "name": "Cleanup",
        "mode": "link",
        "links": [
            "6a1cecedd6ef4b44"
        ],
        "x": 215,
        "y": 780,
        "wires": []
    },
    {
        "id": "9dad92b6532b305a",
        "type": "todoist-task-create",
        "z": "d35726cd69e1aeff",
        "name": "",
        "token": "f19eac517a138c66",
        "x": 970,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "f803c6af3a30eb66",
        "type": "ha-button",
        "z": "d35726cd69e1aeff",
        "name": "Send Report",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "675dd216a61c575b",
        "outputProperties": [],
        "x": 150,
        "y": 180,
        "wires": [
            [
                "c3dc3b15f1261b9f"
            ]
        ]
    },
    {
        "id": "c3dc3b15f1261b9f",
        "type": "api-current-state",
        "z": "d35726cd69e1aeff",
        "name": "Get Text",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_text.report_system",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "text",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 320,
        "y": 180,
        "wires": [
            [
                "3c0e9baa492b618a"
            ]
        ]
    },
    {
        "id": "3c0e9baa492b618a",
        "type": "api-current-state",
        "z": "d35726cd69e1aeff",
        "name": "Get Type",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.report_type",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "type",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 480,
        "y": 180,
        "wires": [
            [
                "a6234b2047ba3116"
            ]
        ]
    },
    {
        "id": "3bd7704103dbfc20",
        "type": "template",
        "z": "d35726cd69e1aeff",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"content\": \"{{text}}\",\n    \"project_id\": 2285967948,\n    \"section_id\": {{type}}\n}",
        "output": "str",
        "x": 800,
        "y": 180,
        "wires": [
            [
                "9dad92b6532b305a"
            ]
        ]
    },
    {
        "id": "a6234b2047ba3116",
        "type": "function",
        "z": "d35726cd69e1aeff",
        "name": "",
        "func": "if (msg.type === \"New Idea\") {\n    msg.type = \"81234669\"\n} else if (msg.type === \"Bug Report\") {\n    msg.type = \"94865633\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 180,
        "wires": [
            [
                "3bd7704103dbfc20"
            ]
        ]
    },
    {
        "id": "788eb0a1551db9b8",
        "type": "ha-button",
        "z": "d35726cd69e1aeff",
        "name": "Reset Report",
        "version": 0,
        "debugenabled": false,
        "outputs": 1,
        "entityConfig": "7df85e301aad3a3d",
        "outputProperties": [
            {
                "property": "text",
                "propertyType": "msg",
                "value": "Type your report here",
                "valueType": "str"
            },
            {
                "property": "type",
                "propertyType": "msg",
                "value": "Bug Report",
                "valueType": "str"
            }
        ],
        "x": 150,
        "y": 280,
        "wires": [
            [
                "7674185d1e5ee489",
                "427cc2991454bbf0"
            ]
        ]
    },
    {
        "id": "7674185d1e5ee489",
        "type": "api-call-service",
        "z": "d35726cd69e1aeff",
        "name": "Reset Text",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_text",
        "service": "set_value",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_text.report_system"
        ],
        "data": "{\t    \"value\": msg.text\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 330,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "427cc2991454bbf0",
        "type": "api-call-service",
        "z": "d35726cd69e1aeff",
        "name": "Reset Type",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "input_select",
        "service": "select_option",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_select.report_type"
        ],
        "data": "{\t    \"option\": msg.type\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 330,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "e8d2135bb5564a4a",
        "type": "server-state-changed",
        "z": "3e4ba157b540d183",
        "name": "Voice Change",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_select.jarvis_voice",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 40,
        "wires": [
            [
                "1c84bd4e8ca6566d"
            ]
        ]
    },
    {
        "id": "1c84bd4e8ca6566d",
        "type": "function",
        "z": "3e4ba157b540d183",
        "name": "Store Voice Variable",
        "func": "global.set('jarvis_voice',msg.payload);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "4d724735025b0ed8",
        "type": "server-state-changed",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Work Today",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "input_boolean.work_today",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "x": 130,
        "y": 300,
        "wires": [
            [
                "6ec62f6cf4fcf994"
            ]
        ]
    },
    {
        "id": "6ec62f6cf4fcf994",
        "type": "switch",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 300,
        "wires": [
            [
                "ca8ea9d126cc13ae"
            ]
        ]
    },
    {
        "id": "ca8ea9d126cc13ae",
        "type": "function",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Store to Variable",
        "func": "global.set('tinawork',msg.payload);\n\nreturn msg;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 300,
        "wires": []
    },
    {
        "id": "71bee01e93d372c4",
        "type": "inject",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 01 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "off",
        "payloadType": "str",
        "x": 130,
        "y": 420,
        "wires": [
            [
                "2d16941f87588a72"
            ]
        ]
    },
    {
        "id": "2d16941f87588a72",
        "type": "function",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Store to Variable",
        "func": "global.set('tinawork',msg.payload);\n\nreturn msg;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 420,
        "wires": []
    },
    {
        "id": "31ce8ad28dd41226",
        "type": "api-render-template",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Offset Before",
        "server": "9e87348d.9c1c48",
        "version": 0,
        "template": "{{ (state_attr('input_datetime.tina_workday_end', 'timestamp') - 3600) | timestamp_custom('%H:%M', false) }}",
        "resultsLocation": "start",
        "resultsLocationType": "msg",
        "templateLocation": "",
        "templateLocationType": "none",
        "x": 410,
        "y": 200,
        "wires": [
            [
                "20271b0662a4d5df"
            ]
        ]
    },
    {
        "id": "20271b0662a4d5df",
        "type": "api-render-template",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Offset After",
        "server": "9e87348d.9c1c48",
        "version": 0,
        "template": "{{ (state_attr('input_datetime.tina_workday_end', 'timestamp') + 5400) | timestamp_custom('%H:%M', false) }}",
        "resultsLocation": "stop",
        "resultsLocationType": "msg",
        "templateLocation": "",
        "templateLocationType": "none",
        "x": 590,
        "y": 200,
        "wires": [
            [
                "16bf625c802d7910"
            ]
        ]
    },
    {
        "id": "69886cf636bf4f70",
        "type": "inject",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Set Schedule",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "00 06 * * *",
        "once": false,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 200,
        "wires": [
            [
                "31ce8ad28dd41226"
            ]
        ]
    },
    {
        "id": "16bf625c802d7910",
        "type": "function",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "",
        "func": "msg.payload = {\n    \"start\": msg.start,\n    \"stop\": msg.stop,\n    \"days\": [\n        1,\n        2,\n        3,\n        4,\n        5,\n        6,\n        7\n    ]\n}\nmsg.topic = \"override\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 200,
        "wires": [
            [
                "39f78e9aa56bc51e"
            ]
        ]
    },
    {
        "id": "39f78e9aa56bc51e",
        "type": "link out",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Schedule Settings - Send",
        "mode": "link",
        "links": [
            "76f6b8bed6de3f97"
        ],
        "x": 875,
        "y": 200,
        "wires": []
    },
    {
        "id": "a32c37ccf0102258",
        "type": "inject",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Set Workday on Reboot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "120",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 360,
        "wires": [
            [
                "d5c6b45df763e57e"
            ]
        ]
    },
    {
        "id": "d5c6b45df763e57e",
        "type": "api-current-state",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Work Today",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.work_today",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 410,
        "y": 360,
        "wires": [
            [
                "ca8ea9d126cc13ae"
            ]
        ]
    },
    {
        "id": "6f011420f6bb15a7",
        "type": "inject",
        "z": "3e4ba157b540d183",
        "g": "5c50443a84910fb7",
        "name": "Set Schedule on Reboot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "120",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 240,
        "wires": [
            [
                "31ce8ad28dd41226"
            ]
        ]
    },
    {
        "id": "f6f45d3e3cf9aeab",
        "type": "inject",
        "z": "3e4ba157b540d183",
        "name": "Set Voice on Reboot",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "120",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 100,
        "wires": [
            [
                "40c9c33453179a21"
            ]
        ]
    },
    {
        "id": "40c9c33453179a21",
        "type": "api-current-state",
        "z": "3e4ba157b540d183",
        "name": "Jarvis Voice",
        "server": "9e87348d.9c1c48",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.jarvis_voice",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 350,
        "y": 100,
        "wires": [
            [
                "1c84bd4e8ca6566d"
            ]
        ]
    },
    {
        "id": "e038489eca14b1dd",
        "type": "discordMessage",
        "z": "d3dcbe534743b01d",
        "name": "",
        "token": "fd929ec3bfbeef1a",
        "x": 180,
        "y": 200,
        "wires": [
            [
                "a8a7658145e92c1d",
                "e05ecd981929376b"
            ]
        ]
    },
    {
        "id": "e5f2798df4bf16d6",
        "type": "debug",
        "z": "d3dcbe534743b01d",
        "name": "debug-pass",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 60,
        "wires": []
    },
    {
        "id": "a8a7658145e92c1d",
        "type": "switch",
        "z": "d3dcbe534743b01d",
        "name": "",
        "property": "member.roles",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "1002314506271203509",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": true,
        "outputs": 2,
        "x": 350,
        "y": 200,
        "wires": [
            [
                "e5f2798df4bf16d6",
                "8a2f04665191a1a7"
            ],
            [
                "7742083919fb7b59"
            ]
        ]
    },
    {
        "id": "7742083919fb7b59",
        "type": "debug",
        "z": "d3dcbe534743b01d",
        "name": "debug-fail",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 100,
        "wires": []
    },
    {
        "id": "c2b9267e3ea81cd4",
        "type": "discordMessageManager",
        "z": "d3dcbe534743b01d",
        "d": true,
        "name": "",
        "channel": "",
        "token": "fd929ec3bfbeef1a",
        "x": 750,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "8a2f04665191a1a7",
        "type": "change",
        "z": "d3dcbe534743b01d",
        "d": true,
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "channel",
                "pt": "msg",
                "to": "1002320534614323260",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Farts are fun",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 260,
        "wires": [
            [
                "c2b9267e3ea81cd4"
            ]
        ]
    },
    {
        "id": "d777145b11649c65",
        "type": "debug",
        "z": "d3dcbe534743b01d",
        "name": "debug-lights",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1470,
        "y": 320,
        "wires": []
    },
    {
        "id": "e05ecd981929376b",
        "type": "switch",
        "z": "d3dcbe534743b01d",
        "name": "Permissions",
        "property": "member.roles",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "1002314506271203509",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": true,
        "outputs": 1,
        "x": 370,
        "y": 420,
        "wires": [
            [
                "76d4b57e3b98e799"
            ]
        ]
    },
    {
        "id": "76d4b57e3b98e799",
        "type": "change",
        "z": "d3dcbe534743b01d",
        "name": "Prepare service data",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$split($trim($lowercase(payload)), \" \", 3)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 420,
        "wires": [
            [
                "64a02909ab4707e0"
            ]
        ]
    },
    {
        "id": "64a02909ab4707e0",
        "type": "switch",
        "z": "d3dcbe534743b01d",
        "name": "Service selection",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "light",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "temperature",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "humidity",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "help",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 810,
        "y": 420,
        "wires": [
            [
                "97bc11edf2480435"
            ],
            [],
            [],
            []
        ]
    },
    {
        "id": "97bc11edf2480435",
        "type": "change",
        "z": "d3dcbe534743b01d",
        "name": "Prepare light entity",
        "rules": [
            {
                "t": "set",
                "p": "payload[1]",
                "pt": "msg",
                "to": "$string(payload[0]) & \" \" & $string(payload[1]) & \" \" & $string(payload[2])",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload[0]",
                "pt": "msg",
                "to": "light",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload[1]",
                "pt": "msg",
                "from": "studio",
                "fromt": "str",
                "to": "basement_studio_lights",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload[2]",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "turn_off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1030,
        "y": 380,
        "wires": [
            [
                "c56e681e1210b7fb"
            ]
        ]
    },
    {
        "id": "c56e681e1210b7fb",
        "type": "template",
        "z": "d3dcbe534743b01d",
        "name": "Format service data",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"domain\": \"{{payload.0}}\",\n    \"service\": \"{{payload.2}}\",\n    \"data\": {\"entity_id\":\"{{payload.1}}\"}\n}",
        "output": "json",
        "x": 1260,
        "y": 380,
        "wires": [
            [
                "34bfc4d501d21f17",
                "d777145b11649c65"
            ]
        ]
    },
    {
        "id": "34bfc4d501d21f17",
        "type": "api-call-service",
        "z": "d3dcbe534743b01d",
        "name": "Call light service",
        "server": "9e87348d.9c1c48",
        "version": 5,
        "debugenabled": false,
        "domain": "",
        "service": "",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1480,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "6a28a84de488e39d",
        "type": "debug",
        "z": "d3dcbe534743b01d",
        "name": "fs22status",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 560,
        "wires": []
    },
    {
        "id": "229adf0d8b27fd7c",
        "type": "server-state-changed",
        "z": "d3dcbe534743b01d",
        "name": "FS22 Server Status",
        "server": "9e87348d.9c1c48",
        "version": 4,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.win10_vm_processactive",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 190,
        "y": 560,
        "wires": [
            [
                "305cc8b15072569c"
            ]
        ]
    },
    {
        "id": "305cc8b15072569c",
        "type": "switch",
        "z": "d3dcbe534743b01d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 560,
        "wires": [
            [
                "69b1f5484ee668b9"
            ],
            [
                "d8ace9a59d21cad0"
            ]
        ],
        "outputLabels": [
            "Up",
            "Down"
        ]
    },
    {
        "id": "d9170dbc46fa2c0b",
        "type": "discordMessageManager",
        "z": "d3dcbe534743b01d",
        "name": "Send Message",
        "channel": "",
        "token": "fd929ec3bfbeef1a",
        "x": 740,
        "y": 560,
        "wires": [
            [
                "6a28a84de488e39d"
            ]
        ]
    },
    {
        "id": "69b1f5484ee668b9",
        "type": "change",
        "z": "d3dcbe534743b01d",
        "name": "Up message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Farming Simulator 22 server is up and running!",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "channel",
                "pt": "msg",
                "to": "912503253973999617",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 520,
        "wires": [
            [
                "d9170dbc46fa2c0b"
            ]
        ]
    },
    {
        "id": "d8ace9a59d21cad0",
        "type": "change",
        "z": "d3dcbe534743b01d",
        "name": "Down message",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Farming Simulator 22 server is down!",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "channel",
                "pt": "msg",
                "to": "912503253973999617",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 580,
        "wires": [
            [
                "d9170dbc46fa2c0b"
            ]
        ]
    },
    {
        "id": "9c86355f531c84a2",
        "type": "hue-bridge-node",
        "z": "d49b385d8b582b20",
        "d": true,
        "name": "",
        "bridge": "359a4a5e8f156ab5",
        "autoupdates": true,
        "skipglobalevents": false,
        "initevents": false,
        "x": 310,
        "y": 140,
        "wires": [
            [
                "9b70596b25181506"
            ]
        ]
    },
    {
        "id": "9b70596b25181506",
        "type": "debug",
        "z": "d49b385d8b582b20",
        "d": true,
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 140,
        "wires": []
    },
    {
        "id": "7b20f670ec9cb8c5",
        "type": "inject",
        "z": "d49b385d8b582b20",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "fetch",
        "payloadType": "str",
        "x": 110,
        "y": 140,
        "wires": [
            [
                "9c86355f531c84a2"
            ]
        ]
    },
    {
        "id": "bf2ad73a.23bdb8",
        "type": "change",
        "z": "d49b385d8b582b20",
        "name": "Save Secret",
        "rules": [
            {
                "t": "set",
                "p": "#:(secrets)::secret_id",
                "pt": "global",
                "to": "secret_value",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "5c5c19b4.549de8",
        "type": "inject",
        "z": "d49b385d8b582b20",
        "name": "Press",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 240,
        "wires": [
            [
                "bf2ad73a.23bdb8"
            ]
        ]
    },
    {
        "id": "635934334d5cf6a5",
        "type": "http request",
        "z": "d49b385d8b582b20",
        "name": "Get Todoist API Info",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://api.todoist.com/sync/v8/sync?sync_token='*'&resource_types=[\"all\"]",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "bearer",
        "senderr": false,
        "x": 990,
        "y": 80,
        "wires": [
            [
                "c4b9e44cd5ad6448"
            ]
        ]
    },
    {
        "id": "c821804b2468d585",
        "type": "inject",
        "z": "d49b385d8b582b20",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 800,
        "y": 80,
        "wires": [
            [
                "635934334d5cf6a5"
            ]
        ]
    },
    {
        "id": "c4b9e44cd5ad6448",
        "type": "debug",
        "z": "d49b385d8b582b20",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1170,
        "y": 80,
        "wires": []
    },
    {
        "id": "2a6fe7c07c6b34e1",
        "type": "subflow:3aa2aec226246753",
        "z": "d49b385d8b582b20",
        "name": "",
        "x": 280,
        "y": 400,
        "wires": []
    },
    {
        "id": "942304b8743cdd40",
        "type": "inject",
        "z": "d49b385d8b582b20",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 400,
        "wires": [
            [
                "2a6fe7c07c6b34e1"
            ]
        ]
    }
]