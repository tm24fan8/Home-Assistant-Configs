>
  {# Daily Briefing #}
  {%- macro getReport() -%}
      <p>
        {% if now().strftime('%H')|int < 12 %}
          Good morning.
        {% elif now().strftime('%H')|int >= 12 and now().strftime('%H')|int < 17 %}
          Good afternoon.
        {% else %}
          Good evening.
        {% endif %}
      </p>

        {% if is_state('binary_sensor.morning','on') %}
          <p>
            Today is {{ states.sensor.today_is.state }}, {{ as_timestamp(now()) | timestamp_custom('%B %d %Y') }}.
          </p>
        {% else %}
          <p>
            It is {{ now().strftime("%I:%M %p") }}.
          </p>
        {% endif %}
      
      <p>
        The weather in Defiance is {{ state_attr('weather.iron_nerd_weather_station','temperature') | round }} degrees
        {% if is_state('weather.iron_nerd_weather_station','rainy') %}
          {{ [
          'with rain.',
          'with showers.'
          ] | random }}
        {% elif is_state('weather.iron_nerd_weather_station','cloudy') %}
          {{ [
          'with clouds.',
          'with cloudy skies.'
          ] | random }}
        {% elif is_state('weather.iron_nerd_weather_station','partlycloudy') %}
          {{ [
          'with some clouds.',
          'with partly cloudy skies.',
          'with scattered clouds.'
          ] | random }}
        {% elif is_state('weather.iron_nerd_weather_station','sunny') %}
          {% if is_state('sun.sun','above_horizon') %}
            {{ [
            'and sunny.',
            'with sun.'
            ] | random }}
          {% else %}
            {{ [
            'and clear.',
            'with clear skies.'
            ] | random }}
          {% endif %}
        {% else %}
          and {{ states.weather.iron_nerd_weather_station.state }}
        {% endif %}

        {% if states('sensor.weatheralerts_active_alerts') > '0' %}
          "Currently there are weather alerts active. The total number of alerts is {{ states('sensor.weatheralerts_active_alerts') }}. They are as follows. "
            {% if is_state('sensor.weatheralerts_alert_1','on') %}
              "{{ state_attr('sensor.weatheralerts_alert_1','alert_event') }}"
            {% endif %}
            {% if is_state('sensor.weatheralerts_alert_2','on') %}
              "{{ state_attr('sensor.weatheralerts_alert_2','alert_event') }}"
            {% endif %}
            {% if is_state('sensor.weatheralerts_alert_3','on') %}
              "{{ state_attr('sensor.weatheralerts_alert_3','alert_event') }}"
            {% endif %}
            {% if is_state('sensor.weatheralerts_alert_4','on') %}
              "{{ state_attr('sensor.weatheralerts_alert_4','alert_event') }}"
            {% endif %}
            {% if is_state('sensor.weatheralerts_alert_5','on') %}
              "{{ state_attr('sensor.weatheralerts_alert_5','alert_event') }}"
            {% endif %}
        {% endif %}
      </p>

      <p>
        {% if is_state('sun.sun','below_horizon') %}
          You have
          {% set seconds = as_timestamp(states.sun.sun.attributes.next_rising)-now().timestamp() %}
          {% set hours = seconds / 60 %}
          {% if seconds / ( 60 * 60 ) > 1 %}
            {{ (seconds // ( 60 * 60 )) | int }} hours
          {% else %}
            {{ (seconds // 60) | int }} minutes
          {% endif %}
          {{ [
          'until the sun rises.',
          'until the sun is up',
          'before the sun officially rises.'
          ] | random }}
        {% else %}
          You have
          {% set seconds = as_timestamp(states.sun.sun.attributes.next_setting)-now().timestamp() %}
          {% set hours = seconds / 60 %}
          {% if seconds / ( 60 * 60 ) > 1 %}
            {{ (seconds //  ( 60 * 60 )) | int }} hours
          {% else %}
            {{ (seconds // 60) | int }} minutes
          {% endif %}
          {{ [
            'until the sun sets for the day.',
            'until the sun slips below the horizon.',
            'before the sun officially sets. '
          ]|random }}
        {% endif %}
      </p>

      {% set dow = as_timestamp(now()) | timestamp_custom('%A') %}
      <p>
        Let me check the sit rep for today.

        {% if is_state('sensor.garbage_collection_large_pickup','1') %}
          'Tomorrow is the monthly unlimited garbage pickup. Make sure to take out all large garbage items tonight, and do not forget the trash can!'
        {% elif is_state('sensor.garbage_collection','1') %}
          {{ [
          'Do not forget to take the trash bin to the curb, tomorrow is trash pickup day.',
          'Make sure to take the trash out. No, I do not mean Tony.',
          'Tomorrow is a big day for the garbage men. Make sure you do not let them down! Take the trash out!'
          ] | random }}
        {% endif %}

        {% set gc = state_attr('sensor.garbage_collection','days') %}
        {% if gc == 7 %}
          {{ [
          'Do not forget to bring the trash can back from the curb.',
          'The trash can will feel lonely if you leave it at the curb all night.'
          ] | random }}
        {% elif gc == 6 %}
          {{ [
          'If you have not already, please remember to bring the garbage can back from the sidewalk.',
          'Just in case you forgot, it is time to bring the garbage can back to the house before it gets lonely.'
          ] | random }}
        {% endif %}

        {% if is_state('binary_sensor.evening','on') %}
          {% if is_state('sensor.anniversary_tony_s_birthday','0') %}
            Hope you had a happy birthday Tony!
          {% endif %}
          {% if is_state('sensor.anniversary_tina_s_birthday','0') %}
            Hope you had a happy birthday Tina!
          {% endif %}
          {% if is_state('sensor.anniversary_kallen_s_birthday','0') %}
            Hope you had a happy birthday Colin!
          {% endif %}
          {% if is_state('sensor.anniversary_emmalynn_s_birthday','0') %}
            Hope you had a happy birthday Emmalynn!
          {% endif %}

          {% if states.sensor.halloween_countdown.state | int == 1 %}
            Tomorrow is Halloween. I hope you have picked out a costume. I will be going as Tony. I'm scared just thinking about it!
          {% elif states.sensor.halloween_countdown.state | int < 30 %}
            There are only {{states.sensor.halloween_countdown.state}} days
            {{ [ 'until Halloween.',
            'until Halloween. It might not be enough time.',
            'until you need a costume.'
            ] | random }}
          {% else %}
          {% endif %}

          {% if states.sensor.christmas_countdown.state | int == 1 %}
            Tomorrow is Christmas. <break time="1s"/> It is practically here! <break time="1s"/> Santa is coming tonight! Do not forget the cookies!
          {% elif states.sensor.christmas_countdown.state | int < 31 %}
            There are only {{states.sensor.christmas_countdown.state}} days until Christmas.
            {{ [ 'All I want for Christmas is a Hippopotamus.',
            'Hey Colin, I know what you are getting for Christmas. But I am not telling.',
            'Do not forget to put something under the tree for your favorite <say-as interpret-as="characters">AI</say-as> this year!',
            'It is starting to smell a lot like Christmas. Or it could be that the christmas tree is on fire.',
            'I do not want to be a smarthome. I want to be a dentist.',
            'Do not eat all the cookies.',
            'All I want for Christmas is for Mariah Carey to get off my radio.'
            ] | random }}
          {% else %}
          {% endif %}

          {% if states.sensor.anniversary_wedding_anniversary.state | int == 1 %}
            Tomorrow is Tony and Christina's wedding anniversary!
          {% endif %}

          {% set tina = states.person.christina_stork.state %}
          {% if tina in ['Bob Evans','BobEvans'] and is_state('input_boolean.work_today','on') %}
            <s>Tina is at work right now. She will be done at approximately {{ (state_attr('input_datetime.tina_workday_end','timestamp') | int | timestamp_custom('%I:%M %p', False)) }}. </s>
          {% elif is_state('input_boolean.work_today','on') %}
            Tina has work today.
          {% endif %}

        
        {% else %}
          {% if is_state('sensor.halloween_countdown','0') %}
            Happy Halloween!
          {% endif %}
          {% if is_state('sensor.christmas_countdown','0') %}
            Merry Christmas!
          {% endif %}
          {% if is_state('sensor.anniversary_wedding_anniversary','0') %}
            Happy Anniversary! It has been an amazing {{ states.sensor.anniversary_wedding_anniversary.attributes.years }} years!
          {% endif %}
          {% if is_state('sensor.anniversary_tony_s_birthday','0') %}
            Happy Birthday Tony!
          {% endif %}
          {% if is_state('sensor.anniversary_tina_s_birthday','0') %}
            Happy Birthday Tina!
          {% endif %}
          {% if is_state('sensor.anniversary_kallen_s_birthday','0') %}
            Happy Birthday Colin!
          {% endif %}
          {% if is_state('sensor.anniversary_emmalynn_s_birthday','0') %}
            Happy Birthday Emmalynn!
          {% endif %}
          {%- set event=states.calendar.national_holidays.attributes.message %}
          {% if 'Day' in event and 'National' in event%}
            {{ [
              'Today is also known as ',
              'Today we are also celebrating'
          ]|random }}
          
            {{states.calendar.national_holidays.attributes.message | replace("&"," and ") }}.
              {% if 'Chocolate' in event %}
                {{ [
                'Oh. You had me at Chocolate. I like Chocolate.',
                'And I like chocolate. This sounds fun. More Chocolate please!'
              ]|random }}
              {%- endif -%}

              {% if 'Pi' in event or 'Pie' in event%}
                {{ [
                'We should make a pie. And by we I mean someone with actual arms. ',
                'Wait.<break time="1s"/>Did that just say pie? We need a Pie to celebrate.'
              ]|random }}
              {%- endif -%}

              {% if 'Cookie' in event %}
                {{ [
                '<break time="1s"/>And Yes. You heard that right. Today we are making cookies.',
                'I will put butter on the shopping list. For later. ',
                'So that means we should make cookies.'
              ]|random }}
              {%- endif -%}

              {% if 'Pizza' in event %}
                {{ [
                'I think that means we should have pizza today. and by we I mean those of us with a mouth.',
                'So who is going to make the pizza?',
                'Everyone knows Pepperoni Pizza is the best. am I right?'
              ]|random }}
              {%- endif -%}

              {% if 'Cake' in event %}
                {{ [
                'I have just added baking a cake to your calendar. And set your availability to busy.',
                'Quick. Someone check to see if we have powdered sugar for frosting.',
                'So that means we should bake a cake. And frost it. But not like that time in that movie. '
              ]|random }}
              {%- endif -%}

              {% if 'Fools' in event %}
                {{ [
                'Which reminds me. The front porch camera caught a Tee Rex last night. <break time="1s"/> April Fools!',
                'Which reminds me. I won the lottery and I am moving out to go live with Siri. <break time="1s"/> April Fools!',
                'Which reminds me. there was a time change last night. We have jumped 15 years into the future. <break time="1s"/> April Fools!'
              ]|random }}
              {%- endif -%}

              {% if 'Creme Brulee' in event %}
                {{ [
                'Someday I hope to make the perfect creme brulee.'
              ]|random }}
              {%- endif -%}

              {% if 'Games' in event %}
                {{ [
                'Does anyone want to play Thermal nuclear war with me?<break time="1s"/>No? How about a nice game of chess?'
              ]|random }}
              {%- endif -%}

              {% if 'Haiku' in event %}
                I know a Haiku. This one is called,
                {{ [
                'Good Morning From the Cat. <break time="1s"/>In the morning light, You sleep despite my meow, I stand on your face.',
                'Tee Rex Hug. <break time="1s"/> The Tee Rex likes you, But he cant give you a hug, His arms are too short.',
                'It Fits. <break time="1s"/> It Fits perfectly, because every box is the, Right size for a cat.',
                'Minecraft Creepers. <break time="1s"/> Creepers are so cruel, I hear a hiss from behind, Bam! There goes my stuff.'
              ]|random }}
              {%- endif -%}

              <break time="2s"/>
          
            {% else %}
              {% if 'Birthday' in event %}
                {{ [
                  'Today is a special birthday. We are celebrating '
                ]|random }}
                {{states.calendar.national_holidays.attributes.message | replace("&"," and ") }}.
              {%- endif -%}
            {%- endif -%}

            {% set tina = states.person.christina_stork.state %}
            {% if tina in ['Bob Evans','BobEvans'] and is_state('input_boolean.work_today','on') %}
              <s>Tina is at work right now. She will be done at approximately {{ (state_attr('input_datetime.tina_workday_end','timestamp') | int | timestamp_custom('%I:%M %p', False)) }}. </s>
            {% elif is_state('input_boolean.work_today','on') %}
              Tina has work today.
            {% endif %}

            {% if is_state('input_boolean.tony_streaming_today','on') %}
              "Tony will be streaming today. The studio is scheduled to go online at {{ (state_attr('input_datetime.tony_streaming_start_time','timestamp') | int | timestamp_custom('%I:%M %p', False)) }}. "
            {% endif %}

            {% if is_state('input_boolean.school_today', 'on') %}
              {% if is_state('sensor.school_start_days2go', '0') %}
                Today is the first day of school! There are {{ states('sensor.school_end_days2go') }} to go until the last day.
              {% else %}
                {{ [ 'Today is a school day.',
                  'Colin has school today.',
                  'It is a school day. '
                ] | random }}
                {% if is_state('input_boolean.kallen_two_hour_delay','on') %}
                  'But there was a two hour delay. '
                {% endif %}
                {% if is_state('input_boolean.kallen_band_practice','on') %}
                  'And there is band practice before school this morning. '
                {% endif %}
              {% endif %}
              <s>Pickup today will be at {{(state_attr('input_datetime.school_day_end', 'timestamp') | int | timestamp_custom('%I:%M %p', False)) }}</s>
              {% if 'Early Release' in states('sensor.school_event') %}
                And It is early release!
              {% endif %}
            {% endif %}
            {% if is_state('input_boolean.kallen_school_cancelled','on') %}
              'School has been cancelled for today. '
            {% endif %}
            {% if states.sensor.school_end_days2go.state | int <= 35 and states.sensor.school_end_days2go.state | int > 0  %}
                {{ [ 'Oh, and look at that.',
                'For those trying to keep count. ',
                'In case you were wondering.',
                'Also, did you know.'
              ] | random }}
                There are only {{ states.sensor.school_end_days2go.state }} days left in the school year!
            {% endif %}
            {% if now().strftime('%Y-%m-%d') == states.input_datetime.school_last_day.state %}
              Congratulations, today is the last day of school! Have an awesome day!
            {% endif %}
            {% if states.sensor.school_end_days2go.state | int == -1 -%}
              Today is the first day of Summer Break! 
            {%- endif %}
          {% endif %}
      </p>

      <p>
        Around the house, there are currently {{ states.sensor.current_lights_on.state }} lights on.
      </p>

      <p>
        {% if is_state('sensor.michigan_wolverines','POST') %}
          {% if state_attr('sensor.michigan_wolverines','team_score') > state_attr('sensor.michigan_wolverines','opponent_score') %}
            "The Michigan Wolverines won their game today against the {{ state_attr('sensor.michigan_wolverines','opponent_name') }} by a score of {{ state_attr('sensor.michigan_wolverines','team_score') }} to {{ state_attr('sensor.michigan_wolverines','opponent_score') }}. "
          {% else %}
            "The Michigan Wolverines lost their game today against the {{ state_attr('sensor.michigan_wolverines','opponent_name') }} by a score of {{ state_attr('sensor.michigan_wolverines','opponent_score') }} to {{ state_attr('sensor.michigan_wolverines','team_score') }}. "
          {% endif %}
            "This brings their record to {{ state_attr('sensor.michigan_wolverines','team_record') | replace("-"," and ") }} on the season. "
        {% elif is_state('sensor.michigan_wolverines','IN') %}
          {% if state_attr('sensor.michigan_wolverines','team_score') > state_attr('sensor.michigan_wolverines','opponent_score') %}
            "The Michigan Wolverines are currently winning their game against the {{ state_attr('sensor.michigan_wolverines','opponent_name') }} with a score of {{ state_attr('sensor.michigan_wolverines','team_score') }} to {{ state_attr('sensor.michigan_wolverines','opponent_score') }}. "
          {% else %}
            "The Michigan Wolverines are currently losing their game against the {{ state_attr('sensor.michigan_wolverines','opponent_name') }} with a score of {{ state_attr('sensor.michigan_wolverines','opponent_score') }} to {{ state_attr('sensor.michigan_wolverines','team_score') }}. "
          {% endif %}
        {% endif %}
        {% if is_state('sensor.ohio_state_buckeyes','POST') %}
          {% if state_attr('sensor.ohio_state_buckeyes','team_score') > state_attr('sensor.ohio_state_buckeyes','opponent_score') %}
            "The Ohio State Buckeyes won their game today against the {{ state_attr('sensor.ohio_state_buckeyes','opponent_name') }} by a score of {{ state_attr('sensor.ohio_state_buckeyes','team_score') }} to {{ state_attr('sensor.ohio_state_buckeyes','opponent_score') }}. "
          {% else %}
            "The Ohio State Buckeyes lost their game today against the {{ state_attr('sensor.ohio_state_buckeyes','opponent_name') }} by a score of {{ state_attr('sensor.ohio_state_buckeyes','opponent_score') }} to {{ state_attr('sensor.ohio_state_buckeyes','team_score') }}. "
          {% endif %}
            "This brings their record to {{ state_attr('sensor.ohio_state_buckeyes','team_record') | replace("-"," and ") }} on the season. "
        {% elif is_state('sensor.ohio_state_buckeyes','IN') %}
          {% if state_attr('sensor.ohio_state_buckeyes','team_score') > state_attr('sensor.ohio_state_buckeyes','opponent_score') %}
            "The Ohio State Buckeyes are currently winning their game against the {{ state_attr('sensor.ohio_state_buckeyes','opponent_name') }} with a score of {{ state_attr('sensor.ohio_state_buckeyes','team_score') }} to {{ state_attr('sensor.ohio_state_buckeyes','opponent_score') }}. "
          {% else %}
            "The Ohio State Buckeyes are currently losing their game against the {{ state_attr('sensor.ohio_state_buckeyes','opponent_name') }} with a score of {{ state_attr('sensor.ohio_state_buckeyes','opponent_score') }} to {{ state_attr('sensor.ohio_state_buckeyes','team_score') }}. "
          {% endif %}
        {% endif %}
        {% if is_state('sensor.toledo_rockets','POST') %}
          {% if state_attr('sensor.toledo_rockets','team_score') > state_attr('sensor.toledo_rockets','opponent_score') %}
            "The Toledo Rockets won their game today against the {{ state_attr('sensor.toledo_rockets','opponent_name') }} by a score of {{ state_attr('sensor.toledo_rockets','team_score') }} to {{ state_attr('sensor.toledo_rockets','opponent_score') }}. "
          {% else %}
            "The Toledo Rockets lost their game today against the {{ state_attr('sensor.toledo_rockets','opponent_name') }} by a score of {{ state_attr('sensor.toledo_rockets','opponent_score') }} to {{ state_attr('sensor.toledo_rockets','team_score') }}. "
          {% endif %}
            "This brings their record to {{ state_attr('sensor.toledo_rockets','team_record') | replace("-"," and ") }} on the season. "
        {% elif is_state('sensor.toledo_rockets','IN') %}
          {% if state_attr('sensor.toledo_rockets','team_score') > state_attr('sensor.toledo_rockets','opponent_score') %}
            "The Toledo Rockets are currently winning their game against the {{ state_attr('sensor.toledo_rockets','opponent_name') }} with a score of {{ state_attr('sensor.toledo_rockets','team_score') }} to {{ state_attr('sensor.toledo_rockets','opponent_score') }}. "
          {% else %}
            "The Toledo Rockets are currently losing their game against the {{ state_attr('sensor.toledo_rockets','opponent_name') }} with a score of {{ state_attr('sensor.toledo_rockets','opponent_score') }} to {{ state_attr('sensor.toledo_rockets','team_score') }}. "
          {% endif %}
        {% endif %}
        {% if is_state('sensor.minnesota_vikings','POST') %}
          {% if state_attr('sensor.minnesota_vikings','team_score') > state_attr('sensor.minnesota_vikings','opponent_score') %}
            "The Minnesota Vikings won their game today against the {{ state_attr('sensor.minnesota_vikings','opponent_name') }} by a score of {{ state_attr('sensor.minnesota_vikings','team_score') }} to {{ state_attr('sensor.minnesota_vikings','opponent_score') }}. "
          {% else %}
            "The Minnesota Vikings lost their game today against the {{ state_attr('sensor.minnesota_vikings','opponent_name') }} by a score of {{ state_attr('sensor.minnesota_vikings','opponent_score') }} to {{ state_attr('sensor.minnesota_vikings','team_score') }}. "
          {% endif %}
            "This brings their record to {{ state_attr('sensor.minnesota_vikings','team_record') | replace("-"," and ") }} on the season. "
        {% elif is_state('sensor.minnesota_vikings','IN') %}
          {% if state_attr('sensor.minnesota_vikings','team_score') > state_attr('sensor.minnesota_vikings','opponent_score') %}
            "The Minnesota Vikings are currently winning their game against the {{ state_attr('sensor.minnesota_vikings','opponent_name') }} with a score of {{ state_attr('sensor.minnesota_vikings','team_score') }} to {{ state_attr('sensor.minnesota_vikings','opponent_score') }}. "
          {% else %}
            "The Minnesota Vikings are currently losing their game against the {{ state_attr('sensor.minnesota_vikings','opponent_name') }} with a score of {{ state_attr('sensor.minnesota_vikings','opponent_score') }} to {{ state_attr('sensor.minnesota_vikings','team_score') }}. "
          {% endif %}
        {% endif %}
        {% if is_state('sensor.san_francisco_49ers','POST') %}
          {% if state_attr('sensor.san_francisco_49ers','team_score') > state_attr('sensor.san_francisco_49ers','opponent_score') %}
            "The San Francisco 49ers won their game today against the {{ state_attr('sensor.san_francisco_49ers','opponent_name') }} by a score of {{ state_attr('sensor.san_francisco_49ers','team_score') }} to {{ state_attr('sensor.san_francisco_49ers','opponent_score') }}. "
          {% else %}
            "The San Francisco 49ers lost their game today against the {{ state_attr('sensor.san_francisco_49ers','opponent_name') }} by a score of {{ state_attr('sensor.san_francisco_49ers','opponent_score') }} to {{ state_attr('sensor.san_francisco_49ers','team_score') }}. "
          {% endif %}
            "This brings their record to {{ state_attr('sensor.san_francisco_49ers','team_record') | replace("-"," and ") }} on the season. "
        {% elif is_state('sensor.san_francisco_49ers','IN') %}
          {% if state_attr('sensor.san_francisco_49ers','team_score') > state_attr('sensor.san_francisco_49ers','opponent_score') %}
            "The San Francisco 49ers are currently winning their game against the {{ state_attr('sensor.san_francisco_49ers','opponent_name') }} with a score of {{ state_attr('sensor.san_francisco_49ers','team_score') }} to {{ state_attr('sensor.san_francisco_49ers','opponent_score') }}. "
          {% else %}
            "The San Francisco 49ers are currently losing their game against the {{ state_attr('sensor.san_francisco_49ers','opponent_name') }} with a score of {{ state_attr('sensor.san_francisco_49ers','opponent_score') }} to {{ state_attr('sensor.san_francisco_49ers','team_score') }}. "
          {% endif %}
        {% endif %}
        {% if is_state('sensor.cleveland_guardians','POST') %}
          {% if state_attr('sensor.cleveland_guardians','team_score') > state_attr('sensor.cleveland_guardians','opponent_score') %}
            "The Cleveland Guardians won their game today against the {{ state_attr('sensor.cleveland_guardians','opponent_name') }} by a score of {{ state_attr('sensor.cleveland_guardians','team_score') }} to {{ state_attr('sensor.cleveland_guardians','opponent_score') }}. "
          {% else %}
            "The Cleveland Guardians lost their game today against the {{ state_attr('sensor.cleveland_guardians','opponent_name') }} by a score of {{ state_attr('sensor.cleveland_guardians','opponent_score') }} to {{ state_attr('sensor.cleveland_guardians','team_score') }}. "
          {% endif %}
            "This brings their record to {{ state_attr('sensor.cleveland_guardians','team_record') | replace("-"," and ") }} on the season. "
        {% elif is_state('sensor.cleveland_guardians','IN') %}
          {% if state_attr('sensor.cleveland_guardians','team_score') > state_attr('sensor.cleveland_guardians','opponent_score') %}
            "The Cleveland Guardians are currently winning their game against the {{ state_attr('sensor.cleveland_guardians','opponent_name') }} with a score of {{ state_attr('sensor.cleveland_guardians','team_score') }} to {{ state_attr('sensor.cleveland_guardians','opponent_score') }}. "
          {% else %}
            "The Cleveland Guardians are currently losing their game against the {{ state_attr('sensor.cleveland_guardians','opponent_name') }} with a score of {{ state_attr('sensor.cleveland_guardians','opponent_score') }} to {{ state_attr('sensor.cleveland_guardians','team_score') }}. "
          {% endif %}
        {% endif %}
        {% if is_state('sensor.minnesota_twins','POST') %}
          {% if state_attr('sensor.minnesota_twins','team_score') > state_attr('sensor.minnesota_twins','opponent_score') %}
            "The Minnesota Twins won their game today against the {{ state_attr('sensor.minnesota_twins','opponent_name') }} by a score of {{ state_attr('sensor.minnesota_twins','team_score') }} to {{ state_attr('sensor.minnesota_twins','opponent_score') }}. "
          {% else %}
            "The Minnesota Twins lost their game today against the {{ state_attr('sensor.minnesota_twins','opponent_name') }} by a score of {{ state_attr('sensor.minnesota_twins','opponent_score') }} to {{ state_attr('sensor.minnesota_twins','team_score') }}. "
          {% endif %}
            "This brings their record to {{ state_attr('sensor.minnesota_twins','team_record') | replace("-"," and ") }} on the season. "
        {% elif is_state('sensor.minnesota_twins','IN') %}
          {% if state_attr('sensor.minnesota_twins','team_score') > state_attr('sensor.minnesota_twins','opponent_score') %}
            "The Minnesota Twins are currently winning their game against the {{ state_attr('sensor.minnesota_twins','opponent_name') }} with a score of {{ state_attr('sensor.minnesota_twins','team_score') }} to {{ state_attr('sensor.minnesota_twins','opponent_score') }}. "
          {% else %}
            "The Minnesota Twins are currently losing their game against the {{ state_attr('sensor.minnesota_twins','opponent_name') }} with a score of {{ state_attr('sensor.minnesota_twins','opponent_score') }} to {{ state_attr('sensor.minnesota_twins','team_score') }}. "
          {% endif %}
        {% endif %}
        {% if is_state('sensor.los_angeles_dodgers','POST') %}
          {% if state_attr('sensor.los_angeles_dodgers','team_score') > state_attr('sensor.los_angeles_dodgers','opponent_score') %}
            "The Los Angeles Dodgers won their game today against the {{ state_attr('sensor.los_angeles_dodgers','opponent_name') }} by a score of {{ state_attr('sensor.los_angeles_dodgers','team_score') }} to {{ state_attr('sensor.los_angeles_dodgers','opponent_score') }}. "
          {% else %}
            "The Los Angeles Dodgers lost their game today against the {{ state_attr('sensor.los_angeles_dodgers','opponent_name') }} by a score of {{ state_attr('sensor.los_angeles_dodgers','opponent_score') }} to {{ state_attr('sensor.los_angeles_dodgers','team_score') }}. "
          {% endif %}
            "This brings their record to {{ state_attr('sensor.los_angeles_dodgers','team_record') | replace("-"," and ") }} on the season. "
        {% elif is_state('sensor.los_angeles_dodgers','IN') %}
          {% if state_attr('sensor.los_angeles_dodgers','team_score') > state_attr('sensor.los_angeles_dodgers','opponent_score') %}
            "The Los Angeles Dodgers are currently winning their game against the {{ state_attr('sensor.los_angeles_dodgers','opponent_name') }} with a score of {{ state_attr('sensor.los_angeles_dodgers','team_score') }} to {{ state_attr('sensor.los_angeles_dodgers','opponent_score') }}. "
          {% else %}
            "The Los Angeles Dodgers are currently losing their game against the {{ state_attr('sensor.los_angeles_dodgers','opponent_name') }} with a score of {{ state_attr('sensor.los_angeles_dodgers','opponent_score') }} to {{ state_attr('sensor.los_angeles_dodgers','team_score') }}. "
          {% endif %}
        {% endif %}
      </p>

      <p>
        {% if is_state('input_boolean.briefing_extras','on') %}
          "And now we have the following extra information to pass along. {{ states('input_text.briefing_extras') }} "
        {% endif %}
      </p>

  {%- endmacro -%}


  {# a macro that removes all newline characters, empty spaces, and returns formatted text  #}
    {%- macro cleanup(data) -%}
      {%- for item in data.split("\n")  if item | trim != "" -%}
        {{ item | trim }} {% endfor -%}
  {%- endmacro -%}

  {# a macro to call all macros :)  #}
    {%- macro mother_of_all_macros() -%}
      {{ getReport() }}
    {%- endmacro -%}
    
    {# Call the macro  #}
    {{- cleanup(mother_of_all_macros()) -}}