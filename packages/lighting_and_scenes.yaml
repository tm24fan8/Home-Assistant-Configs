input_boolean:
  shower_mode:
    name: Shower Mode
    icon: mdi:shower
  living_room_entertainment_mode:
    name: Living Room Entertainment Mode
    icon: mdi:party-popper
  basement_studio_entertainment_mode:
    name: Basement Studio Entertainment Mode
    icon: mdi:party-popper
  front_porch_light_on:
    name: Front Porch Light On
    icon: hue:room-outdoors
  living_room_dynamic_scenes:
    name: Living Room Dynamic Scenes
    icon: mdi:animation
  basement_studio_dynamic_scenes:
    name: Basement Studio Dynamic Scenes
    icon: mdi:animation
  living_room_entertainment_control:
    name: Living Room Entertainment Control
    icon: mdi:television-ambient-light
  basement_studio_entertainment_control:
    name: Basement Studio Entertainment Control
    icon: mdi:television-ambient-light
  delivery_mode:
    name: Delivery Mode
    icon: mdi:pizza
  holiday_mode:
    name: Holiday Mode
    icon: mdi:string-lights
  give_me_darkness:
    name: Give Me Darkness
    icon: mdi:weather-night
  holiday_mode_hold:
    name: Holiday Mode Hold
    icon: mdi:party-popper
  christmas_day_show:
    name: Christmas Day Show
    icon: mdi:pine-tree
  recliner_mode:
    name: Recliner Mode
    icon: mdi:seat-recline-extra
  adaptive_lighting_adjustments:
    name: Adaptive Lighting Adjustments
    icon: mdi:knob

input_number:
  upstairs_bathroom_motion_off_delay:
    name: Upstairs Bathroom Motion Off Delay
    min: 0
    max: 15
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  front_porch_motion_off_delay:
    name: Front Porch Motion Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  downstairs_bathroom_lights_off_delay:
    name: Downstairs Bathroom Lights Off Delay
    min: 0
    max: 60
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  basement_studio_lights_off_delay:
    name: Basement Studio Lights Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  living_room_lights_off_delay:
    name: Living Room Lights Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  emma_bedroom_lights_off_delay:
    name: Emma Bedroom Lights Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  stairwell_lights_off_delay:
    name: Stairwell Lights Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  mud_room_lights_off_delay:
    name: Mud Room Lights Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  kallen_bedroom_lights_off_delay:
    name: Kallen Bedroom Lights Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  master_bedroom_lights_off_delay:
    name: Master Bedroom Lights Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  upstairs_hallway_lights_off_delay:
    name: Upstairs Hallway Lights Off Delay
    min: 0
    max: 30
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  wakeup_lights_fade_day:
    name: Wakeup Lights Fade Day
    min: 0
    max: 15
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  wakeup_lights_fade_night:
    name: Wakeup Lights Fade Night
    min: 0
    max: 15
    step: 1
    unit_of_measurement: minutes
    icon: mdi:timer
  downstairs_bathroom_lux_threshold:
    name: Downstairs Bathroom Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  upstairs_bathroom_lux_threshold:
    name: Upstairs Bathroom Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  emma_bedroom_lux_threshold:
    name: Emma Bedroom Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  stairwell_lux_threshold:
    name: Stairwell Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  living_room_lux_threshold:
    name: Living Room Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  mud_room_lux_threshold:
    name: Mud Room Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  stairwell_top_lux_threshold:
    name: Stairwell Top Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  kallen_bedroom_lux_threshold:
    name: Kallen Bedroom Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  master_bedroom_lux_threshold:
    name: Master Bedroom Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  upstairs_hallway_lux_threshold:
    name: Upstairs Hallway Lux Threshold
    min: 0
    max: 100
    step: 5
    unit_of_measurement: lx
    icon: mdi:sun-wireless
  front_porch_lux_threshold:
    name: Front Porch Lux Threshold
    min: 0
    max: 2000
    step: 5
    mode: box
    unit_of_measurement: lx
    icon: mdi:sun-wireless

  # Settings for adaptive adjustments
  daytime_colortemp_front_porch:
    name: Daytime Colortemp Front Porch
    min: 2000
    max: 6500
    step: 100
    unit_of_measurement: K
    icon: mdi:temperature-kelvin
  daytime_colortemp_basement_studio:
    name: Daytime Colortemp Basement Studio
    min: 2000
    max: 6500
    step: 100
    unit_of_measurement: K
    icon: mdi:temperature-kelvin
  daytime_colortemp_living_room:
    name: Daytime Colortemp Living Room
    min: 2000
    max: 6500
    step: 100
    unit_of_measurement: K
    icon: mdi:temperature-kelvin
  daytime_colortemp_tina_lamp:
    name: Daytime Colortemp Tina Lamp
    min: 2000
    max: 6500
    step: 100
    unit_of_measurement: K
    icon: mdi:temperature-kelvin
  nighttime_colortemp_front_porch:
    name: Nighttime Colortemp Front Porch
    min: 2000
    max: 6500
    step: 100
    unit_of_measurement: K
    icon: mdi:temperature-kelvin
  nighttime_colortemp_basement_studio:
    name: Nighttime Colortemp Basement Studio
    min: 2000
    max: 6500
    step: 100
    unit_of_measurement: K
    icon: mdi:temperature-kelvin
  nighttime_colortemp_living_room:
    name: Nighttime Colortemp Living Room
    min: 2000
    max: 6500
    step: 100
    unit_of_measurement: K
    icon: mdi:temperature-kelvin
  nighttime_colortemp_tina_lamp:
    name: Nighttime Colortemp Tina Lamp
    min: 2000
    max: 6500
    step: 100
    unit_of_measurement: K
    icon: mdi:temperature-kelvin
  nighttime_brightness_basement_studio:
    name: Nighttime Brightness Basement Studio
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_living_room:
    name: Nighttime Brightness Living Room
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_downstairs_bathroom:
    name: Nighttime Brightness Downstairs Bathroom
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_tina_lamp:
    name: Nighttime Brightness Tina Lamp
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_mud_room:
    name: Nighttime Brightness Mud Room
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_upstairs_hallway:
    name: Nighttime Brightness Upstairs Hallway
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_upstairs_bathroom:
    name: Nighttime Brightness Upstairs Bathroom
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_master_bedroom:
    name: Nighttime Brightness Master Bedroom
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_kallen_bedroom:
    name: Nighttime Brightness Kallen Bedroom
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent
  nighttime_brightness_emma_bedroom:
    name: Nighttime Brightness Emma Bedroom
    min: 0
    max: 100
    step: 5
    unit_of_measurement: '%'
    icon: mdi:brightness-percent

input_select:
  living_room_scenes:
    name: Living Room Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Dimmed
      - Nightlight
      - Energize
      - Concentrate
      - Savanna Sunset
      - Tropical Twilight
      - Tokyo
      - Forest Adventure
      - Painted Sky
      - Twitch
      - Netflix
      - MLB
    initial: Select
    icon: hue:room-living
  mud_room_scenes:
    name: Mud Room Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Dimmed
      - Nightlight
    initial: Select
    icon: hue:room-other
  upstairs_hallway_scenes:
    name: Upstairs Hallway Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Dimmed
      - Nightlight
    initial: Select
    icon: hue:ceiling-round
  kallen_bedroom_scenes:
    name: Kallen Bedroom Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Dimmed
      - Nightlight
      - Overhead Nightlight
      - Wall Nightlight
    initial: Select
    icon: mdi:bunk-bed
  emma_bedroom_scenes:
    name: Emma Bedroom Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Dimmed
      - Nightlight
    initial: Select
    icon: hue:room-nursery
  basement_studio_scenes:
    name: Basement Studio Scenes
    options:
      - Select
      - Adaptive
      - Energize
      - Concentrate
      - Bright
      - Dimmed
      - Nightlight
      - Relax
      - Purple
      - Pink
      - Red Angry
      - Cyberpunk
      - Tokyo
      - Twitch
      - Netflix
      - MLB
      - Forest Adventure
      - Kallen Reading
      - Baby Is Napping
      - Stairwell
    initial: Select
    icon: mdi:twitch
  master_bedroom_scenes:
    name: Master Bedroom Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Dimmed
      - Nightlight
      - Front Nightlight
      - Side Nightlight
    initial: Select
    icon: mdi:bed
  upstairs_bathroom_scenes:
    name: Upstairs Bathroom Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Dimmed
      - Nightlight
      - Single Nightlight
    initial: Select
    icon: mdi:toilet
  downstairs_bathroom_scenes:
    name: Downstairs Bathroom Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Dimmed
      - Nightlight
    initial: Select
    icon: mdi:toilet
  front_porch_scenes:
    name: Front Porch Scenes
    options:
      - Select
      - Adaptive
      - Bright
      - Energize
      - Concentrate
      - Dimmed
      - Nightlight
      - St Patricks Day
      - Halloween
    initial: Select
    icon: hue:room-porch
  tina_lamp_scenes:
    name: Tina Lamp Scenes
    options:
      - Select
      - Adaptive
      - Energize
      - Bright
      - Nightlight
    initial: Select
    icon: hue:room-dining
  tina_desk_scenes:
    name: Tina Desk Scenes
    options:
      - Select
      - Day Mode
      - Evening Mode
      - Night Mode
      - Bright Mode
      - Reading Mode
      - Reset
    initial: Select
    icon: mdi:desk
  holiday_animation:
    name: Holiday Animation
    options:
      - Christmas
      - Halloween
      - St Patricks Day
    icon: mdi:palette

input_text:
  living_room_selected_scene:
    name: Living Room Selected Scene
  mud_room_selected_scene:
    name: Mud Room Selected Scene
  upstairs_hallway_selected_scene:
    name: Upstairs Hallway Selected Scene
  kallen_bedroom_selected_scene:
    name: Kallen Bedroom Selected Scene
  emma_bedroom_selected_scene:
    name: Emma Bedroom Selected Scene
  basement_studio_selected_scene:
    name: Basement Studio Selected Scene
  master_bedroom_selected_scene:
    name: Master Bedroom Selected Scene
  upstairs_bathroom_selected_scene:
    name: Upstairs Bathroom Selected Scene
  downstairs_bathroom_selected_scene:
    name: Downstairs Bathroom Selected Scene
  front_porch_selected_scene:
    name: Front Porch Selected Scene
  tina_lamp_selected_scene:
    name: Tina Lamp Selected Scene
  tina_desk_selected_scene:
    name: Tina Desk Selected Scene

template:
  - binary_sensor:
    - name: Basement Studio Sync Issue
      unique_id: 781d7a1e-ade3-44c3-b0f2-a15a5188107e
      state: >
        {% set colortemp = states('sensor.basement_studio_lights_colortemp_diff') | float(0) %}
        {% set brightness = states('sensor.basement_studio_lights_brightness_diff') | float(0) %}
        {% if is_state('light.basement_studio_lights','on') %}
          {% if is_state('switch.adaptive_lighting_basement_studio','on') and is_state('switch.adaptive_lighting_sleep_mode_basement_studio','off') %}
            {% if is_state('switch.adaptive_lighting_adapt_brightness_basement_studio','on') and is_state('switch.adaptive_lighting_adapt_color_basement_studio','on') %}
              {{ (colortemp > 100 or colortemp < -100) or (brightness > 5 or brightness < -5) }}
            {% elif is_state('switch.adaptive_lighting_adapt_brightness_basement_studio','on') and is_state('switch.adaptive_lighting_adapt_color_basement_studio','off') %}
              {{ brightness > 5 or brightness < -5 }}
            {% elif is_state('switch.adaptive_lighting_adapt_color_basement_studio','on') and is_state('switch.adaptive_lighting_adapt_brightness_basement_studio','off') %}
              {{ colortemp > 100 or colortemp < -100 }}
            {% endif %}
          {% endif %}
        {% endif %}
      attributes:
        color_diff: >
          {% set colortemp = states('sensor.basement_studio_lights_colortemp_diff') | float(0) %}
          {% if is_state('light.basement_studio_lights','on') %}
            {% if is_state('switch.adaptive_lighting_basement_studio','on') and is_state('switch.adaptive_lighting_sleep_mode_basement_studio','off') %}
              {% if is_state('switch.adaptive_lighting_adapt_color_basement_studio','on') %}
                {{ states('sensor.basement_studio_lights_colortemp_diff') }}
              {% else %}
                Color Off
              {% endif %}
            {% else %}
              Adaptive Off
            {% endif %}
          {% else %}
            Lights Off
          {% endif %}
        brightness_diff: >
          {% set brightness = states('sensor.basement_studio_lights_brightness_diff') | float(0) %}
          {% if is_state('light.basement_studio_lights','on') %}
            {% if is_state('switch.adaptive_lighting_basement_studio','on') and is_state('switch.adaptive_lighting_sleep_mode_basement_studio','off') %}
              {% if is_state('switch.adaptive_lighting_adapt_brightness_basement_studio','on') %}
                {{ states('sensor.basement_studio_lights_brightness_diff') }}
              {% else %}
                Brightness Off
              {% endif %}
            {% else %}
              Adaptive Off
            {% endif %}
          {% else %}
            Lights Off
          {% endif %}
      device_class: problem
      delay_on: "00:00:10"
    - name: Living Room Sync Issue
      unique_id: 35b3ca4f-14fb-4564-ab0c-1bb6a829c202
      state: >
        {% set colortemp = states('sensor.living_room_lights_colortemp_diff') | float(0) %}
        {% set brightness = states('sensor.living_room_lights_brightness_diff') | float(0) %}
        {% if is_state('light.living_room_lights','on') %}
          {% if is_state('switch.adaptive_lighting_living_room','on') and is_state('switch.adaptive_lighting_sleep_mode_living_room','off') %}
            {% if is_state('switch.adaptive_lighting_adapt_brightness_living_room','on') and is_state('switch.adaptive_lighting_adapt_color_living_room','on') %}
              {{ (colortemp > 100 or colortemp < -100) or (brightness > 5 or brightness < -5) }}
            {% elif is_state('switch.adaptive_lighting_adapt_brightness_living_room','on') and is_state('switch.adaptive_lighting_adapt_color_living_room','off') %}
              {{ brightness > 5 or brightness < -5 }}
            {% elif is_state('switch.adaptive_lighting_adapt_color_living_room','on') and is_state('switch.adaptive_lighting_adapt_brightness_living_room','off') %}
              {{ colortemp > 100 or colortemp < -100 }}
            {% endif %}
          {% endif %}
        {% endif %}
      attributes:
        color_diff: >
          {% set colortemp = states('sensor.living_room_lights_colortemp_diff') | float(0) %}
          {% if is_state('light.living_room_lights','on') %}
            {% if is_state('switch.adaptive_lighting_living_room','on') and is_state('switch.adaptive_lighting_sleep_mode_living_room','off') %}
              {% if is_state('switch.adaptive_lighting_adapt_color_living_room','on') %}
                {{ states('sensor.living_room_lights_colortemp_diff') }}
              {% else %}
                Color Off
              {% endif %}
            {% else %}
              Adaptive Off
            {% endif %}
          {% else %}
            Lights Off
          {% endif %}
        brightness_diff: >
          {% set brightness = states('sensor.living_room_lights_brightness_diff') | float(0) %}
          {% if is_state('light.living_room_lights','on') %}
            {% if is_state('switch.adaptive_lighting_living_room','on') and is_state('switch.adaptive_lighting_sleep_mode_living_room','off') %}
              {% if is_state('switch.adaptive_lighting_adapt_brightness_living_room','on') %}
                {{ states('sensor.living_room_lights_brightness_diff') }}
              {% else %}
                Brightness Off
              {% endif %}
            {% else %}
              Adaptive Off
            {% endif %}
          {% else %}
            Lights Off
          {% endif %}
      device_class: problem
      delay_on: "00:00:10"
    - name: Master Bedroom Sync Issue
      unique_id: 5f4a04ee-7e97-4035-91bf-4f0778023d18
      state: >
        {% set brightness = states('sensor.master_bedroom_lights_brightness_diff') | float(0) %}
        {% if is_state('light.master_bedroom_lights','on') %}
          {% if is_state('switch.adaptive_lighting_master_bedroom','on') and is_state('switch.adaptive_lighting_sleep_mode_master_bedroom','off') and is_state('switch.adaptive_lighting_adapt_brightness_master_bedroom','on') %}
            {{ brightness > 5 or brightness < -5 }}
          {% endif %}
        {% endif %}
      attributes:
        brightness_diff: >
          {% set brightness = states('sensor.master_bedroom_lights_brightness_diff') | float(0) %}
          {% if is_state('light.master_bedroom_lights','on') %}
            {% if is_state('switch.adaptive_lighting_master_bedroom','on') and is_state('switch.adaptive_lighting_sleep_mode_master_bedroom','off') %}
              {% if is_state('switch.adaptive_lighting_adapt_brightness_master_bedroom','on') %}
                {{ states('sensor.master_bedroom_lights_brightness_diff') }}
              {% else %}
                Brightness Off
              {% endif %}
            {% else %}
              Adaptive Off
            {% endif %}
          {% else %}
            Lights Off
          {% endif %}
      device_class: problem
      delay_on: "00:00:10"
    - name: Light Switch Issue
      unique_id: 381e8038-ea96-474c-92ec-d1296dc1369e
      state: >
        {% set lights = states.light.upstairs_bathroom_lights,
                        states.light.hallway_overhead,
                        states.light.downstairs_bathroom_lights,
                        states.light.living_room_lights,
                        states.light.front_porch_light %}
        {% set issues = lights | selectattr('state','eq','unavailable') | list | count %}
        {{ issues > 0 }}
      attributes:
        issues: >
          {% set lights = states.light.upstairs_bathroom_lights,
                          states.light.hallway_overhead,
                          states.light.downstairs_bathroom_lights,
                          states.light.living_room_lights,
                          states.light.front_porch_light %}
          {% set ids = lights | selectattr('state','eq','unavailable') | map(attribute='attributes.friendly_name') | list %}
          {{ ids | join(', ') }}
  - sensor:
    - name: "Basement Studio Lights - Brightness Actual"
      unique_id: dee4dc84-a6a0-4150-903e-5b8bd436d962
      state: >
        {% from 'lighting.jinja' import get_brightness_pct %}
        {{ get_brightness_pct('light.basement_studio_lights') }}
      availability: "{{ is_state('light.basement_studio_lights','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: "Basement Studio Lights - Brightness Intended"
      unique_id: 3542077f-24c6-460c-a73f-fe7bc8413b81
      state: "{{ state_attr('switch.adaptive_lighting_basement_studio','brightness_pct') | float | round(2) }}"
      availability: "{{ is_state('switch.adaptive_lighting_basement_studio','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: "Basement Studio Lights - Colortemp Actual"
      unique_id: 93cb2a2f-c8a7-44bf-813f-26ce349a072f
      state: "{{ state_attr('light.basement_studio_lights','color_temp_kelvin') | int }}"
      availability: "{{ is_state('light.basement_studio_lights','on') }}"
      unit_of_measurement: 'K'
      icon: mdi:thermometer-lines
    - name: "Basement Studio Lights - Colortemp Intended"
      unique_id: 85d4b063-bae8-43c2-9fea-35820b13f26f
      state: "{{ state_attr('switch.adaptive_lighting_basement_studio','color_temp_kelvin') | int }}"
      availability: "{{ is_state('switch.adaptive_lighting_basement_studio','on') }}"
      unit_of_measurement: 'K'
      icon: mdi:thermometer-lines
    - name: "Basement Studio Lights - Brightness Diff"
      unique_id: ab24a44c-6c6b-4ae9-b256-52592b0503bb
      state: >
        {% set current = states('sensor.basement_studio_lights_brightness_actual') | float %}
        {% set intended = states('sensor.basement_studio_lights_brightness_intended') | float %}
        {{ (current - intended) | float | round(2) }}
      availability: "{{ is_state('light.basement_studio_lights','on') and is_state('switch.adaptive_lighting_basement_studio','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: "Basement Studio Lights - Colortemp Diff"
      unique_id: fecf7d42-9a5c-471e-9af3-e1a330a6ae3e
      state: >
        {% set current = states('sensor.basement_studio_lights_colortemp_actual') | float %}
        {% set intended = states('sensor.basement_studio_lights_colortemp_intended') | float %}
        {{ (current - intended) | float | round(2) }}
      availability: "{{ is_state('light.basement_studio_lights','on') and is_state('switch.adaptive_lighting_basement_studio','on') }}"
      unit_of_measurement: 'K'
      icon: mdi:thermometer-lines
    - name: "Living Room Lights - Brightness Actual"
      unique_id: e557022a-184f-4111-bb6a-6c0869cce42c
      state: >
        {% from 'lighting.jinja' import get_brightness_pct %}
        {{ get_brightness_pct('light.living_room_lights') }}
      availability: "{{ is_state('light.living_room_lights','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: "Living Room Lights - Brightness Intended"
      unique_id: a758742f-6724-4920-a9d1-325fe4f02664
      state: "{{ state_attr('switch.adaptive_lighting_living_room','brightness_pct') | float | round(2) }}"
      availability: "{{ is_state('switch.adaptive_lighting_living_room','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: "Living Room Lights - Colortemp Actual"
      unique_id: dbe08826-e113-4474-bbca-60d3c32a4b65
      state: "{{ state_attr('light.living_room_lights','color_temp_kelvin') | int }}"
      availability: "{{ is_state('light.living_room_lights','on') }}"
      unit_of_measurement: 'K'
      icon: mdi:thermometer-lines
    - name: "Living Room Lights - Colortemp Intended"
      unique_id: 8b974c03-ab5b-4b89-97bf-afee78fa1a40
      state: "{{ state_attr('switch.adaptive_lighting_living_room','color_temp_kelvin') | int }}"
      availability: "{{ is_state('switch.adaptive_lighting_living_room','on') }}"
      unit_of_measurement: 'K'
      icon: mdi:thermometer-lines
    - name: "Living Room Lights - Brightness Diff"
      unique_id: 05f911d3-3b6a-4ca2-8181-5365707b2456
      state: >
        {% set current = states('sensor.living_room_lights_brightness_actual') | float %}
        {% set intended = states('sensor.living_room_lights_brightness_intended') | float %}
        {{ (current - intended) | float | round(2) }}
      availability: "{{ is_state('light.living_room_lights','on') and is_state('switch.adaptive_lighting_living_room','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: "Living Room Lights - Colortemp Diff"
      unique_id: d8fcaa26-d3dc-48d8-b4b9-9e701a1506a8
      state: >
        {% set current = states('sensor.living_room_lights_colortemp_actual') | float %}
        {% set intended = states('sensor.living_room_lights_colortemp_intended') | float %}
        {{ (current - intended) | float | round(2) }}
      availability: "{{ is_state('light.living_room_lights','on') and is_state('switch.adaptive_lighting_living_room','on') }}"
      unit_of_measurement: 'K'
      icon: mdi:thermometer-lines
    - name: "Master Bedroom Lights - Brightness Actual"
      unique_id: 50b9d6d3-196c-41d5-aa4e-1b1b9eaf6e89
      state: >
        {% from 'lighting.jinja' import get_brightness_pct %}
        {{ get_brightness_pct('light.master_bedroom_lights') }}
      availability: "{{ is_state('light.master_bedroom_lights','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: "Master Bedroom Lights - Brightness Intended"
      unique_id: 1de567ff-0cc3-446a-b330-167a61c0fbbb
      state: "{{ state_attr('switch.adaptive_lighting_master_bedroom','brightness_pct') | float | round(2) }}"
      availability: "{{ is_state('switch.adaptive_lighting_master_bedroom','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: "Master Bedroom Lights - Brightness Diff"
      unique_id: f761be5c-8d2b-4d39-acbd-8d03bf2275de
      state: >
        {% set current = states('sensor.master_bedroom_lights_brightness_actual') | float %}
        {% set intended = states('sensor.master_bedroom_lights_brightness_intended') | float %}
        {{ (current - intended) | float | round(2) }}
      availability: "{{ is_state('light.master_bedroom_lights','on') and is_state('switch.adaptive_lighting_master_bedroom','on') }}"
      unit_of_measurement: '%'
      icon: mdi:brightness-percent
    - name: Tina Desk Scene
      unique_id: 0d94ba35-bc9d-40a2-aa77-776d26bc3538
      state: >
        {% if is_state('input_boolean.give_me_darkness','on') %}
          Night Mode
        {% elif is_state('binary_sensor.early_night_mode','on') and is_state('input_boolean.give_me_darkness','off') %}
          Evening Mode
        {% else %}
          Day Mode
        {% endif %}
      icon: >
        {% if is_state('input_boolean.give_me_darkness','on') %}
          mdi:weather-night
        {% elif is_state('binary_sensor.early_night_mode','on') and is_state('input_boolean.give_me_darkness','off') %}
          mdi:lightbulb-night
        {% else %}
          mdi:lightbulb
        {% endif %}

switch:
  - platform: animated_scenes
    name: Christmas
    restore: False
    restore_power: False
    ignore_off: False
    lights:
      - light.front_porch_light
    colors:
      - color_type: rgb_color
        color: [255,0,0]
        brightness: 255
      - color_type: rgb_color
        color: [0,255,0]
        brightness: 255
    transition: 10
    change_frequency: 60
    change_amount: all
    change_sequence: True
    animate_brightness: True
    animate_color: True
  - platform: animated_scenes
    name: Christmas Day
    restore: False
    restore_power: False
    ignore_off: False
    lights:
      - light.living_room_color_1
      - light.living_room_color_2
      - light.living_room_color_3
      - light.tina_lamp_top
      - light.tina_lamp_side
    colors:
      - color_type: rgb_color
        color: [255,0,0]
        brightness: 255
      - color_type: rgb_color
        color: [0,255,0]
        brightness: 255
    transition: 1
    change_frequency: 5
    change_amount: 3
    change_sequence: False
    animate_brightness: True
    animate_color: True

#! Unless there is a good reason, do not define multi-room scenes below.
#! Use scripts instead, to avoid some straight-up haunted house bullshit...

scene:
  - name: Adaptive in Living Room
    icon: mdi:palette
    entities:
      light.living_room_lights:
        state: "on"
      input_select.living_room_scenes:
        state: "Adaptive"
  - name: Bright in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Bright"
  - name: Dimmed in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Dimmed"
  - name: Nightlight in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Nightlight"
  - name: Energize in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Energize"
  - name: Concentrate in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Concentrate"
  - name: Savanna Sunset in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Savanna Sunset"
  - name: Tropical Twilight in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Tropical Twilight"
  - name: Tokyo in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Tokyo"
  - name: Forest Adventure in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Forest Adventure"
  - name: Painted Sky in Living Room
    icon: mdi:palette
    entities:
      input_select.living_room_scenes:
        state: "Painted Sky"
  - name: Adaptive in Downstairs Bathroom
    icon: mdi:palette
    entities:
      light.downstairs_bathroom_lights:
        state: "on"
      input_select.downstairs_bathroom_scenes:
        state: "Adaptive"
  - name: Bright in Downstairs Bathroom
    icon: mdi:palette
    entities:
      input_select.downstairs_bathroom_scenes:
        state: "Bright"
  - name: Dimmed in Downstairs Bathroom
    icon: mdi:palette
    entities:
      input_select.downstairs_bathroom_scenes:
        state: "Dimmed"
  - name: Nightlight in Downstairs Bathroom
    icon: mdi:palette
    entities:
      input_select.downstairs_bathroom_scenes:
        state: "Nightlight"
  - name: Adaptive in Tina Lamp
    icon: mdi:palette
    entities:
      light.tina_lamp:
        state: "on"
      input_select.tina_lamp_scenes:
        state: "Adaptive"
  - name: Energize in Tina Lamp
    icon: mdi:palette
    entities:
      input_select.tina_lamp_scenes:
        state: "Energize"
  - name: Bright in Tina Lamp
    icon: mdi:palette
    entities:
      input_select.tina_lamp_scenes:
        state: "Bright"
  - name: Nightlight in Tina Lamp
    icon: mdi:palette
    entities:
      input_select.tina_lamp_scenes:
        state: "Nightlight"
  - name: Adaptive in Mud Room
    icon: mdi:palette
    entities:
      light.mud_room_overhead:
        state: "on"
      input_select.mud_room_scenes:
        state: "Adaptive"
  - name: Bright in Mud Room
    icon: mdi:palette
    entities:
      input_select.mud_room_scenes:
        state: "Bright"
  - name: Dimmed in Mud Room
    icon: mdi:palette
    entities:
      input_select.mud_room_scenes:
        state: "Dimmed"
  - name: Nightlight in Mud Room
    icon: mdi:palette
    entities:
      input_select.mud_room_scenes:
        state: "Nightlight"
  - name: Adaptive in Upstairs Hallway
    icon: mdi:palette
    entities:
      light.hallway_overhead:
        state: "on"
      input_select.upstairs_hallway_scenes:
        state: "Adaptive"
  - name: Bright in Upstairs Hallway
    icon: mdi:palette
    entities:
      input_select.upstairs_hallway_scenes:
        state: "Bright"
  - name: Dimmed in Upstairs Hallway
    icon: mdi:palette
    entities:
      input_select.upstairs_hallway_scenes:
        state: "Dimmed"
  - name: Nightlight in Upstairs Hallway
    icon: mdi:palette
    entities:
      input_select.upstairs_hallway_scenes:
        state: "Nightlight"
  - name: Adaptive in Upstairs Bathroom
    icon: mdi:palette
    entities:
      light.upstairs_bathroom_lights:
        state: "on"
      input_select.upstairs_bathroom_scenes:
        state: "Adaptive"
  - name: Bright in Upstairs Bathroom
    icon: mdi:palette
    entities:
      input_select.upstairs_bathroom_scenes:
        state: "Bright"
  - name: Dimmed in Upstairs Bathroom
    icon: mdi:palette
    entities:
      input_select.upstairs_bathroom_scenes:
        state: "Dimmed"
  - name: Nightlight in Upstairs Bathroom
    icon: mdi:palette
    entities:
      input_select.upstairs_bathroom_scenes:
        state: "Nightlight"
  - name: Single Nightlight in Upstairs Bathroom
    icon: mdi:palette
    entities:
      input_select.upstairs_bathroom_scenes:
        state: "Single Nightlight"
  - name: Adaptive in Master Bedroom
    icon: mdi:palette
    entities:
      light.master_bedroom_lights:
        state: "on"
      input_select.master_bedroom_scenes:
        state: "Adaptive"
  - name: Bright in Master Bedroom
    icon: mdi:palette
    entities:
      input_select.master_bedroom_scenes:
        state: "Bright"
  - name: Dimmed in Master Bedroom
    icon: mdi:palette
    entities:
      input_select.master_bedroom_scenes:
        state: "Dimmed"
  - name: Nightlight in Master Bedroom
    icon: mdi:palette
    entities:
      input_select.master_bedroom_scenes:
        state: "Nightlight"
  - name: Front Nightlight in Master Bedroom
    icon: mdi:palette
    entities:
      input_select.master_bedroom_scenes:
        state: "Front Nightlight"
  - name: Side Nightlight in Master Bedroom
    icon: mdi:palette
    entities:
      input_select.master_bedroom_scenes:
        state: "Side Nightlight"
  - name: Adaptive in Kallen Bedroom
    icon: mdi:palette
    entities:
      light.kallen_bedroom_lights:
        state: "on"
      input_select.kallen_bedroom_scenes:
        state: "Adaptive"
  - name: Bright in Kallen Bedroom
    icon: mdi:palette
    entities:
      input_select.kallen_bedroom_scenes:
        state: "Bright"
  - name: Dimmed in Kallen Bedroom
    icon: mdi:palette
    entities:
      input_select.kallen_bedroom_scenes:
        state: "Dimmed"
  - name: Nightlight in Kallen Bedroom
    icon: mdi:palette
    entities:
      input_select.kallen_bedroom_scenes:
        state: "Nightlight"
  - name: Overhead Nightlight in Kallen Bedroom
    icon: mdi:palette
    entities:
      input_select.kallen_bedroom_scenes:
        state: "Overhead Nightlight"
  - name: Wall Nightlight in Kallen Bedroom
    icon: mdi:palette
    entities:
      input_select.kallen_bedroom_scenes:
        state: "Wall Nightlight"
  - name: Adaptive in Emma Bedroom
    icon: mdi:palette
    entities:
      light.emma_bedroom_light:
        state: "on"
      input_select.emma_bedroom_scenes:
        state: "Adaptive"
  - name: Bright in Emma Bedroom
    icon: mdi:palette
    entities:
      input_select.emma_bedroom_scenes:
        state: "Bright"
  - name: Dimmed in Emma Bedroom
    icon: mdi:palette
    entities:
      input_select.emma_bedroom_scenes:
        state: "Dimmed"
  - name: Nightlight in Emma Bedroom
    icon: mdi:palette
    entities:
      input_select.emma_bedroom_scenes:
        state: "Nightlight"
  - name: Adaptive in Basement Studio
    icon: mdi:palette
    entities:
      light.basement_studio_lights:
        state: "on"
      input_select.basement_studio_scenes:
        state: "Adaptive"
  - name: Energize in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Energize"
  - name: Concentrate in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Concentrate"
  - name: Bright in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Bright"
  - name: Dimmed in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Dimmed"
  - name: Nightlight in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Nightlight"
  - name: Relax in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Relax"
  - name: Purple in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Purple"
  - name: Pink in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Pink"
  - name: Red Angry in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Red Angry"
  - name: Cyberpunk in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Cyberpunk"
  - name: Kallen Reading in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Kallen Reading"
  - name: Baby Is Napping in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Baby Is Napping"
  - name: Stairwell in Basement Studio
    icon: mdi:palette
    entities:
      input_select.basement_studio_scenes:
        state: "Stairwell"